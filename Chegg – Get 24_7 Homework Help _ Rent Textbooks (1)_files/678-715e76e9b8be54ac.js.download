(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[678],{85460:function(e,t,r){"use strict";t.__esModule=!0,t.useOptimizelyFeature=void 0;var n=r(50418),o=r(67294);t.useOptimizelyFeature=function(e){var t=(0,o.useContext)(n.OptimizelyContext).optimizely;if(!t)return{optimizely:t,isEnabled:!1,variables:{},clientReady:!0,didTimeout:!1};var r=(0,n.useFeature)(e);return{optimizely:t,isEnabled:r[0],variables:r[1],clientReady:r[2],didTimeout:r[3]}}},16938:function(e,t,r){"use strict";t.__esModule=!0,t.trackOptEvent=t.CheggOptimizelyConfig=t.UseOptimizelyFeatureParams=t.useOptimizelyFeature=t.setOptimizelyConfig=t.NextOptimizely=void 0;var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=n?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}r.default=e,t&&t.set(e,r);return r}(r(28548));t.NextOptimizely=n.default,t.setOptimizelyConfig=n.setOptimizelyConfig;var o=r(85460);t.useOptimizelyFeature=o.useOptimizelyFeature,t.UseOptimizelyFeatureParams=o.UseOptimizelyFeatureParams;var i=r(70319);function a(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}t.CheggOptimizelyConfig=i.CheggOptimizelyConfig,t.trackOptEvent=i.trackOptEvent},70319:function(e,t,r){"use strict";t.__esModule=!0,t.default=t.trackOptEvent=void 0;var n,o,i,a=r(50418),s=r(89228),u=(n=r(29333))&&n.__esModule?n:{default:n},c=r(8605);function f(){return f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f.apply(this,arguments)}t.trackOptEvent=function(e){i&&i(e)};var l=function(e){var t,r;if(!u.default||!e)return null;if(e.shouldEnable&&!e.shouldEnable())return null;if(o)return o;var n=e.cookieDomain,l=void 0===n?".chegg.com":n,p=e.queryStringOnPageLoad,d=void 0===p?null==(t=window)||null==(r=t.location)?void 0:r.search:p,v=e.rioClient,h=void 0===v?(0,c.getClient)():v,g=e.logLevel,y=void 0===g?a.enums.LOG_LEVEL.ERROR:g,E=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,["cookieDomain","queryStringOnPageLoad","rioClient","logLevel"]),_=(0,s.standardInit)(f({queryStringOnPageLoad:d,cookieDomain:l,rioClient:h,logLevel:y},E)),m=_.optimizely,O=_.trackingAdapter;return i=O,o=m,e.afterOptInit&&e.afterOptInit(m,O),o};t.default=l},28548:function(e,t,r){"use strict";t.__esModule=!0,t.default=t.setOptimizelyConfig=void 0;var n=u(r(67294)),o=r(50418),i=r(93173),a=u(r(70319)),s=r(10337);function u(e){return e&&e.__esModule?e:{default:e}}function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}var f={};t.setOptimizelyConfig=function(e){f=e};var l=function(e){var t=e.children,r=function(){var e=c({},(0,s.getConfig)("optimizelyConfig"),f);return"sdkKey"in e||"datafile"in e?e:null}(),u=(0,a.default)(r);if(!u)return n.default.createElement(n.default.Fragment,null,t);var l={id:(0,i.getOrSetUUIDCookie)(r.cookieDomain,r.uuidCookieName),attributes:{}};return n.default.createElement(o.OptimizelyProvider,{optimizely:u,user:l},t)};t.default=l},93173:function(e,t,r){"use strict";t.__esModule=!0,t.getOrSetUUIDCookie=t.getUUIDCookie=t.uniqid=t.UUID_COOKIE_NAME=void 0;var n=i(r(36808)),o=i(r(2568));function i(e){return e&&e.__esModule?e:{default:e}}t.UUID_COOKIE_NAME="V";var a=function(){for(var e=(Date.now()/1e3).toString(16).split(".").join("");e.length<14;)e+="0";var t=(1e3*Math.random()).toString();return""+(0,o.default)(t)+e+"."+Math.floor(1e7+8e7*Math.random())};t.uniqid=a;var s=function(e){return void 0===e&&(e="V"),n.default.get(e)};t.getUUIDCookie=s;t.getOrSetUUIDCookie=function(e,t){var r=s(t);if(r)return r;var o=a(),i=new Date,u=new Date(i.getFullYear()+10,i.getMonth(),i.getDay());return n.default.set(null!=t?t:"V",o,{domain:e,expires:u}),o}},29333:function(e,t){"use strict";t.__esModule=!0,t.default=void 0;var r="undefined"!==typeof window;t.default=r},89228:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(19889),o=r(50418),i=r(36808),a=r(27354),s=function(){return s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s.apply(this,arguments)};function u(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(t){i(t)}}function s(e){try{u(n.throw(e))}catch(t){i(t)}}function u(e){e.done?o(e.value):new r((function(t){t(e.value)})).then(a,s)}u((n=n.apply(e,t||[])).next())}))}function c(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function f(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}function l(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e}var p="dev",d="prod",v="force-exp-",h="none0",g="control",y=",",E="opt-user-profile",_="devopt-user-profile",m="event",O="string",b="Chegg-Experiments",I="gam-",T="_sbmGetOptimizelyGamKvps",R="optimizelyVariationIds",A="data",S="state",N="c_id",w="fromSEM",P="@chegg/optimizely-sdk",C=Object.freeze({__proto__:null,DEV:p,PROD:d,FORCE_QUERY_KEY:v,FORCE_ALL_TO_CONTROL:h,CONTROL:g,PROJECT_KEY_DELIMITER:"|",INDEX_DELIMITER:y,KVP_DELIMITER:":",USER_PROFILE_COOKIE:E,DEV_USER_PROFILE_COOKIE:_,EVENT:m,STRING:O,CHEGG_EXPERIMENTS_HEADER_NAME:b,HEADER_VARIATION_DELIMITER:"|",GAM_KEY:I,GAM_GLOBAL_KVP_NAMESPACE:T,RIO_VARIATIONS_LAYER_NAME:R,DATA:A,STATE:S,SEM_USER_QUERY_PARAM:N,SEM_USER_QUERY_PARAM_VALUE:"sem",SEM_USER_OPTZ_ATTR_KEY:w,PACKAGE_NAME:P}),L=function(e){var t=e.user_id,r=e.experiment_bucket_map,n=Object.keys(r).reduce((function(e,t){return""+e+(e.length?y:"")+t+":"+r[t].variation_id}),"");return encodeURIComponent(""+t+y+n)},x=function(e){var t=f(decodeURIComponent(e).split(y)),r=t[0],n=t.slice(1);if(!n.length)throw new Error("cookie encoding is corrupt");var o=n.reduce((function(e,t){var r=f(t.split(":"),2),n=r[0],o=r[1];return e[n]={variation_id:o},e}),{});return{user_id:r,experiment_bucket_map:o}},U=function(e,t){var r=e.experiment_bucket_map,n=t.experimentsMap;return Object.keys(r).reduce((function(e,t){var o=r[t].variation_id,i=Object.keys(n).find((function(e){return n[e].id===t})),a=n[i];if(!a)return e;var u=a.variationsMap,c=Object.keys(u).find((function(e){return u[e].id===o})),f=u[c];return f?l(e,[{experiment:{id:t,key:i},variation:s({},f)}]):e}),[])},D=function(e,t){return U(e,t).map((function(e){var t=e.experiment,r=e.variation;return{experiment:t.key,variation:r.key}}))},j=function(e){var t,r;return e&&(null===(r=null===(t=e())||void 0===t?void 0:t.attributes)||void 0===r?void 0:r.deployEnv)===p?_:E},M=function(e){var t;return{assignContext:function(e){t=e},userProfileService:{save:function(r){!function(e,t,r){void 0===r&&(r=E);try{i.set(r,L(e),{domain:t,expires:1/0})}catch(n){console.error("OPTIMIZELY: error encoding user profile to cookie. ",n)}}(r,e,j(t))},lookup:function(e){return function(e,t){void 0===t&&(t=E);try{var r=i.get(t);return r?x(r):{user_id:"",experiment_bucket_map:{}}}catch(n){return i.remove(t),{user_id:"",experiment_bucket_map:{}}}}(0,j(t))}}}},V=function(e,t){var r,n,o=t||(null===(n=null===(r=e)||void 0===r?void 0:r.user)||void 0===n?void 0:n.id);return o||console.error("OPTIMIZELY: user id is not set."),o},k=function(e){var t=e.getOptimizelyConfig();return t||console.error("OPTIMIZELY: optimizely config is not fetched."),t},F=function(e){return"function"===typeof e.setUser},B=function(e,t){console.error("["+P+"]: "+e,t)},G=function(e,t){try{var r="sem"===t.c_id;if(!F(e))return;!function(e,t){var r=function(){var r,n=e.user;e.setUser({id:n.id,attributes:s(s({},n.attributes),(r={},r.fromSEM=t,r))})};e.onUserUpdate((function(){e.user.attributes.fromSEM!==t&&r()})),r()}(e,r)}catch(n){B("there was an error parsing this query string to determine SEM user",n)}},K=new RegExp("^force-exp-"),H=function(e){var t=function(t){t&&void 0===t.attributes.forcedExperiment&&e.setUser({id:t.id,attributes:s(s({},t.attributes),{forcedExperiment:!1})})};F(e)&&(t(e.user),e.onUserUpdate(t))},W=function(e,t){var r=function(e){return a.parse(e,{ignoreQueryPrefix:!0,parseArrays:!1})}(t),n=z(e,r);return G(e,r),n},z=function(e,t){try{var r=function(t){t&&!t.attributes.forcedExperiment&&e.setUser({id:t.id,attributes:s(s({},t.attributes),{forcedExperiment:!0})})},n=Object.keys(t).filter((function(e){return K.test(e)&&typeof t[e]===O})).map((function(e){var r=function(e){return e.slice(v.length).split("|").pop()}(e);return{experiment:r,variation:t[e]}}));return n.length&&F(e)?(r(e.user),e.onUserUpdate(r)):F(e)&&H(e),n}catch(o){return B("there was an error parsing this query string to force allocations",o),[]}},Y=function(e){var t=e.optimizely,r=e.forcedAllocations,n=e.optConfig,o=e.user_id,i=e.userProfileService;(function(e,t){var r=e.filter((function(e){return e.experiment!==h}));return e.length===r.length?e:Object.keys(t.experimentsMap).reduce((function(e,r){return t.experimentsMap[r].variationsMap.control?l([{experiment:r,variation:g}],e):(console.error('[@chegg/optimizely-sdk]: experiment "'+r+'" does not contain a "control" variation. This violates the contract with chegg\'s sdk. Ensure every experiment contains a "control" variation for consistent results in QA.'),e)}),r)})(r,n).forEach((function(e){var r=e.experiment,a=e.variation;n.experimentsMap[r]?(t.setForcedVariation(r,o,a),function(e,t,r,n,o){var i,a=r.lookup(n),u=a?a.experiment_bucket_map:{},c=o.experimentsMap[e],f=c.id,l=c.variationsMap[t].id;r.save({user_id:n,experiment_bucket_map:s(s({},u),(i={},i[f]={variation_id:l},i))})}(r,a,i,o,n)):console.error('[@chegg/optimizely-sdk]: Unable to find optimizely experiment "'+r+'" in config. \nCheck query string spelling, and confirm experiment is published.')}))};function q(e,t,r,n){return u(this,void 0,void 0,(function(){var o,i,a,s,u;return c(this,(function(c){switch(c.label){case 0:return o=!1,[4,e.onReady()];case 1:return c.sent(),r?(i=W(e,r),a=V(e,n),s=k(e),!a&&e.onUserUpdate?((u=e).onUserUpdate((function(){u.user.id&&!o&&(Y({forcedAllocations:i,userProfileService:t,optConfig:s,optimizely:e,user_id:u.user.id}),o=!0)})),[2]):a&&s?(Y({userProfileService:t,forcedAllocations:i,optConfig:s,optimizely:e,user_id:a}),o=!0,[2]):(console.error("[@chegg/optimizely-sdk]: exiting before applying forced allocations."),[2])):[2,H(e)]}}))}))}var J=function(e){var t=e.experiment_bucket_map,r=Object.keys(t).map((function(e){return t[e].variation_id})).join(y);return 0===r.length?[]:[{layer:R,cell:r}]},X=function(e,t){var r=k(t);return r?D(e,r).map((function(e){return{layer:e.experiment,cell:e.variation}})):[]},Z=function(e,t){e.notificationCenter.addNotificationListener(n.enums.NOTIFICATION_TYPES.ACTIVATE,(function(e){var r=e.experiment.key,n=e.variation.key;t.updateState({testCells:[{layer:r,cell:n}]})}));var r=i.get(E);if(r){var o=x(r);t.updateState({testCells:l(J(o),X(o,e))})}},Q=function(e,t){return function(r){var n=r.eventKey,o=r.eventTags,i=r.attributes,a=r.overrideUserId;try{var s=a||V(e,t);s&&e.track(n,s,i,o),window.optimizely=window.optimizely||[];var u={type:m,eventName:n,tags:o};window.optimizely.push(u)}catch(c){return}}},$=function(e){return function(t){var r,n=e(t).map((function(e){return e.variation.id})).sort().join("|");return(r={})["Chegg-Experiments"]=n,r}},ee={},te=new RegExp("gam-[a-z]$","i"),re=function(e,t){var r=function(e,t){return function(r){var n=e(r);return l(ne(t),oe(n,t))}}(e,t);Object.defineProperty(window,T,{value:r,configurable:!1,writable:!1})},ne=function(e){var t,r,n,o=[];if(void 0===(null===(t=window.optimizely)||void 0===t?void 0:t.get))return o;var i=(null===(r=window.optimizely)||void 0===r?void 0:r.get(A)).experiments,a=(0,(null===(n=window.optimizely)||void 0===n?void 0:n.get(S)).getVariationMap)();return Object.keys(a).reduce((function(t,r){var n=i[r];if(void 0===n||!te.test(n.name))return t;var o=a[r],s=n.variations[o.index];return l(t,[{experiment:""+e+n.name.slice(-1),variation:s.name}])}),o)},oe=function(e,t){return e.reduce((function(e,r){var n=r.experiment,o=r.variation;return te.test(n.key)?l(e,[{experiment:""+t+n.key.slice(-1),variation:o.key}]):e}),[])},ie=function(e,t,r){var n=r.queryStringOnPageLoad,o=r.rioClient,i=r.userId;return q(e,t,n,i).then((function(){o&&Z(e,o)}))},ae=function(e){var t,r=e.cookieDomain,a=e.queryStringOnPageLoad,f=e.rioClient,l=e.userId,v=e.onActivate,h=e.projectGamKeyPrefix,g=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["cookieDomain","queryStringOnPageLoad","rioClient","userId","onActivate","projectGamKeyPrefix"]),y=M(r),m=y.userProfileService,O=y.assignContext,b=o.createInstance(s(s({},g),{userProfileService:m}));O((function(){return b.user})),t=b,u(void 0,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,t.onReady()];case 1:return e.sent(),t.onUserUpdate((function(e){var r;i.get(_)&&(null===(r=null===e||void 0===e?void 0:e.attributes)||void 0===r?void 0:r.deployEnv)===d&&t.setUser({id:e.id,attributes:s(s({},e.attributes),{deployEnv:p})})})),[2]}}))})),v&&b.notificationCenter.addNotificationListener(n.enums.NOTIFICATION_TYPES.ACTIVATE,v);var I=Q(b),T=function(e,t){return function(r){var n=k(e),o=r||V(e,r);if(!o||!n)return[];var a=i.get(E);if(!a)return[];if(!ee[a]){var s=t.lookup(o),u=U(s,n);ee[a]=u}return ee[a]}}(b,m),R=$(T);return h&&re(T,h),{optimizely:b,userProfileService:m,trackingAdapter:I,getCheggExperimentsHeader:R,configurationPromise:ie(b,m,{queryStringOnPageLoad:a,rioClient:f,userId:l})}};t.Constants=C,t.addCheggConfiguration=ie,t.createGetCheggExperimentsHeader=$,t.createTrackingAdapter=Q,t.createUserProfileCookieService=M,t.decodeUserProfileCookie=x,t.default=ae,t.encodeUserProfileCookie=L,t.forceAllocationsOnReady=q,t.initRioTracking=Z,t.parseForcedAllocations=z,t.standardInit=ae,t.transformToHumanReadable=D},50418:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=r(67294),i=r(98125),a=(n=r(8679))&&"object"===typeof n&&"default"in n?n.default:n,s=r(19889),u=o.createContext({optimizely:null,isServerSide:!1,timeout:0}),c=u.Consumer,f=u.Provider,l=function(e,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},l(e,t)};function p(e,t){function r(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var d=function(){return d=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},d.apply(this,arguments)};var v,h=i.getLogger("<OptimizelyProvider>"),g=function(e){function t(t){var r=e.call(this,t)||this,n=t.optimizely,o=t.userId,i=t.userAttributes,a=t.user,s=null;return a?"then"in a?a.then((function(e){n.setUser(e)})):s={id:a.id,attributes:a.attributes||{}}:o&&(s={id:o,attributes:i||{}},h.warn("Passing userId and userAttributes as props is deprecated, please switch to using `user` prop")),s&&n.setUser(s),r}return p(t,e),t.prototype.componentDidUpdate=function(e){if(!e.isServerSide){var t=this.props.optimizely;this.props.user&&"id"in this.props.user&&(t.user.id&&function(e,t){if(e.id!==t.id)return!1;var r=Object.keys(e.attributes),n=Object.keys(t.attributes);if(r.sort(),n.sort(),r.length!==n.length)return!1;for(var o=0;o<r.length;o++){var i=r[o],a=n[o];if(i!==a)return!1;if(e.attributes[i]!==t.attributes[a])return!1}return!0}({id:t.user.id,attributes:t.user.attributes},{id:this.props.user.id,attributes:this.props.user.attributes||{}})||t.setUser(this.props.user))}},t.prototype.render=function(){var e=this.props,t=e.optimizely,r=e.children,n=e.timeout,i={optimizely:t,isServerSide:!!this.props.isServerSide,timeout:n};return o.createElement(f,{value:i},r)},t}(o.Component),y=function(e,t,r,n,o){var i="re-evaluating "+t+'="'+r+'" for user="'+e.user.id+'"',a=e.notificationCenter.addNotificationListener(s.enums.NOTIFICATION_TYPES.OPTIMIZELY_CONFIG_UPDATE,(function(){n.info(s.enums.NOTIFICATION_TYPES.OPTIMIZELY_CONFIG_UPDATE+", "+i),o()})),u=e.onUserUpdate((function(){n.info("User update, "+i),o()}));return function(){e.notificationCenter.removeNotificationListener(a),u()}};!function(e){e.EXPERIMENT="Experiment",e.FEATURE="Feature"}(v||(v={}));var E=function(e,t,r,n,o,a,s){return function(){var u=[],c=void 0!==n.timeout?n.timeout:o,f=i.getLogger("use"+e);return r.onReady({timeout:c}).then((function(n){if(!n.success)return a((function(e){return d({},e,{didTimeout:!0})})),f.info(e+'="'+t+'" could not be set before timeout of '+c+'ms, reason="'+(n.reason||"")+'"'),n.dataReadyPromise.then((function(){f.info(e+'="'+t+'" is now set, but after timeout.')}));f.info(e+'="'+t+'" successfully set for user="'+r.user.id+'"')})).then((function(){a((function(e){return d({},e,s(),{clientReady:!0})})),n.autoUpdate&&u.push(y(r,e,t,f,(function(){u.length&&a((function(e){return d({},e,s())}))})))})).catch((function(){f.error("Error initializing client. The core client or user promise(s) rejected.")})),function(){for(;u.length;)u.shift()()}}},_=function(e,t,r){void 0===t&&(t={}),void 0===r&&(r={});var n=o.useContext(u),i=n.isServerSide,a=n.optimizely,s=n.timeout;if(!a)throw new Error("optimizely prop must be supplied via a parent <OptimizelyProvider>");var c=o.useCallback((function(){return{variation:a.activate(e,r.overrideUserId,r.overrideAttributes)}}),[e,r]),f=o.useState((function(){var e={variation:null,clientReady:!!i,didTimeout:!1};return i?d({},e,c()):e})),l=f[0],p=f[1];return o.useEffect(E(v.EXPERIMENT,e,a,t,s,p,c),[a]),[l.variation,l.clientReady,l.didTimeout]},m=function(e,t,r){void 0===t&&(t={}),void 0===r&&(r={});var n=o.useContext(u),i=n.isServerSide,a=n.optimizely,s=n.timeout;if(!a)throw new Error("optimizely prop must be supplied via a parent <OptimizelyProvider>");var c=o.useCallback((function(){return{isEnabled:a.isFeatureEnabled(e,r.overrideUserId,r.overrideAttributes),variables:a.getFeatureVariables(e,r.overrideUserId,r.overrideAttributes)}}),[e,r]),f=o.useState((function(){var e={isEnabled:!1,variables:{},clientReady:!!i,didTimeout:!1};return i?d({},e,c()):e})),l=f[0],p=f[1];return o.useEffect(E(v.FEATURE,e,a,t,s,p,c),[a]),[l.isEnabled,l.variables,l.clientReady,l.didTimeout]},O=function(e){var t=e.feature,r=e.timeout,n=e.autoUpdate,i=e.children,a=e.overrideUserId,s=e.overrideAttributes,u=m(t,{timeout:r,autoUpdate:n},{overrideUserId:a,overrideAttributes:s}),c=u[0],f=u[1],l=u[2],p=u[3];return l||p?o.createElement(o.Fragment,null,i(c,f,l,p)):null};var b=function(e){var t=e.experiment,r=e.autoUpdate,n=e.timeout,i=e.overrideUserId,a=e.overrideAttributes,s=e.children,u=_(t,{timeout:n,autoUpdate:r},{overrideUserId:i,overrideAttributes:a}),c=u[0],f=u[1],l=u[2];if(!f&&!l)return null;if(null!=s&&"function"===typeof s)return o.createElement(o.Fragment,null,s(c,f,l));var p=null;return o.Children.forEach(s,(function(e){!p&&o.isValidElement(e)&&(e.props.variation?c===e.props.variation&&(p=e):e.props.default&&(p=e))})),p?o.cloneElement(p,{variation:c}):null},I=function(e){var t=e.children;return o.createElement(o.Fragment,null,t)},T=i.getLogger("ReactSDK"),R=function(){function e(e){var t=this;this.user={id:null,attributes:{}},this.isUserPromiseResolved=!1,this.onUserUpdateHandlers=[],this.initialConfig=e,this.userPromiseResovler=function(){};var r=d({},e,{clientEngine:"react-sdk",clientVersion:"2.2.0"});this._client=s.createInstance(r),this.userPromise=new Promise((function(e){t.userPromiseResovler=e})).then((function(){return{success:!0}})),this.dataReadyPromise=Promise.all([this.userPromise,this._client.onReady()]).then((function(){return{success:!0,reason:"datafile and user resolved"}}))}return e.prototype.onReady=function(e){var t,r=this;void 0===e&&(e={});var n=5e3;e&&void 0!==e.timeout&&(n=e.timeout);var o=new Promise((function(e){t=setTimeout((function(){e({success:!1,reason:"failed to initialize onReady before timeout, either the datafile or user info was not set before the timeout",dataReadyPromise:r.dataReadyPromise})}),n)}));return Promise.race([this.dataReadyPromise,o]).then((function(e){return clearTimeout(t),e}))},e.prototype.setUser=function(e){var t=this;e.id&&(this.user.id=e.id),e.attributes&&(this.user.attributes=e.attributes),this.isUserPromiseResolved||(this.userPromiseResovler(this.user),this.isUserPromiseResolved=!0),this.onUserUpdateHandlers.forEach((function(e){return e(t.user)}))},e.prototype.onUserUpdate=function(e){var t=this;return this.onUserUpdateHandlers.push(e),function(){var r=t.onUserUpdateHandlers.indexOf(e);r>-1&&t.onUserUpdateHandlers.splice(r,1)}},e.prototype.activate=function(e,t,r){var n=this.getUserContextWithOverrides(t,r);return null===n.id?(T.info('Not activating experiment "%s" because userId is not set',e),null):this._client.activate(e,n.id,n.attributes)},e.prototype.getVariation=function(e,t,r){var n=this.getUserContextWithOverrides(t,r);return null===n.id?(T.info('getVariation returned null for experiment "%s" because userId is not set',e),null):this._client.getVariation(e,n.id,n.attributes)},e.prototype.track=function(e,t,r,n){"undefined"!==typeof t&&"string"!==typeof t&&(n=t,t=void 0,r=void 0);var o=this.getUserContextWithOverrides(t,r);if(null!==o.id)return this._client.track(e,o.id,o.attributes,n);T.info('track for event "%s" not being sent because userId is not set',e)},e.prototype.isFeatureEnabled=function(e,t,r){var n=this.getUserContextWithOverrides(t,r);return null===n.id?(T.info('isFeatureEnabled returning false for feature "%s" because userId is not set',e),!1):this._client.isFeatureEnabled(e,n.id,n.attributes)},e.prototype.getFeatureVariables=function(e,t,r){var n=this,o=this.getUserContextWithOverrides(t,r),i=o.id;if(null===i)return T.info('getFeatureVariables returning `{}` for feature "%s" because userId is not set',e),{};var a=o.attributes,s={},u=this._client.projectConfigManager.getConfig();if(!u)return{};var c=u.featureKeyMap[e];return c?(c.variables.forEach((function(t){var r=t.type,o=t.key;switch(r){case"string":s[o]=n._client.getFeatureVariableString(e,o,i,a);break;case"boolean":s[o]=n._client.getFeatureVariableBoolean(e,o,i,a);break;case"integer":s[o]=n._client.getFeatureVariableInteger(e,o,i,a);break;case"double":s[o]=n._client.getFeatureVariableDouble(e,o,i,a);break;case"json":s[o]=n._client.getFeatureVariableJSON(e,o,i,a)}})),s):{}},e.prototype.getFeatureVariableString=function(e,t,r,n){var o=this.getUserContextWithOverrides(r,n);return null===o.id?null:this._client.getFeatureVariableString(e,t,o.id,o.attributes)},e.prototype.getFeatureVariableBoolean=function(e,t,r,n){var o=this.getUserContextWithOverrides(r,n);return null===o.id?null:this._client.getFeatureVariableBoolean(e,t,o.id,o.attributes)},e.prototype.getFeatureVariableInteger=function(e,t,r,n){var o=this.getUserContextWithOverrides(r,n);return null===o.id?null:this._client.getFeatureVariableInteger(e,t,o.id,o.attributes)},e.prototype.getFeatureVariableDouble=function(e,t,r,n){var o=this.getUserContextWithOverrides(r,n);return null===o.id?null:this._client.getFeatureVariableDouble(e,t,o.id,o.attributes)},e.prototype.getFeatureVariableJSON=function(e,t,r,n){var o=this.getUserContextWithOverrides(r,n);return null===o.id?null:this._client.getFeatureVariableJSON(e,t,o.id,o.attributes)},e.prototype.getFeatureVariable=function(e,t,r,n){var o=this.getUserContextWithOverrides(r,n);return null===o.id?null:this._client.getFeatureVariable(e,t,o.id,o.attributes)},e.prototype.getAllFeatureVariables=function(e,t,r){var n=this.getUserContextWithOverrides(t,r);return null===n.id?{}:this._client.getAllFeatureVariables(e,n.id,n.attributes)},e.prototype.getEnabledFeatures=function(e,t){var r=this.getUserContextWithOverrides(e,t);return null===r.id?[]:this._client.getEnabledFeatures(r.id,r.attributes)},e.prototype.getForcedVariation=function(e,t){var r=this.getUserContextWithOverrides(t);return null===r.id?null:this._client.getForcedVariation(e,r.id)},e.prototype.setForcedVariation=function(e,t,r){var n=null,o=null;if(2===arguments.length)o=t,n=this.getUserContextWithOverrides().id;else if(3===arguments.length){if(n=this.getUserContextWithOverrides(t).id,void 0===r)return!1;o=r}return null!==n&&this._client.setForcedVariation(e,n,o)},e.prototype.getOptimizelyConfig=function(){return this._client.getOptimizelyConfig()},e.prototype.close=function(){return this._client.close()},Object.defineProperty(e.prototype,"client",{get:function(){return this._client},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"notificationCenter",{get:function(){return this._client.notificationCenter},enumerable:!0,configurable:!0}),e.prototype.getUserContextWithOverrides=function(e,t){return{id:void 0===e?this.user.id:e,attributes:void 0===t?this.user.attributes:t}},e}();var A=i.getLogger("ReactSDK"),S={dispatchEvent:function(e,t){A.debug("Event not dispatched by disabled event dispatcher: %s",(function(){var t;try{t=JSON.stringify(e)}catch(r){t="error stringifying event"}return t}))}};Object.defineProperty(t,"enums",{enumerable:!0,get:function(){return s.enums}}),Object.defineProperty(t,"errorHandler",{enumerable:!0,get:function(){return s.errorHandler}}),Object.defineProperty(t,"eventDispatcher",{enumerable:!0,get:function(){return s.eventDispatcher}}),Object.defineProperty(t,"logging",{enumerable:!0,get:function(){return s.logging}}),Object.defineProperty(t,"setLogLevel",{enumerable:!0,get:function(){return s.setLogLevel}}),Object.defineProperty(t,"setLogger",{enumerable:!0,get:function(){return s.setLogger}}),t.OptimizelyContext=u,t.OptimizelyContextConsumer=c,t.OptimizelyContextProvider=f,t.OptimizelyExperiment=b,t.OptimizelyFeature=O,t.OptimizelyProvider=g,t.OptimizelyVariation=I,t.createInstance=function(e){return new R(e)},t.logOnlyEventDispatcher=S,t.useExperiment=_,t.useFeature=m,t.withOptimizely=function(e){var t=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return p(r,t),r.prototype.render=function(){var t=this.props,r=t.forwardedRef,n=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(t,["forwardedRef"]);return o.createElement(c,null,(function(t){return o.createElement(e,d({},n,{optimizelyReadyTimeout:t.timeout,optimizely:t.optimizely,isServerSide:t.isServerSide,ref:r}))}))},r}(o.Component);return function(e,t,r){var n=function(t,r){return o.createElement(e,d({},t,{forwardedRef:r}))};return n.displayName=r+"("+(t.displayName||t.name)+")",a(o.forwardRef(n),t)}(t,e,"withOptimizely")}},8678:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={withApollo:!0,wrapServerSideProps:!0,withChegg:!0,getClient:!0};Object.defineProperty(t,"withApollo",{enumerable:!0,get:function(){return o.withApollo}}),Object.defineProperty(t,"wrapServerSideProps",{enumerable:!0,get:function(){return o.wrapServerSideProps}}),Object.defineProperty(t,"withChegg",{enumerable:!0,get:function(){return i.withChegg}}),Object.defineProperty(t,"getClient",{enumerable:!0,get:function(){return a.getClient}}),t.default=void 0;var o=r(5502),i=r(13794),a=r(65145);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var s=r(16938);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}));var u=i.withChegg;t.default=u},5502:function(e,t,r){"use strict";r(31402),r(3128),r(52937),r(3659),r(53886),r(79416),r(30834),r(49405),r(77530),r(13958),r(81417),Object.defineProperty(t,"__esModule",{value:!0}),t.withApollo=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.displayName==p)return e;var r=function(t){return o.default.createElement(a.ApolloProvider,{client:(0,i.getClient)()},o.default.createElement(e,t))};r.displayName=p,t&&(r.getInitialProps=function(){var t=l(regeneratorRuntime.mark((function t(r){var n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.getInitialProps||d,r.req?(0,i._getClientWithCookies)(r.req.headers.cookie):(0,i.getClient)(),t.next=4,n(r);case 4:return o=t.sent,t.abrupt("return",u({},o));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());return r},t.wrapServerSideProps=function(e){return function(){var t=l(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(0,i._getClientWithCookies)(r.req.headers.cookie),t.abrupt("return",e(r));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},t.WITH_APOLLO_COMPONENT_NAME=void 0,r(35666);var n,o=(n=r(67294))&&n.__esModule?n:{default:n},i=r(65145),a=r(52663);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(c){return void r(c)}s.done?t(u):Promise.resolve(u).then(n,o)}function l(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){f(i,n,o,a,s,"next",e)}function s(e){f(i,n,o,a,s,"throw",e)}a(void 0)}))}}var p="WithApolloPageHelper";function d(){return Promise.resolve({})}t.WITH_APOLLO_COMPONENT_NAME=p},13794:function(e,t,r){"use strict";function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.withChegg=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.displayName==c)return e;var r=e;e.displayName!=a.WITH_APOLLO_COMPONENT_NAME&&(r=(0,a.withApollo)(e,t));var n=function(e){return(0,o.initRio)(),i.createElement(s.NextOptimizely,null,i.createElement(r,e))};return n.getInitialProps=e.getInitialProps,n.displayName=c,n},t.WITH_CHEGG_COMPONENT_NAME=void 0;var o=r(59024),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}r.default=e,t&&t.set(e,r);return r}(r(67294)),a=r(5502),s=r(16938);function u(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}var c="WithCheggPageHelper";t.WITH_CHEGG_COMPONENT_NAME=c},59024:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initRio=function(){return p.apply(this,arguments)},t.setRioConfig=function(e){f=e},t.reset=function(){l=!1,f=function(){var e=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},r(3632),r(35666);var n=r(10337),o=r(74178);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(c){return void r(c)}s.done?t(u):Promise.resolve(u).then(n,o)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){u(i,n,o,a,s,"next",e)}function s(e){u(i,n,o,a,s,"throw",e)}a(void 0)}))}}var f=function(){var e=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=!1;function p(){return(p=c(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,n.getConfig)("dev_mode")){e.next=2;break}return e.abrupt("return");case 2:if("addEventListener"in r.g){e.next=4;break}return e.abrupt("return");case 4:if(!l){e.next=6;break}return e.abrupt("return");case 6:return t=(0,n.getConfig)("rioConfig"),e.next=9,f();case 9:if(i=e.sent,t||i){e.next=12;break}return e.abrupt("return");case 12:if(!l){e.next=14;break}return e.abrupt("return");case 14:t.cheggUuid=d(),(0,o.getClient)().init(a(a({},t),i)),l=!0;case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){try{return JSON.parse(atob(document.cookie.split("; ").filter((function(e){return"id_token"===e.substr(0,8)}))[0].split(".")[1])).sub}catch(e){return}}},80322:function(e,t,r){r(13709),r(93866),r(2632),r(67560),r(97615),r(35041),r(28538),r(55672);var n=r(8861);e.exports=n.Promise},3632:function(e,t,r){var n=r(80322);r(3694),r(50059),r(79993),r(35911),e.exports=n},64747:function(e){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},89644:function(e,t,r){var n=r(73987);e.exports=function(e){if(!n(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},88570:function(e,t,r){var n=r(39550),o=r(59654),i=r(48574),a=n("unscopables"),s=Array.prototype;void 0==s[a]&&i.f(s,a,{configurable:!0,value:o(null)}),e.exports=function(e){s[a][e]=!0}},5509:function(e){e.exports=function(e,t,r){if(!(e instanceof t))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return e}},45352:function(e,t,r){var n=r(73987);e.exports=function(e){if(!n(e))throw TypeError(String(e)+" is not an object");return e}},44520:function(e,t,r){var n=r(2082),o=r(25354),i=r(41340),a=function(e){return function(t,r,a){var s,u=n(t),c=o(u.length),f=i(a,c);if(e&&r!=r){for(;c>f;)if((s=u[f++])!=s)return!0}else for(;c>f;f++)if((e||f in u)&&u[f]===r)return e||f||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},52253:function(e,t,r){var n=r(39550)("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[n]=function(){return this},Array.from(a,(function(){throw 2}))}catch(s){}e.exports=function(e,t){if(!t&&!o)return!1;var r=!1;try{var i={};i[n]=function(){return{next:function(){return{done:r=!0}}}},e(i)}catch(s){}return r}},44090:function(e){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},30140:function(e,t,r){var n=r(73781),o=r(44090),i=r(39550)("toStringTag"),a="Arguments"==o(function(){return arguments}());e.exports=n?o:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(r){}}(t=Object(e),i))?r:a?o(t):"Object"==(n=o(t))&&"function"==typeof t.callee?"Arguments":n}},54933:function(e,t,r){var n=r(3541),o=r(70384),i=r(38967),a=r(48574);e.exports=function(e,t){for(var r=o(t),s=a.f,u=i.f,c=0;c<r.length;c++){var f=r[c];n(e,f)||s(e,f,u(t,f))}}},97749:function(e,t,r){var n=r(26054);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},54876:function(e,t,r){"use strict";var n=r(68789).IteratorPrototype,o=r(59654),i=r(14104),a=r(37439),s=r(10119),u=function(){return this};e.exports=function(e,t,r){var c=t+" Iterator";return e.prototype=o(n,{next:i(1,r)}),a(e,c,!1,!0),s[c]=u,e}},9136:function(e,t,r){var n=r(62568),o=r(48574),i=r(14104);e.exports=n?function(e,t,r){return o.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},14104:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},40401:function(e,t,r){"use strict";var n=r(38666),o=r(54876),i=r(31893),a=r(98592),s=r(37439),u=r(9136),c=r(94681),f=r(39550),l=r(80974),p=r(10119),d=r(68789),v=d.IteratorPrototype,h=d.BUGGY_SAFARI_ITERATORS,g=f("iterator"),y="keys",E="values",_="entries",m=function(){return this};e.exports=function(e,t,r,f,d,O,b){o(r,t,f);var I,T,R,A=function(e){if(e===d&&C)return C;if(!h&&e in w)return w[e];switch(e){case y:case E:case _:return function(){return new r(this,e)}}return function(){return new r(this)}},S=t+" Iterator",N=!1,w=e.prototype,P=w[g]||w["@@iterator"]||d&&w[d],C=!h&&P||A(d),L="Array"==t&&w.entries||P;if(L&&(I=i(L.call(new e)),v!==Object.prototype&&I.next&&(l||i(I)===v||(a?a(I,v):"function"!=typeof I[g]&&u(I,g,m)),s(I,S,!0,!0),l&&(p[S]=m))),d==E&&P&&P.name!==E&&(N=!0,C=function(){return P.call(this)}),l&&!b||w[g]===C||u(w,g,C),p[t]=C,d)if(T={values:A(E),keys:O?C:A(y),entries:A(_)},b)for(R in T)(h||N||!(R in w))&&c(w,R,T[R]);else n({target:t,proto:!0,forced:h||N},T);return T}},62568:function(e,t,r){var n=r(26054);e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},29539:function(e,t,r){var n=r(74430),o=r(73987),i=n.document,a=o(i)&&o(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},15244:function(e){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},18235:function(e){e.exports="object"==typeof window},3686:function(e,t,r){var n=r(41275);e.exports=/(?:iphone|ipod|ipad).*applewebkit/i.test(n)},49442:function(e,t,r){var n=r(44090),o=r(74430);e.exports="process"==n(o.process)},98700:function(e,t,r){var n=r(41275);e.exports=/web0s(?!.*chrome)/i.test(n)},41275:function(e,t,r){var n=r(14693);e.exports=n("navigator","userAgent")||""},49311:function(e,t,r){var n,o,i=r(74430),a=r(41275),s=i.process,u=s&&s.versions,c=u&&u.v8;c?o=(n=c.split("."))[0]<4?1:n[0]+n[1]:a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(o=n[1]),e.exports=o&&+o},47223:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},38666:function(e,t,r){var n=r(74430),o=r(38967).f,i=r(9136),a=r(94681),s=r(96021),u=r(54933),c=r(72338);e.exports=function(e,t){var r,f,l,p,d,v=e.target,h=e.global,g=e.stat;if(r=h?n:g?n[v]||s(v,{}):(n[v]||{}).prototype)for(f in t){if(p=t[f],l=e.noTargetGet?(d=o(r,f))&&d.value:r[f],!c(h?f:v+(g?".":"#")+f,e.forced)&&void 0!==l){if(typeof p===typeof l)continue;u(p,l)}(e.sham||l&&l.sham)&&i(p,"sham",!0),a(r,f,p,e)}}},26054:function(e){e.exports=function(e){try{return!!e()}catch(t){return!0}}},4:function(e,t,r){var n=r(64747);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},14693:function(e,t,r){var n=r(8861),o=r(74430),i=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?i(n[e])||i(o[e]):n[e]&&n[e][t]||o[e]&&o[e][t]}},15050:function(e,t,r){var n=r(30140),o=r(10119),i=r(39550)("iterator");e.exports=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[n(e)]}},74430:function(e,t,r){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||Function("return this")()},3541:function(e,t,r){var n=r(67792),o={}.hasOwnProperty;e.exports=Object.hasOwn||function(e,t){return o.call(n(e),t)}},18653:function(e){e.exports={}},79374:function(e,t,r){var n=r(74430);e.exports=function(e,t){var r=n.console;r&&r.error&&(1===arguments.length?r.error(e):r.error(e,t))}},50935:function(e,t,r){var n=r(14693);e.exports=n("document","documentElement")},73477:function(e,t,r){var n=r(62568),o=r(26054),i=r(29539);e.exports=!n&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},67173:function(e,t,r){var n=r(26054),o=r(44090),i="".split;e.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?i.call(e,""):Object(e)}:Object},84086:function(e,t,r){var n=r(25217),o=Function.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=function(e){return o.call(e)}),e.exports=n.inspectSource},59762:function(e,t,r){var n,o,i,a=r(28932),s=r(74430),u=r(73987),c=r(9136),f=r(3541),l=r(25217),p=r(8664),d=r(18653),v="Object already initialized",h=s.WeakMap;if(a||l.state){var g=l.state||(l.state=new h),y=g.get,E=g.has,_=g.set;n=function(e,t){if(E.call(g,e))throw new TypeError(v);return t.facade=e,_.call(g,e,t),t},o=function(e){return y.call(g,e)||{}},i=function(e){return E.call(g,e)}}else{var m=p("state");d[m]=!0,n=function(e,t){if(f(e,m))throw new TypeError(v);return t.facade=e,c(e,m,t),t},o=function(e){return f(e,m)?e[m]:{}},i=function(e){return f(e,m)}}e.exports={set:n,get:o,has:i,enforce:function(e){return i(e)?o(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!u(t)||(r=o(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}}}},97894:function(e,t,r){var n=r(39550),o=r(10119),i=n("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||a[i]===e)}},72338:function(e,t,r){var n=r(26054),o=/#|\.prototype\./,i=function(e,t){var r=s[a(e)];return r==c||r!=u&&("function"==typeof t?n(t):!!t)},a=i.normalize=function(e){return String(e).replace(o,".").toLowerCase()},s=i.data={},u=i.NATIVE="N",c=i.POLYFILL="P";e.exports=i},73987:function(e){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},80974:function(e){e.exports=!1},52897:function(e,t,r){var n=r(45352),o=r(97894),i=r(25354),a=r(4),s=r(15050),u=r(57908),c=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,r){var f,l,p,d,v,h,g,y=r&&r.that,E=!(!r||!r.AS_ENTRIES),_=!(!r||!r.IS_ITERATOR),m=!(!r||!r.INTERRUPTED),O=a(t,y,1+E+m),b=function(e){return f&&u(f),new c(!0,e)},I=function(e){return E?(n(e),m?O(e[0],e[1],b):O(e[0],e[1])):m?O(e,b):O(e)};if(_)f=e;else{if("function"!=typeof(l=s(e)))throw TypeError("Target is not iterable");if(o(l)){for(p=0,d=i(e.length);d>p;p++)if((v=I(e[p]))&&v instanceof c)return v;return new c(!1)}f=l.call(e)}for(h=f.next;!(g=h.call(f)).done;){try{v=I(g.value)}catch(T){throw u(f),T}if("object"==typeof v&&v&&v instanceof c)return v}return new c(!1)}},57908:function(e,t,r){var n=r(45352);e.exports=function(e){var t=e.return;if(void 0!==t)return n(t.call(e)).value}},68789:function(e,t,r){"use strict";var n,o,i,a=r(26054),s=r(31893),u=r(9136),c=r(3541),f=r(39550),l=r(80974),p=f("iterator"),d=!1;[].keys&&("next"in(i=[].keys())?(o=s(s(i)))!==Object.prototype&&(n=o):d=!0);var v=void 0==n||a((function(){var e={};return n[p].call(e)!==e}));v&&(n={}),l&&!v||c(n,p)||u(n,p,(function(){return this})),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:d}},10119:function(e){e.exports={}},61316:function(e,t,r){var n,o,i,a,s,u,c,f,l=r(74430),p=r(38967).f,d=r(82774).set,v=r(3686),h=r(98700),g=r(49442),y=l.MutationObserver||l.WebKitMutationObserver,E=l.document,_=l.process,m=l.Promise,O=p(l,"queueMicrotask"),b=O&&O.value;b||(n=function(){var e,t;for(g&&(e=_.domain)&&e.exit();o;){t=o.fn,o=o.next;try{t()}catch(r){throw o?a():i=void 0,r}}i=void 0,e&&e.enter()},v||g||h||!y||!E?m&&m.resolve?((c=m.resolve(void 0)).constructor=m,f=c.then,a=function(){f.call(c,n)}):a=g?function(){_.nextTick(n)}:function(){d.call(l,n)}:(s=!0,u=E.createTextNode(""),new y(n).observe(u,{characterData:!0}),a=function(){u.data=s=!s})),e.exports=b||function(e){var t={fn:e,next:void 0};i&&(i.next=t),o||(o=t,a()),i=t}},88261:function(e,t,r){var n=r(74430);e.exports=n.Promise},21614:function(e,t,r){var n=r(49311),o=r(26054);e.exports=!!Object.getOwnPropertySymbols&&!o((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},28932:function(e,t,r){var n=r(74430),o=r(84086),i=n.WeakMap;e.exports="function"===typeof i&&/native code/.test(o(i))},11782:function(e,t,r){"use strict";var n=r(64747),o=function(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n})),this.resolve=n(t),this.reject=n(r)};e.exports.f=function(e){return new o(e)}},59654:function(e,t,r){var n,o=r(45352),i=r(88962),a=r(47223),s=r(18653),u=r(50935),c=r(29539),f=r(8664),l=f("IE_PROTO"),p=function(){},d=function(e){return"<script>"+e+"</"+"script>"},v=function(){try{n=document.domain&&new ActiveXObject("htmlfile")}catch(t){}v=n?function(e){e.write(d("")),e.close();var t=e.parentWindow.Object;return e=null,t}(n):function(){var e,t=c("iframe");return t.style.display="none",u.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(d("document.F=Object")),e.close(),e.F}();for(var e=a.length;e--;)delete v.prototype[a[e]];return v()};s[l]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(p.prototype=o(e),r=new p,p.prototype=null,r[l]=e):r=v(),void 0===t?r:i(r,t)}},88962:function(e,t,r){var n=r(62568),o=r(48574),i=r(45352),a=r(87186);e.exports=n?Object.defineProperties:function(e,t){i(e);for(var r,n=a(t),s=n.length,u=0;s>u;)o.f(e,r=n[u++],t[r]);return e}},48574:function(e,t,r){var n=r(62568),o=r(73477),i=r(45352),a=r(13110),s=Object.defineProperty;t.f=n?s:function(e,t,r){if(i(e),t=a(t,!0),i(r),o)try{return s(e,t,r)}catch(n){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},38967:function(e,t,r){var n=r(62568),o=r(28993),i=r(14104),a=r(2082),s=r(13110),u=r(3541),c=r(73477),f=Object.getOwnPropertyDescriptor;t.f=n?f:function(e,t){if(e=a(e),t=s(t,!0),c)try{return f(e,t)}catch(r){}if(u(e,t))return i(!o.f.call(e,t),e[t])}},3031:function(e,t,r){var n=r(21921),o=r(47223).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},58422:function(e,t){t.f=Object.getOwnPropertySymbols},31893:function(e,t,r){var n=r(3541),o=r(67792),i=r(8664),a=r(97749),s=i("IE_PROTO"),u=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=o(e),n(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?u:null}},21921:function(e,t,r){var n=r(3541),o=r(2082),i=r(44520).indexOf,a=r(18653);e.exports=function(e,t){var r,s=o(e),u=0,c=[];for(r in s)!n(a,r)&&n(s,r)&&c.push(r);for(;t.length>u;)n(s,r=t[u++])&&(~i(c,r)||c.push(r));return c}},87186:function(e,t,r){var n=r(21921),o=r(47223);e.exports=Object.keys||function(e){return n(e,o)}},28993:function(e,t){"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&&!r.call({1:2},1);t.f=o?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},98592:function(e,t,r){var n=r(45352),o=r(89644);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),t=r instanceof Array}catch(i){}return function(r,i){return n(r),o(i),t?e.call(r,i):r.__proto__=i,r}}():void 0)},68659:function(e,t,r){"use strict";var n=r(73781),o=r(30140);e.exports=n?{}.toString:function(){return"[object "+o(this)+"]"}},70384:function(e,t,r){var n=r(14693),o=r(3031),i=r(58422),a=r(45352);e.exports=n("Reflect","ownKeys")||function(e){var t=o.f(a(e)),r=i.f;return r?t.concat(r(e)):t}},8861:function(e,t,r){var n=r(74430);e.exports=n},36957:function(e){e.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},60839:function(e,t,r){var n=r(45352),o=r(73987),i=r(11782);e.exports=function(e,t){if(n(e),o(t)&&t.constructor===e)return t;var r=i.f(e);return(0,r.resolve)(t),r.promise}},47938:function(e,t,r){var n=r(94681);e.exports=function(e,t,r){for(var o in t)n(e,o,t[o],r);return e}},94681:function(e,t,r){var n=r(74430),o=r(9136),i=r(3541),a=r(96021),s=r(84086),u=r(59762),c=u.get,f=u.enforce,l=String(String).split("String");(e.exports=function(e,t,r,s){var u,c=!!s&&!!s.unsafe,p=!!s&&!!s.enumerable,d=!!s&&!!s.noTargetGet;"function"==typeof r&&("string"!=typeof t||i(r,"name")||o(r,"name",t),(u=f(r)).source||(u.source=l.join("string"==typeof t?t:""))),e!==n?(c?!d&&e[t]&&(p=!0):delete e[t],p?e[t]=r:o(e,t,r)):p?e[t]=r:a(t,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||s(this)}))},98579:function(e){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on "+e);return e}},96021:function(e,t,r){var n=r(74430),o=r(9136);e.exports=function(e,t){try{o(n,e,t)}catch(r){n[e]=t}return t}},39125:function(e,t,r){"use strict";var n=r(14693),o=r(48574),i=r(39550),a=r(62568),s=i("species");e.exports=function(e){var t=n(e),r=o.f;a&&t&&!t[s]&&r(t,s,{configurable:!0,get:function(){return this}})}},37439:function(e,t,r){var n=r(48574).f,o=r(3541),i=r(39550)("toStringTag");e.exports=function(e,t,r){e&&!o(e=r?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},8664:function(e,t,r){var n=r(35159),o=r(62820),i=n("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},25217:function(e,t,r){var n=r(74430),o=r(96021),i="__core-js_shared__",a=n[i]||o(i,{});e.exports=a},35159:function(e,t,r){var n=r(80974),o=r(25217);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.15.2",mode:n?"pure":"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})},50787:function(e,t,r){var n=r(45352),o=r(64747),i=r(39550)("species");e.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||void 0==(r=n(a)[i])?t:o(r)}},50287:function(e,t,r){var n=r(96692),o=r(98579),i=function(e){return function(t,r){var i,a,s=String(o(t)),u=n(r),c=s.length;return u<0||u>=c?e?"":void 0:(i=s.charCodeAt(u))<55296||i>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):i:e?s.slice(u,u+2):a-56320+(i-55296<<10)+65536}};e.exports={codeAt:i(!1),charAt:i(!0)}},82774:function(e,t,r){var n,o,i,a=r(74430),s=r(26054),u=r(4),c=r(50935),f=r(29539),l=r(3686),p=r(49442),d=a.location,v=a.setImmediate,h=a.clearImmediate,g=a.process,y=a.MessageChannel,E=a.Dispatch,_=0,m={},O="onreadystatechange",b=function(e){if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},I=function(e){return function(){b(e)}},T=function(e){b(e.data)},R=function(e){a.postMessage(e+"",d.protocol+"//"+d.host)};v&&h||(v=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return m[++_]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},n(_),_},h=function(e){delete m[e]},p?n=function(e){g.nextTick(I(e))}:E&&E.now?n=function(e){E.now(I(e))}:y&&!l?(i=(o=new y).port2,o.port1.onmessage=T,n=u(i.postMessage,i,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts&&d&&"file:"!==d.protocol&&!s(R)?(n=R,a.addEventListener("message",T,!1)):n=O in f("script")?function(e){c.appendChild(f("script")).onreadystatechange=function(){c.removeChild(this),b(e)}}:function(e){setTimeout(I(e),0)}),e.exports={set:v,clear:h}},41340:function(e,t,r){var n=r(96692),o=Math.max,i=Math.min;e.exports=function(e,t){var r=n(e);return r<0?o(r+t,0):i(r,t)}},2082:function(e,t,r){var n=r(67173),o=r(98579);e.exports=function(e){return n(o(e))}},96692:function(e){var t=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:t)(e)}},25354:function(e,t,r){var n=r(96692),o=Math.min;e.exports=function(e){return e>0?o(n(e),9007199254740991):0}},67792:function(e,t,r){var n=r(98579);e.exports=function(e){return Object(n(e))}},13110:function(e,t,r){var n=r(73987);e.exports=function(e,t){if(!n(e))return e;var r,o;if(t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;if("function"==typeof(r=e.valueOf)&&!n(o=r.call(e)))return o;if(!t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},73781:function(e,t,r){var n={};n[r(39550)("toStringTag")]="z",e.exports="[object z]"===String(n)},62820:function(e){var t=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+r).toString(36)}},36751:function(e,t,r){var n=r(21614);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},39550:function(e,t,r){var n=r(74430),o=r(35159),i=r(3541),a=r(62820),s=r(21614),u=r(36751),c=o("wks"),f=n.Symbol,l=u?f:f&&f.withoutSetter||a;e.exports=function(e){return i(c,e)&&(s||"string"==typeof c[e])||(s&&i(f,e)?c[e]=f[e]:c[e]=l("Symbol."+e)),c[e]}},13709:function(e,t,r){"use strict";var n=r(38666),o=r(31893),i=r(98592),a=r(59654),s=r(9136),u=r(14104),c=r(52897),f=function(e,t){var r=this;if(!(r instanceof f))return new f(e,t);i&&(r=i(new Error(void 0),o(r))),void 0!==t&&s(r,"message",String(t));var n=[];return c(e,n.push,{that:n}),s(r,"errors",n),r};f.prototype=a(Error.prototype,{constructor:u(5,f),message:u(5,""),name:u(5,"AggregateError")}),n({global:!0},{AggregateError:f})},15542:function(e,t,r){"use strict";var n=r(2082),o=r(88570),i=r(10119),a=r(59762),s=r(40401),u="Array Iterator",c=a.set,f=a.getterFor(u);e.exports=s(Array,"Array",(function(e,t){c(this,{type:u,target:n(e),index:0,kind:t})}),(function(){var e=f(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},93866:function(e,t,r){var n=r(73781),o=r(94681),i=r(68659);n||o(Object.prototype,"toString",i,{unsafe:!0})},67560:function(e,t,r){"use strict";var n=r(38666),o=r(64747),i=r(11782),a=r(36957),s=r(52897);n({target:"Promise",stat:!0},{allSettled:function(e){var t=this,r=i.f(t),n=r.resolve,u=r.reject,c=a((function(){var r=o(t.resolve),i=[],a=0,u=1;s(e,(function(e){var o=a++,s=!1;i.push(void 0),u++,r.call(t,e).then((function(e){s||(s=!0,i[o]={status:"fulfilled",value:e},--u||n(i))}),(function(e){s||(s=!0,i[o]={status:"rejected",reason:e},--u||n(i))}))})),--u||n(i)}));return c.error&&u(c.value),r.promise}})},97615:function(e,t,r){"use strict";var n=r(38666),o=r(64747),i=r(14693),a=r(11782),s=r(36957),u=r(52897),c="No one promise resolved";n({target:"Promise",stat:!0},{any:function(e){var t=this,r=a.f(t),n=r.resolve,f=r.reject,l=s((function(){var r=o(t.resolve),a=[],s=0,l=1,p=!1;u(e,(function(e){var o=s++,u=!1;a.push(void 0),l++,r.call(t,e).then((function(e){u||p||(p=!0,n(e))}),(function(e){u||p||(u=!0,a[o]=e,--l||f(new(i("AggregateError"))(a,c)))}))})),--l||f(new(i("AggregateError"))(a,c))}));return l.error&&f(l.value),r.promise}})},35041:function(e,t,r){"use strict";var n=r(38666),o=r(80974),i=r(88261),a=r(26054),s=r(14693),u=r(50787),c=r(60839),f=r(94681);if(n({target:"Promise",proto:!0,real:!0,forced:!!i&&a((function(){i.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=u(this,s("Promise")),r="function"==typeof e;return this.then(r?function(r){return c(t,e()).then((function(){return r}))}:e,r?function(r){return c(t,e()).then((function(){throw r}))}:e)}}),!o&&"function"==typeof i){var l=s("Promise").prototype.finally;i.prototype.finally!==l&&f(i.prototype,"finally",l,{unsafe:!0})}},2632:function(e,t,r){"use strict";var n,o,i,a,s=r(38666),u=r(80974),c=r(74430),f=r(14693),l=r(88261),p=r(94681),d=r(47938),v=r(98592),h=r(37439),g=r(39125),y=r(73987),E=r(64747),_=r(5509),m=r(84086),O=r(52897),b=r(52253),I=r(50787),T=r(82774).set,R=r(61316),A=r(60839),S=r(79374),N=r(11782),w=r(36957),P=r(59762),C=r(72338),L=r(39550),x=r(18235),U=r(49442),D=r(49311),j=L("species"),M="Promise",V=P.get,k=P.set,F=P.getterFor(M),B=l&&l.prototype,G=l,K=B,H=c.TypeError,W=c.document,z=c.process,Y=N.f,q=Y,J=!!(W&&W.createEvent&&c.dispatchEvent),X="function"==typeof PromiseRejectionEvent,Z="unhandledrejection",Q=!1,$=C(M,(function(){var e=m(G),t=e!==String(G);if(!t&&66===D)return!0;if(u&&!K.finally)return!0;if(D>=51&&/native code/.test(e))return!1;var r=new G((function(e){e(1)})),n=function(e){e((function(){}),(function(){}))};return(r.constructor={})[j]=n,!(Q=r.then((function(){}))instanceof n)||!t&&x&&!X})),ee=$||!b((function(e){G.all(e).catch((function(){}))})),te=function(e){var t;return!(!y(e)||"function"!=typeof(t=e.then))&&t},re=function(e,t){if(!e.notified){e.notified=!0;var r=e.reactions;R((function(){for(var n=e.value,o=1==e.state,i=0;r.length>i;){var a,s,u,c=r[i++],f=o?c.ok:c.fail,l=c.resolve,p=c.reject,d=c.domain;try{f?(o||(2===e.rejection&&ae(e),e.rejection=1),!0===f?a=n:(d&&d.enter(),a=f(n),d&&(d.exit(),u=!0)),a===c.promise?p(H("Promise-chain cycle")):(s=te(a))?s.call(a,l,p):l(a)):p(n)}catch(v){d&&!u&&d.exit(),p(v)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&oe(e)}))}},ne=function(e,t,r){var n,o;J?((n=W.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),c.dispatchEvent(n)):n={promise:t,reason:r},!X&&(o=c["on"+e])?o(n):e===Z&&S("Unhandled promise rejection",r)},oe=function(e){T.call(c,(function(){var t,r=e.facade,n=e.value;if(ie(e)&&(t=w((function(){U?z.emit("unhandledRejection",n,r):ne(Z,r,n)})),e.rejection=U||ie(e)?2:1,t.error))throw t.value}))},ie=function(e){return 1!==e.rejection&&!e.parent},ae=function(e){T.call(c,(function(){var t=e.facade;U?z.emit("rejectionHandled",t):ne("rejectionhandled",t,e.value)}))},se=function(e,t,r){return function(n){e(t,n,r)}},ue=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=2,re(e,!0))},ce=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw H("Promise can't be resolved itself");var n=te(t);n?R((function(){var r={done:!1};try{n.call(t,se(ce,r,e),se(ue,r,e))}catch(o){ue(r,o,e)}})):(e.value=t,e.state=1,re(e,!1))}catch(o){ue({done:!1},o,e)}}};if($&&(K=(G=function(e){_(this,G,M),E(e),n.call(this);var t=V(this);try{e(se(ce,t),se(ue,t))}catch(r){ue(t,r)}}).prototype,(n=function(e){k(this,{type:M,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=d(K,{then:function(e,t){var r=F(this),n=Y(I(this,G));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=U?z.domain:void 0,r.parent=!0,r.reactions.push(n),0!=r.state&&re(r,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new n,t=V(e);this.promise=e,this.resolve=se(ce,t),this.reject=se(ue,t)},N.f=Y=function(e){return e===G||e===i?new o(e):q(e)},!u&&"function"==typeof l&&B!==Object.prototype)){a=B.then,Q||(p(B,"then",(function(e,t){var r=this;return new G((function(e,t){a.call(r,e,t)})).then(e,t)}),{unsafe:!0}),p(B,"catch",K.catch,{unsafe:!0}));try{delete B.constructor}catch(fe){}v&&v(B,K)}s({global:!0,wrap:!0,forced:$},{Promise:G}),h(G,M,!1,!0),g(M),i=f(M),s({target:M,stat:!0,forced:$},{reject:function(e){var t=Y(this);return t.reject.call(void 0,e),t.promise}}),s({target:M,stat:!0,forced:u||$},{resolve:function(e){return A(u&&this===i?G:this,e)}}),s({target:M,stat:!0,forced:ee},{all:function(e){var t=this,r=Y(t),n=r.resolve,o=r.reject,i=w((function(){var r=E(t.resolve),i=[],a=0,s=1;O(e,(function(e){var u=a++,c=!1;i.push(void 0),s++,r.call(t,e).then((function(e){c||(c=!0,i[u]=e,--s||n(i))}),o)})),--s||n(i)}));return i.error&&o(i.value),r.promise},race:function(e){var t=this,r=Y(t),n=r.reject,o=w((function(){var o=E(t.resolve);O(e,(function(e){o.call(t,e).then(r.resolve,n)}))}));return o.error&&n(o.value),r.promise}})},28538:function(e,t,r){"use strict";var n=r(50287).charAt,o=r(59762),i=r(40401),a="String Iterator",s=o.set,u=o.getterFor(a);i(String,"String",(function(e){s(this,{type:a,string:String(e),index:0})}),(function(){var e,t=u(this),r=t.string,o=t.index;return o>=r.length?{value:void 0,done:!0}:(e=n(r,o),t.index+=e.length,{value:e,done:!1})}))},3694:function(e,t,r){r(13709)},50059:function(e,t,r){r(67560)},35911:function(e,t,r){r(97615)},79993:function(e,t,r){"use strict";var n=r(38666),o=r(11782),i=r(36957);n({target:"Promise",stat:!0},{try:function(e){var t=o.f(this),r=i(e);return(r.error?t.reject:t.resolve)(r.value),t.promise}})},55672:function(e,t,r){var n=r(74430),o=r(15244),i=r(15542),a=r(9136),s=r(39550),u=s("iterator"),c=s("toStringTag"),f=i.values;for(var l in o){var p=n[l],d=p&&p.prototype;if(d){if(d[u]!==f)try{a(d,u,f)}catch(h){d[u]=f}if(d[c]||a(d,c,l),o[l])for(var v in i)if(d[v]!==i[v])try{a(d,v,i[v])}catch(h){d[v]=i[v]}}}},80129:function(){},28898:function(e,t,r){"use strict";var n=r(20862),o=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.mapEventsToUrls=void 0;var i=o(r(87757)),a=o(r(48926)),s=o(r(34575)),u=o(r(59713)),c=n(r(9966)),f=r(52306),l=o(r(36145)),p=r(57505),d=r(74185),v=r(3100),h=function(e){return e.reduce((function(e,t){var r=t.options.endpoint||"default",n=e[r]||[];return n.push(t.payload),e[r]=n,e}),{})};t.mapEventsToUrls=h;var g=function e(t){var r=this;(0,s.default)(this,e),(0,u.default)(this,"cheggIdManager",new d.CheggIdManager),(0,u.default)(this,"_eventCache",void 0),(0,u.default)(this,"_runningTimeout",void 0),(0,u.default)(this,"_countdownPromise",void 0),(0,u.default)(this,"client",void 0),(0,u.default)(this,"_readAndEmptyCache",(function(){return r._eventCache.splice(0,r._eventCache.length)})),(0,u.default)(this,"queueEvent",function(){var e=(0,a.default)(i.default.mark((function e(t,n){var o,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.force,delete n.force,r._eventCache.push({payload:t,options:n}),e.prev=3,a=o?r.flushCachedEvents():r.startCountdown(),e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(3),l.default.error(e.t0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t,r){return e.apply(this,arguments)}}()),(0,u.default)(this,"startCountdown",(function(){(0,v.noWindow)()||(r._countdownPromise=r._countdownPromise||new Promise((function(e,t){r._runningTimeout=window.setTimeout((function(){r.sendCachedEvents().then(e).catch(t)}),r.client.batchInterval)})),r._countdownPromise)})),(0,u.default)(this,"resetCountdown",(function(){r._runningTimeout&&clearTimeout(r._runningTimeout),r._runningTimeout=void 0,r._countdownPromise=void 0})),(0,u.default)(this,"flushCachedEvents",(0,a.default)(i.default.mark((function e(){var t,n,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r._readAndEmptyCache(),n=[],t.length&&(o=h(t),n=Object.keys(o).map(function(){var e=(0,a.default)(i.default.mark((function e(t){var n,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o[t],e.next=3,(0,p.enrichEventsWithAdobeData)(n);case 3:return n=e.sent,e.next=6,r.cheggIdManager.enrichEventsWithCheggIds(n);case 6:return n=e.sent,a="default"===t?r.client.endpoint:t,e.next=10,(0,c.sendImmediateRequest)({url:a,data:n});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),e.next=5,Promise.all(n);case 5:case"end":return e.stop()}}),e)})))),(0,u.default)(this,"sendCachedEvents",(0,a.default)(i.default.mark((function e(){var t,n,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.resetCountdown(),t=r._readAndEmptyCache(),n=[],t.length&&(o=h(t),n=Object.keys(o).map(function(){var e=(0,a.default)(i.default.mark((function e(t){var n,a;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o[t],e.next=3,(0,p.enrichEventsWithAdobeData)(n);case 3:return n=e.sent,e.next=6,r.cheggIdManager.enrichEventsWithCheggIds(n);case 6:return n=e.sent,a="default"===t?r.client.endpoint:t,e.abrupt("return",(0,c.default)({url:a,data:n,retries:f.DATA_REQUEST_RETRIES}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),e.abrupt("return",Promise.all(n));case 5:case"end":return e.stop()}}),e)})))),this._eventCache=[],this.client=t};t.default=g},44468:function(e,t,r){"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.EventContentCache=void 0;var o=n(r(34575)),i=n(r(59713)),a=function e(){var t=this;(0,o.default)(this,e),(0,i.default)(this,"_cachedContent",void 0),(0,i.default)(this,"clear",(function(){delete t._cachedContent})),(0,i.default)(this,"read",(function(){return t._cachedContent})),(0,i.default)(this,"write",(function(e){t._cachedContent=e})),(0,i.default)(this,"shouldEnrichEventWithCachedContent",(function(e){var r=e.type.includes("clickstream"),n=t._cachedContent,o=!e.data.content;return Boolean(r&&n&&o)})),(0,i.default)(this,"enrichEventData",(function(e){return e.content=t._cachedContent,e}))};t.EventContentCache=a;var s=a;t.default=s},81894:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(3100),o=r(52306),i=function(e){var t;return(0,n.noWindow)()||(window._rswClients&&(t=window._rswClients[e||o.DEFAULT_NAMESPACE]),t||(t=function(e){var t,r=(0,n.getCommandKey)(e);return window[r]=window[r]||[],window[r].push((function(e){t=e})),t}(e))),t};t.default=i},16563:function(e,t,r){"use strict";var n=r(20862),o=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(r(34575)),a=o(r(93913)),s=o(r(59713)),u=n(r(42739)),c=r(38472),f=o(r(20884)),l=o(r(45651)),p=o(r(57505)),d=o(r(12828)),v=o(r(28898)),h=r(52306),g=r(3100),y=r(92732),E=r(59360),_=o(r(36145)),m=o(r(44468)),O=o(r(48865)),b=function(){function e(){var t=this;(0,i.default)(this,e),(0,s.default)(this,"_eventCache",void 0),(0,s.default)(this,"_runningTimeout",void 0),(0,s.default)(this,"_countdownPromise",void 0),(0,s.default)(this,"_readAndEmptyCache",void 0),(0,s.default)(this,"stateManager",void 0),(0,s.default)(this,"batcher",void 0),(0,s.default)(this,"isInit",void 0),(0,s.default)(this,"endpoint",void 0),(0,s.default)(this,"eventGate",void 0),(0,s.default)(this,"batchInterval",void 0),(0,s.default)(this,"eventContentCache",void 0),(0,s.default)(this,"viewPreviousCache",void 0),(0,s.default)(this,"cachedViewPrevious",void 0),(0,s.default)(this,"_sendDoubleInitError",(function(e){var r=JSON.stringify({originalState:t.stateManager.get(),newState:e}),n="init is called twice: ".concat(r);_.default.error(new Error(n))})),(0,s.default)(this,"getAdobeData",u.getAdobeData),(0,s.default)(this,"structureData",(function(e){return(0,p.default)(t,e)})),(0,s.default)(this,"updateState",(function(e){return t.stateManager.update(e)})),(0,s.default)(this,"init",(function(e){var r=e.endpoint,n=e.batchInterval,o=e.useLocalPort,i=e.errorHandler,a=e.analyticsAgent,s=e.appId,c=e.appVer,f=e.authState,l=e.cheggUuid,p=e.clientExperiments,d=e.experiments,v=e.clientIpAddress,m=e.referralUrl,O=e.testCells,b=void 0===O?[]:O,I=e.url,T=e.subscriptions,R=e.uvn,A=e.view,S=e.dfid,N=e.userAgent,w=e.property;t.isInit&&(t._sendDoubleInitError(e),t.reset()),(0,E.init)(i),u.init().catch(_.default.error);var P=o?(0,g.getLocalPortFromParam)(o):(0,g.getLocalPortFromUrl)();t.endpoint=P?"http://localhost:".concat(P):r,t.batchInterval=n||h.DEFAULT_BATCH_INTERVAL;var C=(0,g.getUserAgent)(N),L=(0,y.get)(C),x={appId:s,analyticsAgent:a,userAgent:C,url:I,referralUrl:m,rswVersion:"9.6.19",browserName:L.browserName,browserVersion:L.browserVersion,authState:f,cheggUuid:l,clientIpAddress:v,testCells:b,osName:L.osName,osVersion:L.osVersion,platform:L.platform,property:w,appVer:c,clientExperiments:p,experiments:d,uvn:R,view:A,dfid:S,subscriptions:T,viewPrevious:t.cachedViewPrevious};t.stateManager.init(x),t.eventGate.allowSends(),t.eventGate.queuePreloadEvents(),t.batcher.startCountdown(),t.isInit=!0})),(0,s.default)(this,"reset",(function(){t.stateManager.reset(),t.eventGate.blockSends(),t.isInit=!1})),(0,s.default)(this,"sendEvent",(function(e){return(0,c.sendEvent)(t,e)})),(0,s.default)(this,"event",(function(e,r){return(0,l.default)(t,e,r)})),(0,s.default)(this,"_nakedEvent",(function(e,r){return(0,c.nakedEvent)(t,e,r)})),(0,s.default)(this,"writeEventContentCache",(function(e){t.eventContentCache.write(e)})),(0,s.default)(this,"readEventContentCache",(function(){return t.eventContentCache.read()})),(0,s.default)(this,"clearEventContentCache",(function(){t.eventContentCache.clear()})),this.viewPreviousCache=new O.default,this.cachedViewPrevious=this.viewPreviousCache.get(),this.stateManager=new d.default(this),this.eventContentCache=new m.default,this.batcher=new v.default(this),this.eventGate=new f.default(this),(0,g.noWindow)()||this._startInitTimer()}return(0,a.default)(e,[{key:"_startInitTimer",value:function(){var e=this;setTimeout((function(){e.isInit||_.default.warn("Init was not called on client within 7000ms of being created")}),h.INIT_TIMEOUT_THRESHOLD)}}]),e}();t.default=b},12828:function(e,t,r){"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(34575)),i=n(r(59713)),a=r(76378),s=n(r(13082));function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var c=r(9996),f=function e(t){var r=this;(0,o.default)(this,e),(0,i.default)(this,"_state",void 0),(0,i.default)(this,"_client",void 0),(0,i.default)(this,"update",(function(e){r._state.view&&e.view&&!(0,a.deepEquals)(e.view,r._state.view)&&(r._state=c(r._state,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({viewPrevious:r._state.view},e),{arrayMerge:function(e,t){return(0,s.default)(e,t)}})),r._state=c(r._state,e,{arrayMerge:function(e,t){return(0,s.default)(e,t)}}),e.view&&r._client.viewPreviousCache.update(r._state.view)})),(0,i.default)(this,"init",this.update),(0,i.default)(this,"get",(function(){return c({},r._state)})),(0,i.default)(this,"reset",(function(){r._state={}})),this._state={},this._client=t};t.default=f},57505:function(e,t,r){"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.structureTestCells=t.enrichEventsWithAdobeData=t.addAdobeData=void 0;var o=n(r(63038)),i=n(r(50008)),a=n(r(87757)),s=n(r(48926)),u=n(r(59713)),c=n(r(4593)),f=r(42739),l=r(52306),p=r(33389),d=r(56304),v=r(40207);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y=function(e,t){var r=t.mcid,n=g(g({},e.extensions.client_common),{},{adobe_mcid:r});return g(g({},e),{},{extensions:{client_common:n}})};t.addAdobeData=y;var E=function(){var e=(0,s.default)(a.default.mark((function e(t){var r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.getAdobeData)();case 2:return r=e.sent,e.abrupt("return",t.map((function(e){return y(e,r)})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.enrichEventsWithAdobeData=E;var _=function(e){var t;return t=Array.isArray(e)||"object"!==(0,i.default)(e)?e:Object.entries(e).reduce((function(e,t){var r=(0,o.default)(t,2),n=r[0],i=r[1];return e.push({layer:n,cell:i}),e}),[]),t};t.structureTestCells=_;var m=function(e,t){var r=t.type,n=t.data,o=t.eventTime,i=t.eventVersion,a=t.options,s=(void 0===a?{}:a).sessionStateOverrides||{},u=g(g({},e.stateManager.get()),s),f=u.analyticsAgent,h=u.appId,y=u.appVer,E=u.cheggUuid,m=u.authState,O=u.clientIpAddress,b=u.clientExperiments,I=u.experiments,T=u.subscriptions,R=u.testCells,A=u.rswVersion,S=u.userAgent,N=u.browserName,w=u.browserVersion,P=u.osName,C=u.osVersion,L=u.platform,x=u.property,U=u.url,D=u.referralUrl,j=u.uvn,M=u.view,V=u.viewPrevious,k=u.dfid,F=_(R),B=(0,p.getCurrentUrl)(U),G={url:B,platform:L,analytics_agent:f,user_agent:S,chegg_uuid:E,auth_state:m,client_ip_address:O,test_cells:F,client_experiments:b,experiments:I,referral_url:(0,p.getCurrentReferrer)(D),app_ver:y,browser_name:N,browser_version:w,os:P,os_ver:C,analytics_module_version:A,user_subscription_status:T||[],base_event_type:l.BASE_EVENT_TYPE,base_event_version:l.BASE_EVENT_VERSION,uvn:j,view:M,view_previous:V,dfid:k,window_dimensions:(0,d.getWindowDimensions)()},K=(0,v.enrichSessionWithCookies)(G),H=(0,p.getTopLevelDomain)(B),W=n;return e.eventContentCache.shouldEnrichEventWithCachedContent(t)&&(W=e.eventContentCache.enrichEventData(n)),{data:W,event_id:c.default.get(),event_time:o.toISOString(),cloud_events_version:"0.1",event_type:"".concat(H,".").concat(x,".").concat(r),source:"/".concat(l.BASE_EVENT_TYPE,"/").concat(x,"/").concat(h),event_type_version:i&&i.toString(),content_type:"application/json",extensions:{client_common:K}}};t.default=m},48865:function(e,t,r){"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(34575)),i=n(r(93913)),a=n(r(59713)),s=r(3100),u=r(52306);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var l=function(e){return!(e.experience||e.property||e.view_name)},p=function(){function e(){var t;if((0,o.default)(this,e),(0,a.default)(this,"_cachedView",void 0),!(0,s.noWindow)())try{var r=window.localStorage.getItem(u.VIEW_PREVIOUS_CACHE_KEY),n=JSON.parse(r),i=parseInt(n.cacheTimestamp);t=i,Date.now()-t>u.VIEW_PREVIOUS_CACHE_TIMEOUT||(this._cachedView=f(f({},n),{},{cacheTimestamp:new Date(i)}))}catch(c){}}return(0,i.default)(e,[{key:"saveToBrowser",value:function(){if(this._cachedView){var e=JSON.stringify(f(f({},this._cachedView),{},{cacheTimestamp:this._cachedView.cacheTimestamp.valueOf()}));window.localStorage.setItem(u.VIEW_PREVIOUS_CACHE_KEY,e)}}},{key:"get",value:function(){if(this._cachedView){var e=f({},this._cachedView);if(delete e.cacheTimestamp,l(e))return;return e}}},{key:"update",value:function(e){if(!(0,s.noWindow)()&&e&&!l(e)){var t=f(f({},e),{},{cacheTimestamp:new Date});delete t.content,this._cachedView=t,this.saveToBrowser()}}}]),e}();t.default=p},52306:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VIEW_PREVIOUS_CACHE_TIMEOUT=t.VIEW_CURRENT_CACHE_KEY=t.VIEW_PREVIOUS_CACHE_KEY=t.DEFAULT_NAMESPACE=t.DEFAULT_COMMAND_KEY=t.LOCAL_ENV_DEFAULT_PORT=t.LOCAL_ENV_QUERY_PARAM=t.EVENTS=t.PLATFORM_WHITELIST=t.DATA_REQUEST_RETRIES=t.CHEGG_ID_REQUEST_RETRIES=t.MCID_REQUEST_RETRIES=t.DELAY_BETWEEN_RETRIES=t.SLOW_RESPONSE_THRESHOLD=t.INIT_TIMEOUT_THRESHOLD=t.DEFAULT_BATCH_INTERVAL=t.LOGGING_NAMESPACE=t.BASE_EVENT_TYPE=t.BASE_EVENT_VERSION=t.ADOBE=void 0;t.ADOBE={demdexUrl:"https://chegginc.demdex.net/id?d_visid_ver=4.2.0&d_fieldgroup=MC&d_rtbd=json&d_ver=2&d_verify=1&d_orgid=3FE7CBC1556605A77F000101%40AdobeOrg&d_nsid=0&ts=",cacheBuster:"cache_buster",cookieName:"AMCV_3FE7CBC1556605A77F000101@AdobeOrg",adobeFallbackCookieName:"s_ecid",legacyCookieName:"mcid",fallbackCookieName:"local_fallback_mcid",responseIndex:"mcid",timeout:5e3};t.BASE_EVENT_VERSION="4";t.BASE_EVENT_TYPE="web";t.LOGGING_NAMESPACE="rio-sdk-web";t.DEFAULT_BATCH_INTERVAL=200;t.INIT_TIMEOUT_THRESHOLD=7e3;t.SLOW_RESPONSE_THRESHOLD=5e3;t.DELAY_BETWEEN_RETRIES=50;t.MCID_REQUEST_RETRIES=2;t.CHEGG_ID_REQUEST_RETRIES=2;t.DATA_REQUEST_RETRIES=8;var r=["tablet","mobile","desktop","tv","bot",void 0];t.PLATFORM_WHITELIST=r;t.EVENTS={pageview:{cheggDbEventName:"page_view",version:"4.0.0"},cardEngagement:{cheggDbEventName:"card_engagement",version:"3.0.0"},citationCreated:{cheggDbEventName:"citation_created",version:"2.0.0"},paperUpload:{cheggDbEventName:"paper_upload",version:"3.0.0"},transaction:{cheggDbEventName:"transaction",version:"3.0.0"},slotRender:{cheggDbEventName:"slot_render",version:"1.0.0"},videoEvent:{cheggDbEventName:"video_event",version:"1.0.0"}};t.LOCAL_ENV_QUERY_PARAM="use-local-rsw-port";t.LOCAL_ENV_DEFAULT_PORT=8042;t.DEFAULT_COMMAND_KEY="wtaCmd";t.DEFAULT_NAMESPACE="default";t.VIEW_PREVIOUS_CACHE_KEY="rsw_view_previous_cache";t.VIEW_CURRENT_CACHE_KEY="rsw_view_current_cache";t.VIEW_PREVIOUS_CACHE_TIMEOUT=36e5},20884:function(e,t,r){"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(34575)),i=n(r(59713)),a=n(r(36145)),s=function e(t){var r=this;(0,o.default)(this,e),(0,i.default)(this,"_shouldAllowSends",void 0),(0,i.default)(this,"_preloadEvents",void 0),(0,i.default)(this,"_client",void 0),(0,i.default)(this,"pushPreloadEvent",(function(e){return new Promise((function(t){r._preloadEvents.push({specs:e,resolvePromise:t})}))})),(0,i.default)(this,"queuePreloadEvents",(function(){r._preloadEvents.forEach((function(e){var t=r._client.structureData(e.specs);r._client.batcher.queueEvent(t,e.options||{}).then(e.resolvePromise).catch((function(e){return a.default.error(e)}))})),r._preloadEvents=[]})),(0,i.default)(this,"allowSends",(function(){r._shouldAllowSends=!0})),(0,i.default)(this,"blockSends",(function(){r._shouldAllowSends=!1})),(0,i.default)(this,"shouldAllowSends",(function(){return r._shouldAllowSends})),this._client=t,this._shouldAllowSends=!1,this._preloadEvents=[]};t.default=s},45651:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(52306),o=function(e,t){var r=t.type,o=t.meta,i=void 0===o?{}:o,a=t.data,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{force:!1},u=s.force,c=n.EVENTS[r],f=c.version,l=c.cheggDbEventName,p=i.eventTime||new Date,d={eventTime:p,version:f};return e._nakedEvent({data:a||{},type:l,meta:d},{force:u})};t.default=o},38472:function(e,t,r){"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.nakedEvent=t.sendEvent=void 0;var o=n(r(59713)),i=n(r(36145));function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.sendEvent=function(e,t){var r;t.eventVersion||(t.version?t.eventVersion=t.version:i.default.error(new Error("Either version or eventVersion argument must be passed to sendEvent")));var n=s(s({},t),{},{eventTime:new Date});if(e.eventGate.shouldAllowSends()){var o=e.structureData(n);r=e.batcher.queueEvent(o,n.options||{})}else r=e.eventGate.pushPreloadEvent(n);return r};t.nakedEvent=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{force:!1},o={data:t.data,type:t.type,eventVersion:t.meta.version,eventTime:t.meta.eventTime,options:n};if(e.eventGate.shouldAllowSends()){var i=e.structureData(o);r=e.batcher.queueEvent(i,n)}else r=e.eventGate.pushPreloadEvent(o);return r}},32249:function(e,t,r){"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(36145)),i=r(3100),a=r(56461),s=r(52306),u=function(e,t){(0,i.noWindow)()||(!function(e,t){var r=function(t){try{t(e)}catch(r){o.default.error(r)}},n=(0,i.getCommandKey)(t),s=window;s[n]=s[n]||[];var u=s[n].rswInitialized;s[n].forEach(r),s[n].push=r,u||(s[n].rswInitialized=!0,window.addEventListener("beforeunload",a.unloadBehavior))}(e,t),window._rswClients=window._rswClients||{},window._rswClients[t||s.DEFAULT_NAMESPACE]=e)};t.default=u},74178:function(e,t,r){"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0});var o={getClient:!0,Client:!0,getExistingClient:!0,RswResponse:!0,SessionData:!0,StateUpdateData:!0,getNamespaceKey:!0};Object.defineProperty(t,"Client",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"getExistingClient",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"RswResponse",{enumerable:!0,get:function(){return u.RswResponse}}),Object.defineProperty(t,"SessionData",{enumerable:!0,get:function(){return u.SessionData}}),Object.defineProperty(t,"StateUpdateData",{enumerable:!0,get:function(){return c.StateUpdateData}}),Object.defineProperty(t,"getNamespaceKey",{enumerable:!0,get:function(){return f.getNamespaceKey}}),t.getClient=void 0;var i=n(r(16563)),a=n(r(81894)),s=n(r(32249)),u=r(21152),c=r(12828),f=r(3100),l=n(r(36145)),p=r(80129);Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in t&&t[e]===p[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}}))}));t.getClient=function(e){try{var t={};"string"===typeof e?t.namespace=e:void 0!==e&&(t=e);var r=(0,a.default)(t.namespace);if(r)return r;var n=new i.default;return(0,s.default)(n,t.namespace),n}catch(o){return l.default.error(o),null}}},9966:function(e,t,r){"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.sendImmediateRequest=void 0;var o=n(r(59713)),i=n(r(87757)),a=n(r(48926)),s=n(r(85239)),u=r(52306),c=n(r(36145)),f=r(3100);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d=function(){var e=(0,a.default)(i.default.mark((function e(t){var r,n,o,a,u,c,f,l,p,d;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.url,n=t.options,o=t.data,a=t.retries,u=t.retriesRemaining,c=t.delay,e.prev=1,l=o?"post":"get",p=!0===n.withCredentials,d=n.headers?n.headers:{},e.next=7,(0,s.default)({method:l,url:r,data:o,withCredentials:p,headers:d});case 7:f=e.sent,e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,y({retries:a,retriesRemaining:u,delay:c,url:r,options:n,data:o,error:e.t0});case 14:f=e.sent;case 15:return e.abrupt("return",f);case 16:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=(0,a.default)(i.default.mark((function e(t){var r,n,o,a,u,c;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.url,n=t.data,o=t.options,u=p({"content-type":"application/json;charset=UTF-8"},(a=void 0===o?{}:o).headers),c=!0===a.withCredentials,e.prev=3,e.abrupt("return",fetch(r,{method:"POST",headers:u,keepalive:!0,credentials:c?"include":"same-origin",body:JSON.stringify(n)}));case 7:return e.prev=7,e.t0=e.catch(3),e.abrupt("return",(0,s.default)({method:"POST",headers:u,url:r,data:n,withCredentials:!0}));case 10:case"end":return e.stop()}}),e,null,[[3,7]])})));return function(t){return e.apply(this,arguments)}}();t.sendImmediateRequest=v;var h=function(e){return setTimeout((function(){c.default.log(new Error("Request to ".concat(e," took greater than ").concat(u.SLOW_RESPONSE_THRESHOLD," to complete")))}),u.SLOW_RESPONSE_THRESHOLD)},g=function(){var e=(0,a.default)(i.default.mark((function e(t){var r,n,o,a,s,c,f;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.url,n=t.data,o=t.retries,a=t.options,s=void 0===a?{}:a,c=h(r),e.next=4,d({url:r,data:n,options:s,retries:o,retriesRemaining:o,delay:u.DELAY_BETWEEN_RETRIES});case 4:return f=e.sent,clearTimeout(c),e.abrupt("return",f);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=(0,a.default)(i.default.mark((function e(t){var r,n,o,a,s,u,l,p;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.retries,n=t.retriesRemaining,o=t.delay,a=t.url,s=t.options,u=t.data,l=t.error,n===r&&(l.message="RSW's first request to ".concat(a," failed. Retrying. ").concat(l.message),c.default.log(l)),n===r-1&&0!==n&&(l.message="RSW request to ".concat(a," failed twice in a row. Will continue to retry"),c.default.error(l)),0!==n){e.next=7;break}return l.message="RSW request to ".concat(a," failed all ").concat(r," retries. ").concat(l.message),c.default.error(l),e.abrupt("return",l);case 7:return p=n-1,e.abrupt("return",(0,f.wrapTimeout)((function(){return d({url:a,options:s,data:u,retries:r,delay:o,retriesRemaining:p})}),o));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=g;t.default=E},40207:function(e,t,r){"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.enrichSessionWithCookies=t.getCookies=void 0;var o=n(r(59713));function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=r(36808),f=[{sessionId:"uvn",cookieName:"V"},{sessionId:"client_experiments",cookieName:"exp"},{sessionId:"dfid",cookieName:"DFID"}],l=function(){var e,t={},r=s(f);try{for(r.s();!(e=r.n()).done;){var n=e.value,o=c.get(n.cookieName);if(o)t[n.sessionId]=o}}catch(i){r.e(i)}finally{r.f()}return t};t.getCookies=l;t.enrichSessionWithCookies=function(e){var t=l();for(var r in e)void 0===e[r]&&delete e[r];return a(a({},t),e)}},21152:function(){},56461:function(e,t,r){"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.unloadBehavior=void 0;var o=n(r(36145)),i=r(42739),a=r(3100);t.unloadBehavior=function(e){"pending"===(0,i.getAdobeDataStatus)()?o.default.error(new Error("User left page before adobe data was fetched")):!(0,a.noWindow)()&&window._rswClients&&Object.values(window._rswClients).map((function(e){e.batcher.flushCachedEvents()})),delete e.returnValue}},80102:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){var e,t,r="0123456789",n="",o="",i=10,a=10;for(e=0;19>e;e++)t=Math.floor(Math.random()*i),n+=r.substring(t,t+1),0===e&&9==t?i=3:((1==e||2==e)&&10!=i&&2>t||2<e)&&(i=10),t=Math.floor(Math.random()*a),o+=r.substring(t,t+1),0===e&&9==t?a=3:((1==e||2==e)&&10!=a&&2>t||2<e)&&(a=10);return n+o};t.default=r},42739:function(e,t,r){"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.getAdobeDataStatus=t.getAdobeData=t.init=t.parseAdobeCookie=t.getAdobeCookie=t.reset=t.extractCookies=t.extractMcid=t.fetchFromRemote=t.getCacheBuster=void 0;var o=n(r(87757)),i=n(r(48926)),a=r(52306),s=n(r(36145)),u=n(r(9966)),c=r(3100),f=n(r(80102)),l=r(33389);function p(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v=r(36808),h=function(e){var t=Math.floor(1e9*Math.random()),r=e.indexOf("?")>-1?"&":"?";return"".concat(r).concat(a.ADOBE.cacheBuster,"=").concat(t)};t.getCacheBuster=h;var g=function(){var e=(0,i.default)(o.default.mark((function e(t){var r,n,i,c,f,l,d,g,E;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,n=null,e.prev=2,c=h(t),e.next=6,(0,u.default)({url:"".concat(t).concat(c),options:{withCredentials:!0},retries:a.MCID_REQUEST_RETRIES});case 6:if(!((f=e.sent)instanceof Error)){e.next=9;break}throw f;case 9:if(r=y(f),(n=_(f))&&n.length>0){l=p(n);try{for(l.s();!(d=l.n()).done;)(g=d.value).name&&!v.get(g.name)&&v.set(g.name,g.value)}catch(o){l.e(o)}finally{l.f()}}e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),i=e.t0;case 17:return r||((E=i||new Error).message="Failed to gather MCID from ".concat(t,". ").concat(E.message),s.default.error(E)),e.abrupt("return",r);case 19:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}();t.fetchFromRemote=g;var y=function e(t){var r=t.data,n=null;return"d_mid"in r?n=r.d_mid:"mcid"in r?n=r.mcid:"data"in r&&(n=e(r)),n};t.extractMcid=y;var E,_=function e(t){var r=t.data;return"data"in r?e(r):"cookies"in r?r.cookies:null};t.extractCookies=_;var m=new Promise((function(e){E=function(t){O="resolved",e(t)}})),O="uninitialized",b=function(){m=new Promise((function(e){E=function(t){e(t)}}))};t.reset=b;t.getAdobeCookie=function(){if(!R()){var e=v.get(a.ADOBE.cookieName);return I(e)||void 0}};var I=function(e){try{var t=decodeURI(e).split("|"),r=t.indexOf("MCMID");return-1!==r?t[r+1]:null}catch(n){return null}};t.parseAdobeCookie=I;var T=function(e){return e&&"null"!==e},R=function(){return window.location.href.includes("rsw_disable_adobe_cookie")},A=function(){var e=(0,i.default)(o.default.mark((function e(){var t,r,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O="pending",t=null,!(0,c.noWindow)()){e.next=4;break}return e.abrupt("return",{mcid:null});case 4:if((r=v.get(a.ADOBE.cookieName))&&(s.default.log("AMCV cookie is present"),t=I(r)),T(t)){e.next=11;break}return s.default.log("AMCV cookie not available, hitting demdex"),e.next=10,g(a.ADOBE.demdexUrl);case 10:t=e.sent;case 11:return T(t)||(s.default.log("Demdex failed"),t=v.get(a.ADOBE.fallbackCookieName),T(t)||(s.default.log("No local cookie, generating local cookie"),t=(0,f.default)(),v.set(a.ADOBE.fallbackCookieName,t,{domain:".".concat((0,l.getRootDomain)(window.location.href))})),n="MCMID|".concat(t),s.default.log("setting local s_ecid cookie",n,a.ADOBE.adobeFallbackCookieName),v.set(a.ADOBE.adobeFallbackCookieName,n,{domain:".".concat((0,l.getRootDomain)(window.location.href))})),v.set(a.ADOBE.legacyCookieName,t),E({mcid:t}),e.abrupt("return",{mcid:t});case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.init=A;var S=function(){return m};t.getAdobeData=S;var N=function(){return O};t.getAdobeDataStatus=N;var w={getAdobeData:S,getAdobeDataStatus:N,init:A,parseAdobeCookie:I,reset:b,extractCookies:_,extractMcid:y,fetchFromRemote:g};t.default=w},74185:function(e,t,r){"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.CheggIdManager=void 0;var o=n(r(87757)),i=n(r(48926)),a=n(r(34575)),s=n(r(93913)),u=n(r(59713)),c=n(r(85239)),f=n(r(36145)),l=r(42739),p=r(3100),d=n(r(4593)),v=r(33389),h=r(2764);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var E=r(36808),_="CVID",m="CSID",O=function(e){return Math.random()<e},b=function(){function e(){var t=this;(0,a.default)(this,e),(0,u.default)(this,"isInitialized",void 0),(0,u.default)(this,"env",void 0),(0,u.default)(this,"fetchCvid",function(){var e=(0,i.default)(o.default.mark((function e(t){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(){var e=(0,i.default)(o.default.mark((function e(){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.default)({url:t,method:"get",withCredentials:!0});case 2:return r=e.sent,e.abrupt("return",r.data.cvid);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.prev=1,e.abrupt("return",r());case 5:e.prev=5,e.t0=e.catch(1),O(.01)&&f.default.error(new Error("RSW request to ".concat(t," failed. ").concat(e.t0.message)));case 8:case"end":return e.stop()}}),e,null,[[1,5]])})));return function(t){return e.apply(this,arguments)}}()),(0,u.default)(this,"determineEnvironment",(function(){try{var e=window.location.href,t=(0,v.getSubdomain)(e);return e.includes("cheggnet")||t&&t.includes("playground")||(0,v.isLocalDomain)(e)||e.includes("playground")||e.includes("outcomesccmdev.wpengine.com")?"test":"prod"}catch(r){return"test"}})),(0,u.default)(this,"addCvidQueryParams",(function(e){var t=E.get(_),r=(0,l.getAdobeCookie)();return t&&!r?"".concat(e,"?domain_cvid=").concat(t):!t&&r?"".concat(e,"?domain_mcid=").concat(r):t&&r?"".concat(e,"?domain_cvid=").concat(t,"&domain_mcid=").concat(r):e})),(0,u.default)(this,"getFallbackCvid",(function(){var e=E.get(_),t=(0,l.getAdobeCookie)();return e||(e=t||d.default.get(),(0,p.setCookieOnRootDomain)(_,e),e)})),(0,u.default)(this,"fetchCsid",function(){var e=(0,i.default)(o.default.mark((function e(t,r,n){var a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(){var e=(0,i.default)(o.default.mark((function e(){var i,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.default)({url:t,method:"post",data:{cvid:r,domainCsid:n,data:{client_common:(0,h.getSessionConstants)({chegg_visitor_id:r})}},withCredentials:!0});case 2:return a=e.sent,e.abrupt("return",null===a||void 0===a||null===(i=a.data)||void 0===i?void 0:i.csid);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.prev=1,e.abrupt("return",a());case 5:e.prev=5,e.t0=e.catch(1),O(.01)&&console.error("RSW request to ".concat(t," failed all retries. ").concat(e.t0.message));case 8:case"end":return e.stop()}}),e,null,[[1,5]])})));return function(t,r,n){return e.apply(this,arguments)}}()),(0,u.default)(this,"addIdsToEvent",function(){var e=(0,i.default)(o.default.mark((function e(r){var n,i,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getCvid();case 2:return n=e.sent,e.next=5,t.getCsid();case 5:return i=e.sent,a=y(y({},r.extensions.client_common),{},{chegg_visitor_id:n,chegg_session_id:i}),e.abrupt("return",y(y({},r),{},{extensions:{client_common:a}}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,u.default)(this,"getCheggIds",(0,i.default)(o.default.mark((function e(){var r,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getCvid();case 2:return r=e.sent,e.next=5,t.getCsid();case 5:return n=e.sent,e.abrupt("return",{chegg_visitor_id:r,chegg_session_id:n});case 7:case"end":return e.stop()}}),e)})))),(0,u.default)(this,"enrichEventsWithCheggIds",function(){var e=(0,i.default)(o.default.mark((function e(r){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(r.map(t.addIdsToEvent)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.isInitialized=this.initializeCheggIds()}return(0,s.default)(e,[{key:"initializeCheggIds",value:function(){var e=this;if((0,p.noWindow)())return Promise.resolve(!0);this.env=this.determineEnvironment();var t=!!E.get(_);return this.initCvid(t).then((function(t){return e.initCsid(t)})).then((function(){return Promise.resolve(!0)}))}},{key:"initCvid",value:function(e){var t=this,r="prod"===this.env?"https://analytics.chegg.com/visitor-session-id-service/web/cvid":"https://analytics.test.cheggnet.com/visitor-session-id-service/web/cvid",n=this.addCvidQueryParams(r);return this.fetchCvid(n).then((function(r){if(r){var n=!!E.get(_);return e==n&&(0,p.setCookieOnRootDomain)(_,r),r}return t.getFallbackCvid()})).catch((function(e){return f.default.error(new Error("Unexpected error fetching cvid ".concat(e.message))),t.getFallbackCvid()}))}},{key:"getCvid",value:function(){var e=this;return(0,p.noWindow)()?Promise.resolve(""):this.isInitialized.then((function(){return e.getFallbackCvid()}))}},{key:"getFallbackCsid",value:function(){var e=E.get(m);return e||(e=String(Date.now())),(0,p.setCookieOnRootDomain)(m,e,{expires:(0,p.getDateXMinutesFromNow)(30)}),Number(e)}},{key:"initCsid",value:function(e){var t=this,r="prod"===this.env?"https://analytics.chegg.com/visitor-session-id-service/web/csid":"https://analytics.test.cheggnet.com/visitor-session-id-service/web/csid",n=E.get(m),o=n?Number(n):Date.now();return n?(this.fetchCsid(r,e,o),Promise.resolve(o)):this.fetchCsid(r,e,o).then((function(e){if(e){var r=(n=E.get(m))||String(e);return(0,p.setCookieOnRootDomain)(m,r,{expires:(0,p.getDateXMinutesFromNow)(30)}),Number(r)}return t.getFallbackCsid()})).catch((function(e){return f.default.error(new Error("Error encountered when fetching csid ".concat(e))),t.getFallbackCsid()}))}},{key:"getCsid",value:function(){var e=this;return(0,p.noWindow)()?Promise.resolve(Date.now()):this.isInitialized.then((function(){return e.getFallbackCsid()}))}}]),e}();t.CheggIdManager=b},13082:function(e,t,r){"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(319)),i=n(r(59713)),a=r(3100);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c=[{key:"layer",operation:"useOriginal"},{key:"product",operation:"useNew"}],f=function(e,t,r){var n=r||c,i=[].concat((0,o.default)(e),(0,o.default)(t)),s={};return i.map((function(e){if((0,a.isObject)(e)){var t=function(e,t){return t.find((function(t){return t.key in e}))}(e,n);return t?function(e,t,r){var n=u({},e),o=n[t.key];if(!o)return n;var i=r[o];if(!i)return r[o]=n,n;switch(t.operation){case"useOriginal":return n.__rsw_dedup_remove__=!0,n;case"useNew":return i.__rsw_dedup_remove__=!0,r[o]=n,n;case"merge":var a=u(u({},i),n);return i.__rsw_dedup_remove__=!0,r[o]=a,a}}(e,t,s):e}return e})).filter((function(e){return!e.__rsw_dedup_remove__}))};t.default=f},59360:function(e,t){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.errorEmitter=t.init=t.reset=void 0;t.reset=function(){r=void 0};var n=function(e){r=e||console.error};t.init=n;t.errorEmitter=function(e){r||n(),r(e)}},92732:function(e,t,r){"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.get=void 0;var o=n(r(36145)),i=r(52306),a=r(51206);t.get=function(e){var t,r=a.getParser(e).getResult(),n=r.browser,s=n.name,u=n.version,c=r.os,f=c.name,l=c.version,p=r.platform.type;return i.PLATFORM_WHITELIST.includes(p)?t=p:o.default.error(new Error("Unknown device platform detected.  Expecting ".concat(i.PLATFORM_WHITELIST.join(" | "),". Received instead ").concat(p,". This was parse from the user agent: ").concat(e,"."))),{browserName:s,browserVersion:u,osName:f,osVersion:l,platform:t}}},2764:function(e,t,r){"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getSessionConstants=void 0;var o=n(r(59713)),i=r(3100),a=r(92732),s=r(52306),u=r(42739);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.getSessionConstants=function(e){var t=(0,i.getUserAgent)(),r=(0,a.get)(t),n=r.browserName,o=r.browserVersion,c=r.osName,l=r.osVersion,p=r.platform;return f(f({},e),{},{analytics_module_version:"9.6.19",adobe_mcid:(0,u.getAdobeCookie)(),base_event_type:s.BASE_EVENT_TYPE,base_event_version:s.BASE_EVENT_VERSION,url:window.location.href,user_agent:t,browser_name:n,browser_version:o,os:c,os_ver:l,platform:p})}},36145:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(59360),o=r(52306),i=r(3100),a={log:function(){if((0,i.noWindow)()||!window.silenceLogging){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];(e=console).log.apply(e,[o.LOGGING_NAMESPACE].concat(r))}},warn:function(){if((0,i.noWindow)()||!window.silenceLogging){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];(e=console).warn.apply(e,[o.LOGGING_NAMESPACE].concat(r))}},error:function(e){!(0,i.noWindow)()&&window.silenceLogging||(e.message="".concat(o.LOGGING_NAMESPACE,": ").concat(e.message),(0,n.errorEmitter)(e))}},s=a;t.default=s},3100:function(e,t,r){"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getDateXMinutesFromNow=t.deepEquals=t.setCookieOnRootDomain=t.getLocalPortFromUrl=t.getLocalPortFromParam=t.getUserAgent=t.noWindow=t.getCommandKey=t.getNamespaceKey=t.isObject=t.wrapTimeout=void 0;var o=n(r(63038)),i=n(r(59713)),a=r(52306),s=n(r(36808)),u=r(33389),c=n(r(36145));function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}t.wrapTimeout=function(e,t){return new Promise((function(r){return setTimeout((function(){return r(e())}),t)}))};var l=function(e){return!!e&&Object.getPrototypeOf(e)===Object.prototype};t.isObject=l;t.getNamespaceKey=function(e){return"".concat(e,"RswCommand")};t.getCommandKey=function(e){return e?"".concat(e,"RswCommand"):a.DEFAULT_COMMAND_KEY};var p=function(){return"undefined"===typeof window};t.noWindow=p;t.getUserAgent=function(e){return e||(p()?"unknown":window.navigator.userAgent)};t.getLocalPortFromParam=function(e){return!0===e?a.LOCAL_ENV_DEFAULT_PORT:Number(e)?Number(e):null};t.getLocalPortFromUrl=function(e){if(p())return null;var t=e||window.location;try{if(t.href.includes(a.LOCAL_ENV_QUERY_PARAM)){var r=new URLSearchParams(t.search).get(a.LOCAL_ENV_QUERY_PARAM);if(Number(r))return Number(r);if("true"===r)return a.LOCAL_ENV_DEFAULT_PORT}}catch(n){return null}return null};t.setCookieOnRootDomain=function(e,t,r){try{var n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({domain:(0,u.isLocalDomain)(window.location.href)?void 0:(0,u.getRootDomain)(window.location.href),secure:!0,SameSite:"None"},r);s.default.set(e,t,n)}catch(o){c.default.error(o)}};t.deepEquals=function e(t,r){if(t===r)return!0;if(l(t)){if(l(r)){var n=Object.entries(t);return n.length===Object.keys(r).length&&n.reduce((function(t,n){var i=(0,o.default)(n,2),a=i[0],s=i[1];if(!1===t)return t;var u=r[a];return e(s,u)}),!0)}return!1}if(Array.isArray(t)){if(Array.isArray(r)&&t.length===r.length){var i=r.sort((function(e,t){return e<t?-1:1}));return!t.sort((function(e,t){return e<t?-1:1})).some((function(t,r){var n=i[r];return!1===e(t,n)}))}return!1}return!1};t.getDateXMinutesFromNow=function(e){return new Date(Date.now()+6e4*e)}},76378:function(e,t,r){"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.deepEquals=void 0;var o=n(r(63038)),i=r(3100);t.deepEquals=function e(t,r){if(t===r)return!0;if((0,i.isObject)(t)){if((0,i.isObject)(r)){var n=Object.entries(t);return n.length===Object.keys(r).length&&n.reduce((function(t,n){var i=(0,o.default)(n,2),a=i[0],s=i[1];if(!1===t)return t;var u=r[a];return e(s,u)}),!0)}return!1}if(Array.isArray(t)){if(Array.isArray(r)&&t.length===r.length){var a=r.sort((function(e,t){return e<t?-1:1}));return!t.sort((function(e,t){return e<t?-1:1})).some((function(t,r){var n=a[r];return!1===e(t,n)}))}return!1}return!1}},33389:function(e,t,r){"use strict";var n=r(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentUrl=t.getCurrentReferrer=t.getTopLevelDomain=t.getSubdomain=t.getLocalDomain=t.isLocalDomain=t.getRootDomain=void 0;var o=r(3100),i=n(r(36145)),a=r(84564);t.getRootDomain=function(e){var t=new a(e).hostname.split(".");return t.slice(t.length-2,t.length).join(".")};t.isLocalDomain=function(e){var t=new a(e).hostname.split(".");return!isNaN(Number(t[0]))};t.getLocalDomain=function(e){return new a(e).hostname.split(".")[0]};t.getSubdomain=function(e){var t=new a(e).hostname.split(".");return t.length>=3?t[0]:void 0};t.getTopLevelDomain=function(e){var t=new a(e).hostname.split("."),r=t[t.length-1];return isNaN(Number(r))?r:"tst"};t.getCurrentReferrer=function(e){return e||((0,o.noWindow)()?"":e===window.document.referrer?"chegg.com":window.document.referrer)};t.getCurrentUrl=function(e){var t;return(0,o.noWindow)()?e?t=e:(i.default.error(new Error("No url passed into state")),t=""):t=window.location.href,t}},4593:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;for(var r=[],n=0;n<256;n++)r[n]=(n<16?"0":"")+n.toString(16);var o={get:function(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,o=4294967295*Math.random()|0;return"".concat(r[255&e]+r[e>>8&255]+r[e>>16&255]+r[e>>24&255],"-").concat(r[255&t]).concat(r[t>>8&255],"-").concat(r[t>>16&15|64]).concat(r[t>>24&255],"-").concat(r[63&n|128]).concat(r[n>>8&255],"-").concat(r[n>>16&255]).concat(r[n>>24&255]).concat(r[255&o]).concat(r[o>>8&255]).concat(r[o>>16&255]).concat(r[o>>24&255])}};t.default=o},56304:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWindowDimensions=void 0;t.getWindowDimensions=function(){return window.innerHeight&&window.innerWidth?{px_width:Math.round(window.innerWidth),px_height:Math.round(window.innerHeight)}:void 0}},85239:function(e,t,r){e.exports=r(72213)},4512:function(e,t,r){"use strict";var n=r(9296),o=r(92025),i=r(16041),a=r(81767),s=r(52644),u=r(97038),c=r(82801),f=r(98859);e.exports=function(e){return new Promise((function(t,r){var l=e.data,p=e.headers;n.isFormData(l)&&delete p["Content-Type"];var d=new XMLHttpRequest;if(e.auth){var v=e.auth.username||"",h=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";p.Authorization="Basic "+btoa(v+":"+h)}var g=s(e.baseURL,e.url);if(d.open(e.method.toUpperCase(),a(g,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,d.onreadystatechange=function(){if(d&&4===d.readyState&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in d?u(d.getAllResponseHeaders()):null,i={data:e.responseType&&"text"!==e.responseType?d.response:d.responseText,status:d.status,statusText:d.statusText,headers:n,config:e,request:d};o(t,r,i),d=null}},d.onabort=function(){d&&(r(f("Request aborted",e,"ECONNABORTED",d)),d=null)},d.onerror=function(){r(f("Network Error",e,null,d)),d=null},d.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(f(t,e,"ECONNABORTED",d)),d=null},n.isStandardBrowserEnv()){var y=(e.withCredentials||c(g))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;y&&(p[e.xsrfHeaderName]=y)}if("setRequestHeader"in d&&n.forEach(p,(function(e,t){"undefined"===typeof l&&"content-type"===t.toLowerCase()?delete p[t]:d.setRequestHeader(t,e)})),n.isUndefined(e.withCredentials)||(d.withCredentials=!!e.withCredentials),e.responseType)try{d.responseType=e.responseType}catch(E){if("json"!==e.responseType)throw E}"function"===typeof e.onDownloadProgress&&d.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){d&&(d.abort(),r(e),d=null)})),l||(l=null),d.send(l)}))}},72213:function(e,t,r){"use strict";var n=r(9296),o=r(13925),i=r(38960),a=r(53063);function s(e){var t=new i(e),r=o(i.prototype.request,t);return n.extend(r,i.prototype,t),n.extend(r,t),r}var u=s(r(25562));u.Axios=i,u.create=function(e){return s(a(u.defaults,e))},u.Cancel=r(86179),u.CancelToken=r(93049),u.isCancel=r(21151),u.all=function(e){return Promise.all(e)},u.spread=r(84291),e.exports=u,e.exports.default=u},86179:function(e){"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},93049:function(e,t,r){"use strict";var n=r(86179);function o(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new n(e),t(r.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var e;return{token:new o((function(t){e=t})),cancel:e}},e.exports=o},21151:function(e){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},38960:function(e,t,r){"use strict";var n=r(9296),o=r(81767),i=r(98425),a=r(49040),s=r(53063);function u(e){this.defaults=e,this.interceptors={request:new i,response:new i}}u.prototype.request=function(e){"string"===typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[a,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)r=r.then(t.shift(),t.shift());return r},u.prototype.getUri=function(e){return e=s(this.defaults,e),o(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],(function(e){u.prototype[e]=function(t,r){return this.request(s(r||{},{method:e,url:t,data:(r||{}).data}))}})),n.forEach(["post","put","patch"],(function(e){u.prototype[e]=function(t,r,n){return this.request(s(n||{},{method:e,url:t,data:r}))}})),e.exports=u},98425:function(e,t,r){"use strict";var n=r(9296);function o(){this.handlers=[]}o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){n.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=o},52644:function(e,t,r){"use strict";var n=r(53735),o=r(48491);e.exports=function(e,t){return e&&!n(t)?o(e,t):t}},98859:function(e,t,r){"use strict";var n=r(75422);e.exports=function(e,t,r,o,i){var a=new Error(e);return n(a,t,r,o,i)}},49040:function(e,t,r){"use strict";var n=r(9296),o=r(75364),i=r(21151),a=r(25562);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return s(e),t.data=o(t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(s(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},75422:function(e){"use strict";e.exports=function(e,t,r,n,o){return e.config=t,r&&(e.code=r),e.request=n,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},53063:function(e,t,r){"use strict";var n=r(9296);e.exports=function(e,t){t=t||{};var r={},o=["url","method","data"],i=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function u(e,t){return n.isPlainObject(e)&&n.isPlainObject(t)?n.merge(e,t):n.isPlainObject(t)?n.merge({},t):n.isArray(t)?t.slice():t}function c(o){n.isUndefined(t[o])?n.isUndefined(e[o])||(r[o]=u(void 0,e[o])):r[o]=u(e[o],t[o])}n.forEach(o,(function(e){n.isUndefined(t[e])||(r[e]=u(void 0,t[e]))})),n.forEach(i,c),n.forEach(a,(function(o){n.isUndefined(t[o])?n.isUndefined(e[o])||(r[o]=u(void 0,e[o])):r[o]=u(void 0,t[o])})),n.forEach(s,(function(n){n in t?r[n]=u(e[n],t[n]):n in e&&(r[n]=u(void 0,e[n]))}));var f=o.concat(i).concat(a).concat(s),l=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===f.indexOf(e)}));return n.forEach(l,c),r}},92025:function(e,t,r){"use strict";var n=r(98859);e.exports=function(e,t,r){var o=r.config.validateStatus;r.status&&o&&!o(r.status)?t(n("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},75364:function(e,t,r){"use strict";var n=r(9296);e.exports=function(e,t,r){return n.forEach(r,(function(r){e=r(e,t)})),e}},25562:function(e,t,r){"use strict";var n=r(34155),o=r(9296),i=r(64816),a={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!o.isUndefined(e)&&o.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var u={adapter:function(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof n&&"[object process]"===Object.prototype.toString.call(n))&&(e=r(4512)),e}(),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),o.isFormData(e)||o.isArrayBuffer(e)||o.isBuffer(e)||o.isStream(e)||o.isFile(e)||o.isBlob(e)?e:o.isArrayBufferView(e)?e.buffer:o.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):o.isObject(e)?(s(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"===typeof e)try{e=JSON.parse(e)}catch(t){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};o.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),o.forEach(["post","put","patch"],(function(e){u.headers[e]=o.merge(a)})),e.exports=u},13925:function(e){"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},81767:function(e,t,r){"use strict";var n=r(9296);function o(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var i;if(r)i=r(t);else if(n.isURLSearchParams(t))i=t.toString();else{var a=[];n.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,(function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),a.push(o(t)+"="+o(e))})))})),i=a.join("&")}if(i){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},48491:function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},16041:function(e,t,r){"use strict";var n=r(9296);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,r,o,i,a){var s=[];s.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),n.isString(o)&&s.push("path="+o),n.isString(i)&&s.push("domain="+i),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},53735:function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},82801:function(e,t,r){"use strict";var n=r(9296);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function o(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=o(window.location.href),function(t){var r=n.isString(t)?o(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},64816:function(e,t,r){"use strict";var n=r(9296);e.exports=function(e,t){n.forEach(e,(function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])}))}},97038:function(e,t,r){"use strict";var n=r(9296),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,i,a={};return e?(n.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=n.trim(e.substr(0,i)).toLowerCase(),r=n.trim(e.substr(i+1)),t){if(a[t]&&o.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([r]):a[t]?a[t]+", "+r:r}})),a):a}},84291:function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},9296:function(e,t,r){"use strict";var n=r(13925),o=Object.prototype.toString;function i(e){return"[object Array]"===o.call(e)}function a(e){return"undefined"===typeof e}function s(e){return null!==e&&"object"===typeof e}function u(e){if("[object Object]"!==o.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function c(e){return"[object Function]"===o.call(e)}function f(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),i(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===o.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!==typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:s,isPlainObject:u,isUndefined:a,isDate:function(e){return"[object Date]"===o.call(e)},isFile:function(e){return"[object File]"===o.call(e)},isBlob:function(e){return"[object Blob]"===o.call(e)},isFunction:c,isStream:function(e){return s(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!==typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:f,merge:function e(){var t={};function r(r,n){u(t[n])&&u(r)?t[n]=e(t[n],r):u(r)?t[n]=e({},r):i(r)?t[n]=r.slice():t[n]=r}for(var n=0,o=arguments.length;n<o;n++)f(arguments[n],r);return t},extend:function(e,t,r){return f(t,(function(t,o){e[o]=r&&"function"===typeof t?n(t,r):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},14139:function(e){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},94789:function(e,t,r){var n=r(52384);e.exports=function(e){if(!n(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},79802:function(e){e.exports=function(e,t,r){if(!(e instanceof t))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return e}},18919:function(e,t,r){var n=r(52384);e.exports=function(e){if(!n(e))throw TypeError(String(e)+" is not an object");return e}},65024:function(e,t,r){"use strict";var n=r(50246).forEach,o=r(48547)("forEach");e.exports=o?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},55534:function(e,t,r){var n=r(61736),o=r(28821),i=r(11926),a=function(e){return function(t,r,a){var s,u=n(t),c=o(u.length),f=i(a,c);if(e&&r!=r){for(;c>f;)if((s=u[f++])!=s)return!0}else for(;c>f;f++)if((e||f in u)&&u[f]===r)return e||f||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},50246:function(e,t,r){var n=r(11117),o=r(63283),i=r(27095),a=r(28821),s=r(54637),u=[].push,c=function(e){var t=1==e,r=2==e,c=3==e,f=4==e,l=6==e,p=7==e,d=5==e||l;return function(v,h,g,y){for(var E,_,m=i(v),O=o(m),b=n(h,g,3),I=a(O.length),T=0,R=y||s,A=t?R(v,I):r||p?R(v,0):void 0;I>T;T++)if((d||T in O)&&(_=b(E=O[T],T,m),e))if(t)A[T]=_;else if(_)switch(e){case 3:return!0;case 5:return E;case 6:return T;case 2:u.call(A,E)}else switch(e){case 4:return!1;case 7:u.call(A,E)}return l?-1:c||f?f:A}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterOut:c(7)}},46091:function(e,t,r){var n=r(33968),o=r(95341),i=r(85303),a=o("species");e.exports=function(e){return i>=51||!n((function(){var t=[];return(t.constructor={})[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},48547:function(e,t,r){"use strict";var n=r(33968);e.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){throw 1},1)}))}},54637:function(e,t,r){var n=r(52384),o=r(96270),i=r(95341)("species");e.exports=function(e,t){var r;return o(e)&&("function"!=typeof(r=e.constructor)||r!==Array&&!o(r.prototype)?n(r)&&null===(r=r[i])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===t?0:t)}},70184:function(e,t,r){var n=r(95341)("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[n]=function(){return this},Array.from(a,(function(){throw 2}))}catch(s){}e.exports=function(e,t){if(!t&&!o)return!1;var r=!1;try{var i={};i[n]=function(){return{next:function(){return{done:r=!0}}}},e(i)}catch(s){}return r}},29557:function(e){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},46109:function(e,t,r){var n=r(26636),o=r(29557),i=r(95341)("toStringTag"),a="Arguments"==o(function(){return arguments}());e.exports=n?o:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(r){}}(t=Object(e),i))?r:a?o(t):"Object"==(n=o(t))&&"function"==typeof t.callee?"Arguments":n}},32944:function(e,t,r){var n=r(58603),o=r(75441),i=r(8085),a=r(29276);e.exports=function(e,t){for(var r=o(t),s=a.f,u=i.f,c=0;c<r.length;c++){var f=r[c];n(e,f)||s(e,f,u(t,f))}}},23592:function(e,t,r){var n=r(96936),o=r(29276),i=r(46346);e.exports=n?function(e,t,r){return o.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},46346:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},59136:function(e,t,r){"use strict";var n=r(84921),o=r(29276),i=r(46346);e.exports=function(e,t,r){var a=n(t);a in e?o.f(e,a,i(0,r)):e[a]=r}},86235:function(e,t,r){var n=r(3553),o=r(58603),i=r(46135),a=r(29276).f;e.exports=function(e){var t=n.Symbol||(n.Symbol={});o(t,e)||a(t,e,{value:i.f(e)})}},96936:function(e,t,r){var n=r(33968);e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},59014:function(e,t,r){var n=r(95612),o=r(52384),i=n.document,a=o(i)&&o(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},54995:function(e){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},96750:function(e){e.exports="object"==typeof window},3094:function(e,t,r){var n=r(28052);e.exports=/(?:iphone|ipod|ipad).*applewebkit/i.test(n)},80841:function(e,t,r){var n=r(29557),o=r(95612);e.exports="process"==n(o.process)},91524:function(e,t,r){var n=r(28052);e.exports=/web0s(?!.*chrome)/i.test(n)},28052:function(e,t,r){var n=r(59688);e.exports=n("navigator","userAgent")||""},85303:function(e,t,r){var n,o,i=r(95612),a=r(28052),s=i.process,u=s&&s.versions,c=u&&u.v8;c?o=(n=c.split("."))[0]<4?1:n[0]+n[1]:a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(o=n[1]),e.exports=o&&+o},46068:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},31884:function(e,t,r){var n=r(95612),o=r(8085).f,i=r(23592),a=r(54004),s=r(40759),u=r(32944),c=r(21720);e.exports=function(e,t){var r,f,l,p,d,v=e.target,h=e.global,g=e.stat;if(r=h?n:g?n[v]||s(v,{}):(n[v]||{}).prototype)for(f in t){if(p=t[f],l=e.noTargetGet?(d=o(r,f))&&d.value:r[f],!c(h?f:v+(g?".":"#")+f,e.forced)&&void 0!==l){if(typeof p===typeof l)continue;u(p,l)}(e.sham||l&&l.sham)&&i(p,"sham",!0),a(r,f,p,e)}}},33968:function(e){e.exports=function(e){try{return!!e()}catch(t){return!0}}},11117:function(e,t,r){var n=r(14139);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},59688:function(e,t,r){var n=r(3553),o=r(95612),i=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?i(n[e])||i(o[e]):n[e]&&n[e][t]||o[e]&&o[e][t]}},21652:function(e,t,r){var n=r(46109),o=r(76836),i=r(95341)("iterator");e.exports=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[n(e)]}},95612:function(e,t,r){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||Function("return this")()},58603:function(e,t,r){var n=r(27095),o={}.hasOwnProperty;e.exports=function(e,t){return o.call(n(e),t)}},44730:function(e){e.exports={}},37933:function(e,t,r){var n=r(95612);e.exports=function(e,t){var r=n.console;r&&r.error&&(1===arguments.length?r.error(e):r.error(e,t))}},70431:function(e,t,r){var n=r(59688);e.exports=n("document","documentElement")},39037:function(e,t,r){var n=r(96936),o=r(33968),i=r(59014);e.exports=!n&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},63283:function(e,t,r){var n=r(33968),o=r(29557),i="".split;e.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?i.call(e,""):Object(e)}:Object},34960:function(e,t,r){var n=r(37751),o=Function.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=function(e){return o.call(e)}),e.exports=n.inspectSource},88400:function(e,t,r){var n,o,i,a=r(88334),s=r(95612),u=r(52384),c=r(23592),f=r(58603),l=r(37751),p=r(66585),d=r(44730),v="Object already initialized",h=s.WeakMap;if(a||l.state){var g=l.state||(l.state=new h),y=g.get,E=g.has,_=g.set;n=function(e,t){if(E.call(g,e))throw new TypeError(v);return t.facade=e,_.call(g,e,t),t},o=function(e){return y.call(g,e)||{}},i=function(e){return E.call(g,e)}}else{var m=p("state");d[m]=!0,n=function(e,t){if(f(e,m))throw new TypeError(v);return t.facade=e,c(e,m,t),t},o=function(e){return f(e,m)?e[m]:{}},i=function(e){return f(e,m)}}e.exports={set:n,get:o,has:i,enforce:function(e){return i(e)?o(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!u(t)||(r=o(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}}}},59857:function(e,t,r){var n=r(95341),o=r(76836),i=n("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||a[i]===e)}},96270:function(e,t,r){var n=r(29557);e.exports=Array.isArray||function(e){return"Array"==n(e)}},21720:function(e,t,r){var n=r(33968),o=/#|\.prototype\./,i=function(e,t){var r=s[a(e)];return r==c||r!=u&&("function"==typeof t?n(t):!!t)},a=i.normalize=function(e){return String(e).replace(o,".").toLowerCase()},s=i.data={},u=i.NATIVE="N",c=i.POLYFILL="P";e.exports=i},52384:function(e){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},26104:function(e){e.exports=!1},97429:function(e,t,r){var n=r(18919),o=r(59857),i=r(28821),a=r(11117),s=r(21652),u=r(20247),c=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,r){var f,l,p,d,v,h,g,y=r&&r.that,E=!(!r||!r.AS_ENTRIES),_=!(!r||!r.IS_ITERATOR),m=!(!r||!r.INTERRUPTED),O=a(t,y,1+E+m),b=function(e){return f&&u(f),new c(!0,e)},I=function(e){return E?(n(e),m?O(e[0],e[1],b):O(e[0],e[1])):m?O(e,b):O(e)};if(_)f=e;else{if("function"!=typeof(l=s(e)))throw TypeError("Target is not iterable");if(o(l)){for(p=0,d=i(e.length);d>p;p++)if((v=I(e[p]))&&v instanceof c)return v;return new c(!1)}f=l.call(e)}for(h=f.next;!(g=h.call(f)).done;){try{v=I(g.value)}catch(T){throw u(f),T}if("object"==typeof v&&v&&v instanceof c)return v}return new c(!1)}},20247:function(e,t,r){var n=r(18919);e.exports=function(e){var t=e.return;if(void 0!==t)return n(t.call(e)).value}},76836:function(e){e.exports={}},72354:function(e,t,r){var n,o,i,a,s,u,c,f,l=r(95612),p=r(8085).f,d=r(66020).set,v=r(3094),h=r(91524),g=r(80841),y=l.MutationObserver||l.WebKitMutationObserver,E=l.document,_=l.process,m=l.Promise,O=p(l,"queueMicrotask"),b=O&&O.value;b||(n=function(){var e,t;for(g&&(e=_.domain)&&e.exit();o;){t=o.fn,o=o.next;try{t()}catch(r){throw o?a():i=void 0,r}}i=void 0,e&&e.enter()},v||g||h||!y||!E?m&&m.resolve?((c=m.resolve(void 0)).constructor=m,f=c.then,a=function(){f.call(c,n)}):a=g?function(){_.nextTick(n)}:function(){d.call(l,n)}:(s=!0,u=E.createTextNode(""),new y(n).observe(u,{characterData:!0}),a=function(){u.data=s=!s})),e.exports=b||function(e){var t={fn:e,next:void 0};i&&(i.next=t),o||(o=t,a()),i=t}},85021:function(e,t,r){var n=r(95612);e.exports=n.Promise},55688:function(e,t,r){var n=r(85303),o=r(33968);e.exports=!!Object.getOwnPropertySymbols&&!o((function(){return!String(Symbol())||!Symbol.sham&&n&&n<41}))},88334:function(e,t,r){var n=r(95612),o=r(34960),i=n.WeakMap;e.exports="function"===typeof i&&/native code/.test(o(i))},93318:function(e,t,r){"use strict";var n=r(14139),o=function(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n})),this.resolve=n(t),this.reject=n(r)};e.exports.f=function(e){return new o(e)}},75469:function(e,t,r){var n,o=r(18919),i=r(4609),a=r(46068),s=r(44730),u=r(70431),c=r(59014),f=r(66585),l=f("IE_PROTO"),p=function(){},d=function(e){return"<script>"+e+"</"+"script>"},v=function(){try{n=document.domain&&new ActiveXObject("htmlfile")}catch(t){}v=n?function(e){e.write(d("")),e.close();var t=e.parentWindow.Object;return e=null,t}(n):function(){var e,t=c("iframe");return t.style.display="none",u.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(d("document.F=Object")),e.close(),e.F}();for(var e=a.length;e--;)delete v.prototype[a[e]];return v()};s[l]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(p.prototype=o(e),r=new p,p.prototype=null,r[l]=e):r=v(),void 0===t?r:i(r,t)}},4609:function(e,t,r){var n=r(96936),o=r(29276),i=r(18919),a=r(85459);e.exports=n?Object.defineProperties:function(e,t){i(e);for(var r,n=a(t),s=n.length,u=0;s>u;)o.f(e,r=n[u++],t[r]);return e}},29276:function(e,t,r){var n=r(96936),o=r(39037),i=r(18919),a=r(84921),s=Object.defineProperty;t.f=n?s:function(e,t,r){if(i(e),t=a(t,!0),i(r),o)try{return s(e,t,r)}catch(n){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},8085:function(e,t,r){var n=r(96936),o=r(81230),i=r(46346),a=r(61736),s=r(84921),u=r(58603),c=r(39037),f=Object.getOwnPropertyDescriptor;t.f=n?f:function(e,t){if(e=a(e),t=s(t,!0),c)try{return f(e,t)}catch(r){}if(u(e,t))return i(!o.f.call(e,t),e[t])}},12891:function(e,t,r){var n=r(61736),o=r(81770).f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==i.call(e)?function(e){try{return o(e)}catch(t){return a.slice()}}(e):o(n(e))}},81770:function(e,t,r){var n=r(83426),o=r(46068).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},28092:function(e,t){t.f=Object.getOwnPropertySymbols},83426:function(e,t,r){var n=r(58603),o=r(61736),i=r(55534).indexOf,a=r(44730);e.exports=function(e,t){var r,s=o(e),u=0,c=[];for(r in s)!n(a,r)&&n(s,r)&&c.push(r);for(;t.length>u;)n(s,r=t[u++])&&(~i(c,r)||c.push(r));return c}},85459:function(e,t,r){var n=r(83426),o=r(46068);e.exports=Object.keys||function(e){return n(e,o)}},81230:function(e,t){"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&&!r.call({1:2},1);t.f=o?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},78423:function(e,t,r){var n=r(18919),o=r(94789);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),t=r instanceof Array}catch(i){}return function(r,i){return n(r),o(i),t?e.call(r,i):r.__proto__=i,r}}():void 0)},40104:function(e,t,r){"use strict";var n=r(26636),o=r(46109);e.exports=n?{}.toString:function(){return"[object "+o(this)+"]"}},75441:function(e,t,r){var n=r(59688),o=r(81770),i=r(28092),a=r(18919);e.exports=n("Reflect","ownKeys")||function(e){var t=o.f(a(e)),r=i.f;return r?t.concat(r(e)):t}},3553:function(e,t,r){var n=r(95612);e.exports=n},58890:function(e){e.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},28499:function(e,t,r){var n=r(18919),o=r(52384),i=r(93318);e.exports=function(e,t){if(n(e),o(t)&&t.constructor===e)return t;var r=i.f(e);return(0,r.resolve)(t),r.promise}},31954:function(e,t,r){var n=r(54004);e.exports=function(e,t,r){for(var o in t)n(e,o,t[o],r);return e}},54004:function(e,t,r){var n=r(95612),o=r(23592),i=r(58603),a=r(40759),s=r(34960),u=r(88400),c=u.get,f=u.enforce,l=String(String).split("String");(e.exports=function(e,t,r,s){var u,c=!!s&&!!s.unsafe,p=!!s&&!!s.enumerable,d=!!s&&!!s.noTargetGet;"function"==typeof r&&("string"!=typeof t||i(r,"name")||o(r,"name",t),(u=f(r)).source||(u.source=l.join("string"==typeof t?t:""))),e!==n?(c?!d&&e[t]&&(p=!0):delete e[t],p?e[t]=r:o(e,t,r)):p?e[t]=r:a(t,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||s(this)}))},82555:function(e){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on "+e);return e}},40759:function(e,t,r){var n=r(95612),o=r(23592);e.exports=function(e,t){try{o(n,e,t)}catch(r){n[e]=t}return t}},16233:function(e,t,r){"use strict";var n=r(59688),o=r(29276),i=r(95341),a=r(96936),s=i("species");e.exports=function(e){var t=n(e),r=o.f;a&&t&&!t[s]&&r(t,s,{configurable:!0,get:function(){return this}})}},26099:function(e,t,r){var n=r(29276).f,o=r(58603),i=r(95341)("toStringTag");e.exports=function(e,t,r){e&&!o(e=r?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},66585:function(e,t,r){var n=r(99272),o=r(76152),i=n("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},37751:function(e,t,r){var n=r(95612),o=r(40759),i="__core-js_shared__",a=n[i]||o(i,{});e.exports=a},99272:function(e,t,r){var n=r(26104),o=r(37751);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.12.1",mode:n?"pure":"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})},20728:function(e,t,r){var n=r(18919),o=r(14139),i=r(95341)("species");e.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||void 0==(r=n(a)[i])?t:o(r)}},66020:function(e,t,r){var n,o,i,a=r(95612),s=r(33968),u=r(11117),c=r(70431),f=r(59014),l=r(3094),p=r(80841),d=a.location,v=a.setImmediate,h=a.clearImmediate,g=a.process,y=a.MessageChannel,E=a.Dispatch,_=0,m={},O="onreadystatechange",b=function(e){if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},I=function(e){return function(){b(e)}},T=function(e){b(e.data)},R=function(e){a.postMessage(e+"",d.protocol+"//"+d.host)};v&&h||(v=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return m[++_]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},n(_),_},h=function(e){delete m[e]},p?n=function(e){g.nextTick(I(e))}:E&&E.now?n=function(e){E.now(I(e))}:y&&!l?(i=(o=new y).port2,o.port1.onmessage=T,n=u(i.postMessage,i,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts&&d&&"file:"!==d.protocol&&!s(R)?(n=R,a.addEventListener("message",T,!1)):n=O in f("script")?function(e){c.appendChild(f("script")).onreadystatechange=function(){c.removeChild(this),b(e)}}:function(e){setTimeout(I(e),0)}),e.exports={set:v,clear:h}},11926:function(e,t,r){var n=r(59486),o=Math.max,i=Math.min;e.exports=function(e,t){var r=n(e);return r<0?o(r+t,0):i(r,t)}},61736:function(e,t,r){var n=r(63283),o=r(82555);e.exports=function(e){return n(o(e))}},59486:function(e){var t=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:t)(e)}},28821:function(e,t,r){var n=r(59486),o=Math.min;e.exports=function(e){return e>0?o(n(e),9007199254740991):0}},27095:function(e,t,r){var n=r(82555);e.exports=function(e){return Object(n(e))}},84921:function(e,t,r){var n=r(52384);e.exports=function(e,t){if(!n(e))return e;var r,o;if(t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;if("function"==typeof(r=e.valueOf)&&!n(o=r.call(e)))return o;if(!t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},26636:function(e,t,r){var n={};n[r(95341)("toStringTag")]="z",e.exports="[object z]"===String(n)},76152:function(e){var t=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+r).toString(36)}},82543:function(e,t,r){var n=r(55688);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},46135:function(e,t,r){var n=r(95341);t.f=n},95341:function(e,t,r){var n=r(95612),o=r(99272),i=r(58603),a=r(76152),s=r(55688),u=r(82543),c=o("wks"),f=n.Symbol,l=u?f:f&&f.withoutSetter||a;e.exports=function(e){return i(c,e)&&(s||"string"==typeof c[e])||(s&&i(f,e)?c[e]=f[e]:c[e]=l("Symbol."+e)),c[e]}},3128:function(e,t,r){"use strict";var n=r(31884),o=r(50246).filter;n({target:"Array",proto:!0,forced:!r(46091)("filter")},{filter:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},52937:function(e,t,r){"use strict";var n=r(31884),o=r(65024);n({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},3659:function(e,t,r){var n=r(31884),o=r(96936);n({target:"Object",stat:!0,forced:!o,sham:!o},{defineProperties:r(4609)})},53886:function(e,t,r){var n=r(31884),o=r(96936);n({target:"Object",stat:!0,forced:!o,sham:!o},{defineProperty:r(29276).f})},79416:function(e,t,r){var n=r(31884),o=r(33968),i=r(61736),a=r(8085).f,s=r(96936),u=o((function(){a(1)}));n({target:"Object",stat:!0,forced:!s||u,sham:!s},{getOwnPropertyDescriptor:function(e,t){return a(i(e),t)}})},30834:function(e,t,r){var n=r(31884),o=r(96936),i=r(75441),a=r(61736),s=r(8085),u=r(59136);n({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(e){for(var t,r,n=a(e),o=s.f,c=i(n),f={},l=0;c.length>l;)void 0!==(r=o(n,t=c[l++]))&&u(f,t,r);return f}})},49405:function(e,t,r){var n=r(31884),o=r(27095),i=r(85459);n({target:"Object",stat:!0,forced:r(33968)((function(){i(1)}))},{keys:function(e){return i(o(e))}})},77530:function(e,t,r){var n=r(26636),o=r(54004),i=r(40104);n||o(Object.prototype,"toString",i,{unsafe:!0})},13958:function(e,t,r){"use strict";var n,o,i,a,s=r(31884),u=r(26104),c=r(95612),f=r(59688),l=r(85021),p=r(54004),d=r(31954),v=r(78423),h=r(26099),g=r(16233),y=r(52384),E=r(14139),_=r(79802),m=r(34960),O=r(97429),b=r(70184),I=r(20728),T=r(66020).set,R=r(72354),A=r(28499),S=r(37933),N=r(93318),w=r(58890),P=r(88400),C=r(21720),L=r(95341),x=r(96750),U=r(80841),D=r(85303),j=L("species"),M="Promise",V=P.get,k=P.set,F=P.getterFor(M),B=l&&l.prototype,G=l,K=B,H=c.TypeError,W=c.document,z=c.process,Y=N.f,q=Y,J=!!(W&&W.createEvent&&c.dispatchEvent),X="function"==typeof PromiseRejectionEvent,Z="unhandledrejection",Q=!1,$=C(M,(function(){var e=m(G)!==String(G);if(!e&&66===D)return!0;if(u&&!K.finally)return!0;if(D>=51&&/native code/.test(G))return!1;var t=new G((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};return(t.constructor={})[j]=r,!(Q=t.then((function(){}))instanceof r)||!e&&x&&!X})),ee=$||!b((function(e){G.all(e).catch((function(){}))})),te=function(e){var t;return!(!y(e)||"function"!=typeof(t=e.then))&&t},re=function(e,t){if(!e.notified){e.notified=!0;var r=e.reactions;R((function(){for(var n=e.value,o=1==e.state,i=0;r.length>i;){var a,s,u,c=r[i++],f=o?c.ok:c.fail,l=c.resolve,p=c.reject,d=c.domain;try{f?(o||(2===e.rejection&&ae(e),e.rejection=1),!0===f?a=n:(d&&d.enter(),a=f(n),d&&(d.exit(),u=!0)),a===c.promise?p(H("Promise-chain cycle")):(s=te(a))?s.call(a,l,p):l(a)):p(n)}catch(v){d&&!u&&d.exit(),p(v)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&oe(e)}))}},ne=function(e,t,r){var n,o;J?((n=W.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),c.dispatchEvent(n)):n={promise:t,reason:r},!X&&(o=c["on"+e])?o(n):e===Z&&S("Unhandled promise rejection",r)},oe=function(e){T.call(c,(function(){var t,r=e.facade,n=e.value;if(ie(e)&&(t=w((function(){U?z.emit("unhandledRejection",n,r):ne(Z,r,n)})),e.rejection=U||ie(e)?2:1,t.error))throw t.value}))},ie=function(e){return 1!==e.rejection&&!e.parent},ae=function(e){T.call(c,(function(){var t=e.facade;U?z.emit("rejectionHandled",t):ne("rejectionhandled",t,e.value)}))},se=function(e,t,r){return function(n){e(t,n,r)}},ue=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=2,re(e,!0))},ce=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw H("Promise can't be resolved itself");var n=te(t);n?R((function(){var r={done:!1};try{n.call(t,se(ce,r,e),se(ue,r,e))}catch(o){ue(r,o,e)}})):(e.value=t,e.state=1,re(e,!1))}catch(o){ue({done:!1},o,e)}}};if($&&(K=(G=function(e){_(this,G,M),E(e),n.call(this);var t=V(this);try{e(se(ce,t),se(ue,t))}catch(r){ue(t,r)}}).prototype,(n=function(e){k(this,{type:M,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=d(K,{then:function(e,t){var r=F(this),n=Y(I(this,G));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=U?z.domain:void 0,r.parent=!0,r.reactions.push(n),0!=r.state&&re(r,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new n,t=V(e);this.promise=e,this.resolve=se(ce,t),this.reject=se(ue,t)},N.f=Y=function(e){return e===G||e===i?new o(e):q(e)},!u&&"function"==typeof l&&B!==Object.prototype)){a=B.then,Q||(p(B,"then",(function(e,t){var r=this;return new G((function(e,t){a.call(r,e,t)})).then(e,t)}),{unsafe:!0}),p(B,"catch",K.catch,{unsafe:!0}));try{delete B.constructor}catch(fe){}v&&v(B,K)}s({global:!0,wrap:!0,forced:$},{Promise:G}),h(G,M,!1,!0),g(M),i=f(M),s({target:M,stat:!0,forced:$},{reject:function(e){var t=Y(this);return t.reject.call(void 0,e),t.promise}}),s({target:M,stat:!0,forced:u||$},{resolve:function(e){return A(u&&this===i?G:this,e)}}),s({target:M,stat:!0,forced:ee},{all:function(e){var t=this,r=Y(t),n=r.resolve,o=r.reject,i=w((function(){var r=E(t.resolve),i=[],a=0,s=1;O(e,(function(e){var u=a++,c=!1;i.push(void 0),s++,r.call(t,e).then((function(e){c||(c=!0,i[u]=e,--s||n(i))}),o)})),--s||n(i)}));return i.error&&o(i.value),r.promise},race:function(e){var t=this,r=Y(t),n=r.reject,o=w((function(){var o=E(t.resolve);O(e,(function(e){o.call(t,e).then(r.resolve,n)}))}));return o.error&&n(o.value),r.promise}})},31402:function(e,t,r){"use strict";var n=r(31884),o=r(95612),i=r(59688),a=r(26104),s=r(96936),u=r(55688),c=r(82543),f=r(33968),l=r(58603),p=r(96270),d=r(52384),v=r(18919),h=r(27095),g=r(61736),y=r(84921),E=r(46346),_=r(75469),m=r(85459),O=r(81770),b=r(12891),I=r(28092),T=r(8085),R=r(29276),A=r(81230),S=r(23592),N=r(54004),w=r(99272),P=r(66585),C=r(44730),L=r(76152),x=r(95341),U=r(46135),D=r(86235),j=r(26099),M=r(88400),V=r(50246).forEach,k=P("hidden"),F="Symbol",B=x("toPrimitive"),G=M.set,K=M.getterFor(F),H=Object.prototype,W=o.Symbol,z=i("JSON","stringify"),Y=T.f,q=R.f,J=b.f,X=A.f,Z=w("symbols"),Q=w("op-symbols"),$=w("string-to-symbol-registry"),ee=w("symbol-to-string-registry"),te=w("wks"),re=o.QObject,ne=!re||!re.prototype||!re.prototype.findChild,oe=s&&f((function(){return 7!=_(q({},"a",{get:function(){return q(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=Y(H,t);n&&delete H[t],q(e,t,r),n&&e!==H&&q(H,t,n)}:q,ie=function(e,t){var r=Z[e]=_(W.prototype);return G(r,{type:F,tag:e,description:t}),s||(r.description=t),r},ae=c?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof W},se=function(e,t,r){e===H&&se(Q,t,r),v(e);var n=y(t,!0);return v(r),l(Z,n)?(r.enumerable?(l(e,k)&&e[k][n]&&(e[k][n]=!1),r=_(r,{enumerable:E(0,!1)})):(l(e,k)||q(e,k,E(1,{})),e[k][n]=!0),oe(e,n,r)):q(e,n,r)},ue=function(e,t){v(e);var r=g(t),n=m(r).concat(pe(r));return V(n,(function(t){s&&!ce.call(r,t)||se(e,t,r[t])})),e},ce=function(e){var t=y(e,!0),r=X.call(this,t);return!(this===H&&l(Z,t)&&!l(Q,t))&&(!(r||!l(this,t)||!l(Z,t)||l(this,k)&&this[k][t])||r)},fe=function(e,t){var r=g(e),n=y(t,!0);if(r!==H||!l(Z,n)||l(Q,n)){var o=Y(r,n);return!o||!l(Z,n)||l(r,k)&&r[k][n]||(o.enumerable=!0),o}},le=function(e){var t=J(g(e)),r=[];return V(t,(function(e){l(Z,e)||l(C,e)||r.push(e)})),r},pe=function(e){var t=e===H,r=J(t?Q:g(e)),n=[];return V(r,(function(e){!l(Z,e)||t&&!l(H,e)||n.push(Z[e])})),n};(u||(W=function(){if(this instanceof W)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=L(e),r=function(e){this===H&&r.call(Q,e),l(this,k)&&l(this[k],t)&&(this[k][t]=!1),oe(this,t,E(1,e))};return s&&ne&&oe(H,t,{configurable:!0,set:r}),ie(t,e)},N(W.prototype,"toString",(function(){return K(this).tag})),N(W,"withoutSetter",(function(e){return ie(L(e),e)})),A.f=ce,R.f=se,T.f=fe,O.f=b.f=le,I.f=pe,U.f=function(e){return ie(x(e),e)},s&&(q(W.prototype,"description",{configurable:!0,get:function(){return K(this).description}}),a||N(H,"propertyIsEnumerable",ce,{unsafe:!0}))),n({global:!0,wrap:!0,forced:!u,sham:!u},{Symbol:W}),V(m(te),(function(e){D(e)})),n({target:F,stat:!0,forced:!u},{for:function(e){var t=String(e);if(l($,t))return $[t];var r=W(t);return $[t]=r,ee[r]=t,r},keyFor:function(e){if(!ae(e))throw TypeError(e+" is not a symbol");if(l(ee,e))return ee[e]},useSetter:function(){ne=!0},useSimple:function(){ne=!1}}),n({target:"Object",stat:!0,forced:!u,sham:!s},{create:function(e,t){return void 0===t?_(e):ue(_(e),t)},defineProperty:se,defineProperties:ue,getOwnPropertyDescriptor:fe}),n({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:le,getOwnPropertySymbols:pe}),n({target:"Object",stat:!0,forced:f((function(){I.f(1)}))},{getOwnPropertySymbols:function(e){return I.f(h(e))}}),z)&&n({target:"JSON",stat:!0,forced:!u||f((function(){var e=W();return"[null]"!=z([e])||"{}"!=z({a:e})||"{}"!=z(Object(e))}))},{stringify:function(e,t,r){for(var n,o=[e],i=1;arguments.length>i;)o.push(arguments[i++]);if(n=t,(d(t)||void 0!==e)&&!ae(e))return p(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!ae(t))return t}),o[1]=t,z.apply(null,o)}});W.prototype[B]||S(W.prototype,B,W.prototype.valueOf),j(W,F),C[k]=!0},81417:function(e,t,r){var n=r(95612),o=r(54995),i=r(65024),a=r(23592);for(var s in o){var u=n[s],c=u&&u.prototype;if(c&&c.forEach!==i)try{a(c,"forEach",i)}catch(f){c.forEach=i}}},53949:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(13196);var o=function(){function e(){this.errorCount=0}return e.prototype.getDelay=function(){return 0===this.errorCount?0:1e3*n.BACKOFF_BASE_WAIT_SECONDS_BY_ERROR_COUNT[Math.min(n.BACKOFF_BASE_WAIT_SECONDS_BY_ERROR_COUNT.length-1,this.errorCount)]+Math.round(1e3*Math.random())},e.prototype.countError=function(){this.errorCount<n.BACKOFF_BASE_WAIT_SECONDS_BY_ERROR_COUNT.length-1&&this.errorCount++},e.prototype.reset=function(){this.errorCount=0},e}();t.default=o},20731:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(80064),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.makeGetRequest=function(e,t){return i.makeGetRequest(e,t)},t.prototype.getConfigDefaults=function(){return{autoUpdate:!1}},t}(o(r(20377)).default);t.default=a},80064:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(13196),o=r(98125).getLogger("DatafileManager");t.makeGetRequest=function(e,t){var r=new XMLHttpRequest,i=new Promise((function(i,a){r.open("GET",e,!0),function(e,t){Object.keys(e).forEach((function(r){var n=e[r];t.setRequestHeader(r,n)}))}(t,r),r.onreadystatechange=function(){if(4===r.readyState){if(0===r.status)return void a(new Error("Request error"));var e=function(e){var t=e.getAllResponseHeaders();if(null===t)return{};var r=t.split("\r\n"),n={};return r.forEach((function(e){var t=e.indexOf(": ");if(t>-1){var r=e.slice(0,t),o=e.slice(t+2);o.length>0&&(n[r]=o)}})),n}(r),t={statusCode:r.status,body:r.responseText,headers:e};i(t)}},r.timeout=n.REQUEST_TIMEOUT_MS,r.ontimeout=function(){o.error("Request timed out")},r.send()}));return{responsePromise:i,abort:function(){r.abort()}}}},13196:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_UPDATE_INTERVAL=3e5,t.MIN_UPDATE_INTERVAL=1e3,t.DEFAULT_URL_TEMPLATE="https://cdn.optimizely.com/datafiles/%s.json",t.DEFAULT_AUTHENTICATED_URL_TEMPLATE="https://config.optimizely.com/datafiles/auth/%s.json",t.BACKOFF_BASE_WAIT_SECONDS_BY_ERROR_COUNT=[0,8,16,32,64,128,256,512],t.REQUEST_TIMEOUT_MS=6e4},10181:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.listeners={},this.listenerId=1}return e.prototype.on=function(e,t){var r=this;this.listeners[e]||(this.listeners[e]={});var n=String(this.listenerId);return this.listenerId++,this.listeners[e][n]=t,function(){r.listeners[e]&&delete r.listeners[e][n]}},e.prototype.emit=function(e,t){var r=this.listeners[e];r&&Object.keys(r).forEach((function(e){(0,r[e])(t)}))},e.prototype.removeAllListeners=function(){this.listeners={}},e}();t.default=r},20377:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(98125),a=r(27378),s=o(r(10181)),u=r(13196),c=o(r(53949)),f=i.getLogger("DatafileManager");function l(e){return e>=200&&e<400}var p={get:function(){return Promise.resolve(null)},set:function(){return Promise.resolve()},contains:function(){return Promise.resolve(!1)},remove:function(){return Promise.resolve()}},d=function(){function e(e){var t=this,r=n({},this.getConfigDefaults(),e),o=r.datafile,i=r.autoUpdate,l=void 0!==i&&i,d=r.sdkKey,v=r.updateInterval,h=void 0===v?u.DEFAULT_UPDATE_INTERVAL:v,g=r.urlTemplate,y=void 0===g?u.DEFAULT_URL_TEMPLATE:g,E=r.cache,_=void 0===E?p:E;this.cache=_,this.cacheKey="opt-datafile-"+d,this.isReadyPromiseSettled=!1,this.readyPromiseResolver=function(){},this.readyPromiseRejecter=function(){},this.readyPromise=new Promise((function(e,r){t.readyPromiseResolver=e,t.readyPromiseRejecter=r})),o?(this.currentDatafile=o,d||this.resolveReadyPromise()):this.currentDatafile=null,this.isStarted=!1,this.datafileUrl=a.sprintf(y,d),this.emitter=new s.default,this.autoUpdate=l,!function(e){return e>=u.MIN_UPDATE_INTERVAL}(h)?(f.warn("Invalid updateInterval %s, defaulting to %s",h,u.DEFAULT_UPDATE_INTERVAL),this.updateInterval=u.DEFAULT_UPDATE_INTERVAL):this.updateInterval=h,this.currentTimeout=null,this.currentRequest=null,this.backoffController=new c.default,this.syncOnCurrentRequestComplete=!1}return e.prototype.get=function(){return this.currentDatafile},e.prototype.start=function(){this.isStarted||(f.debug("Datafile manager started"),this.isStarted=!0,this.backoffController.reset(),this.setDatafileFromCacheIfAvailable(),this.syncDatafile())},e.prototype.stop=function(){return f.debug("Datafile manager stopped"),this.isStarted=!1,this.currentTimeout&&(clearTimeout(this.currentTimeout),this.currentTimeout=null),this.emitter.removeAllListeners(),this.currentRequest&&(this.currentRequest.abort(),this.currentRequest=null),Promise.resolve()},e.prototype.onReady=function(){return this.readyPromise},e.prototype.on=function(e,t){return this.emitter.on(e,t)},e.prototype.onRequestRejected=function(e){this.isStarted&&(this.backoffController.countError(),e instanceof Error?f.error("Error fetching datafile: %s",e.message,e):"string"===typeof e?f.error("Error fetching datafile: %s",e):f.error("Error fetching datafile"))},e.prototype.onRequestResolved=function(e){if(this.isStarted){"undefined"!==typeof e.statusCode&&l(e.statusCode)?this.backoffController.reset():this.backoffController.countError(),this.trySavingLastModified(e.headers);var t=this.getNextDatafileFromResponse(e);if(null!==t)if(f.info("Updating datafile from response"),this.currentDatafile=t,this.cache.set(this.cacheKey,t),this.isReadyPromiseSettled){var r={datafile:t};this.emitter.emit("update",r)}else this.resolveReadyPromise()}},e.prototype.onRequestComplete=function(){this.isStarted&&(this.currentRequest=null,this.isReadyPromiseSettled||this.autoUpdate||this.rejectReadyPromise(new Error("Failed to become ready")),this.autoUpdate&&this.syncOnCurrentRequestComplete&&this.syncDatafile(),this.syncOnCurrentRequestComplete=!1)},e.prototype.syncDatafile=function(){var e=this,t={};this.lastResponseLastModified&&(t["if-modified-since"]=this.lastResponseLastModified),f.debug("Making datafile request to url %s with headers: %s",this.datafileUrl,(function(){return JSON.stringify(t)})),this.currentRequest=this.makeGetRequest(this.datafileUrl,t);var r=function(){e.onRequestComplete()};this.currentRequest.responsePromise.then((function(t){e.onRequestResolved(t)}),(function(t){e.onRequestRejected(t)})).then(r,r),this.autoUpdate&&this.scheduleNextUpdate()},e.prototype.resolveReadyPromise=function(){this.readyPromiseResolver(),this.isReadyPromiseSettled=!0},e.prototype.rejectReadyPromise=function(e){this.readyPromiseRejecter(e),this.isReadyPromiseSettled=!0},e.prototype.scheduleNextUpdate=function(){var e=this,t=this.backoffController.getDelay(),r=Math.max(t,this.updateInterval);f.debug("Scheduling sync in %s ms",r),this.currentTimeout=setTimeout((function(){e.currentRequest?e.syncOnCurrentRequestComplete=!0:e.syncDatafile()}),r)},e.prototype.getNextDatafileFromResponse=function(e){return f.debug("Response status code: %s",e.statusCode),"undefined"===typeof e.statusCode||304===e.statusCode?null:l(e.statusCode)?this.tryParsingBodyAsJSON(e.body):null},e.prototype.tryParsingBodyAsJSON=function(e){var t;try{t=JSON.parse(e)}catch(n){return f.error("Error parsing response body: %s",n.message,n),null}var r=null;return"object"===typeof t&&null!==t?r=t:f.error("Error parsing response body: was not an object"),r},e.prototype.trySavingLastModified=function(e){var t=e["last-modified"]||e["Last-Modified"];"undefined"!==typeof t&&(this.lastResponseLastModified=t,f.debug("Saved last modified header value from response: %s",this.lastResponseLastModified))},e.prototype.setDatafileFromCacheIfAvailable=function(){var e=this;this.cache.get(this.cacheKey).then((function(t){e.isStarted&&!e.isReadyPromiseSettled&&t&&(f.debug("Using datafile from cache"),e.currentDatafile=t,e.resolveReadyPromise())}))},e}();t.default=d},62002:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(20731);t.HttpPollingDatafileManager=n.default},24909:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(31459),o=r(98125),i=r(27378);t.DEFAULT_FLUSH_INTERVAL=3e4,t.DEFAULT_BATCH_SIZE=10;var a=o.getLogger("EventProcessor");t.validateAndGetFlushInterval=function(e){return e<=0&&(a.warn("Invalid flushInterval "+e+", defaulting to "+t.DEFAULT_FLUSH_INTERVAL),e=t.DEFAULT_FLUSH_INTERVAL),e},t.validateAndGetBatchSize=function(e){return(e=Math.floor(e))<1&&(a.warn("Invalid batchSize "+e+", defaulting to "+t.DEFAULT_BATCH_SIZE),e=t.DEFAULT_BATCH_SIZE),e=Math.max(1,e)},t.getQueue=function(e,t,r,o){return e>1?new n.DefaultEventQueue({flushInterval:t,maxQueueSize:e,sink:r,batchComparator:o}):new n.SingleEventQueue({sink:r})},t.sendEventNotification=function(e,t){e&&e.sendNotifications(i.NOTIFICATION_TYPES.LOG_EVENT,t)}},31459:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(98125).getLogger("EventProcessor"),o=function(){function e(e){var t=e.timeout,r=e.callback;this.timeout=Math.max(t,0),this.callback=r}return e.prototype.start=function(){this.timeoutId=setTimeout(this.callback,this.timeout)},e.prototype.refresh=function(){this.stop(),this.start()},e.prototype.stop=function(){this.timeoutId&&clearTimeout(this.timeoutId)},e}(),i=function(){function e(e){var t=e.sink;this.sink=t}return e.prototype.start=function(){},e.prototype.stop=function(){return Promise.resolve()},e.prototype.enqueue=function(e){this.sink([e])},e}();t.SingleEventQueue=i;var a=function(){function e(e){var t=e.flushInterval,r=e.maxQueueSize,n=e.sink,i=e.batchComparator;this.buffer=[],this.maxQueueSize=Math.max(r,1),this.sink=n,this.batchComparator=i,this.timer=new o({callback:this.flush.bind(this),timeout:t}),this.started=!1}return e.prototype.start=function(){this.started=!0},e.prototype.stop=function(){this.started=!1;var e=this.sink(this.buffer);return this.buffer=[],this.timer.stop(),e},e.prototype.enqueue=function(e){if(this.started){var t=this.buffer[0];t&&!this.batchComparator(t,e)&&this.flush(),0===this.buffer.length&&this.timer.refresh(),this.buffer.push(e),this.buffer.length>=this.maxQueueSize&&this.flush()}else n.warn("Queue is stopped, not accepting event")},e.prototype.flush=function(){this.sink(this.buffer),this.buffer=[],this.timer.stop()},e}();t.DefaultEventQueue=a},51074:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.areEventContextsEqual=function(e,t){var r=e.context,n=t.context;return r.accountId===n.accountId&&r.projectId===n.projectId&&r.clientName===n.clientName&&r.clientVersion===n.clientVersion&&r.revision===n.revision&&r.anonymizeIP===n.anonymizeIP&&r.botFiltering===n.botFiltering}},65001:function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(51074)),n(r(24909)),n(r(36896)),n(r(97168)),n(r(18994))},36896:function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=r(98125),i=r(90498),a=r(27378),s=o.getLogger("EventProcessor"),u=function(){function e(e){var t=e.eventDispatcher,r=e.store;this.dispatcher=t,this.store=r}return e.prototype.dispatchEvent=function(e,t){this.send({uuid:a.generateUUID(),timestamp:a.getTimestamp(),request:e},t)},e.prototype.sendPendingEvents=function(){var e=this,t=this.store.values();s.debug("Sending %s pending events from previous page",t.length),t.forEach((function(t){try{e.send(t,(function(){}))}catch(r){}}))},e.prototype.send=function(e,t){var r=this;this.store.set(e.uuid,e),this.dispatcher.dispatchEvent(e.request,(function(n){r.store.remove(e.uuid),t(n)}))},e}();t.PendingEventsDispatcher=u;var c=function(e){function t(t){var r=t.eventDispatcher;return e.call(this,{eventDispatcher:r,store:new i.LocalStorageStore({maxValues:100,key:"fs_optly_pending_events"})})||this}return n(t,e),t}(u);t.LocalStoragePendingEventsDispatcher=c},90498:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(27378),o=r(98125).getLogger("EventProcessor"),i=function(){function e(e){var t=e.key,r=e.maxValues,n=void 0===r?1e3:r;this.LS_KEY=t,this.maxValues=n}return e.prototype.get=function(e){return this.getMap()[e]||null},e.prototype.set=function(e,t){var r=this.getMap();r[e]=t,this.replace(r)},e.prototype.remove=function(e){var t=this.getMap();delete t[e],this.replace(t)},e.prototype.values=function(){return n.objectValues(this.getMap())},e.prototype.clear=function(){this.replace({})},e.prototype.replace=function(e){try{window.localStorage&&localStorage.setItem(this.LS_KEY,JSON.stringify(e)),this.clean()}catch(t){o.error(t)}},e.prototype.clean=function(){var e=this.getMap(),t=Object.keys(e),r=t.length-this.maxValues;if(!(r<1)){var n=t.map((function(t){return{key:t,value:e[t]}}));n.sort((function(e,t){return e.value.timestamp-t.value.timestamp}));for(var o=0;o<r;o++)delete e[n[o].key];this.replace(e)}},e.prototype.getMap=function(){try{var e=window.localStorage&&localStorage.getItem(this.LS_KEY);if(e)return JSON.parse(e)||{}}catch(t){o.error(t)}return{}},e}();t.LocalStorageStore=i},90522:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.reqsInFlightCount=0,this.reqsCompleteResolvers=[]}return e.prototype.trackRequest=function(e){var t=this;this.reqsInFlightCount++;var r=function(){t.reqsInFlightCount--,0===t.reqsInFlightCount&&(t.reqsCompleteResolvers.forEach((function(e){return e()})),t.reqsCompleteResolvers=[])};e.then(r,r)},e.prototype.onRequestsComplete=function(){var e=this;return new Promise((function(t){0===e.reqsInFlightCount?t():e.reqsCompleteResolvers.push(t)}))},e}();t.default=r},97168:function(e,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var n="$opt_bot_filtering";function o(e){var t=[],r=e[0];return e.forEach((function(e){if("conversion"===e.type||"impression"===e.type){var r=s(e);"impression"===e.type?r.snapshots.push(a(e)):"conversion"===e.type&&r.snapshots.push(i(e)),t.push(r)}})),{client_name:r.context.clientName,client_version:r.context.clientVersion,account_id:r.context.accountId,project_id:r.context.projectId,revision:r.context.revision,anonymize_ip:r.context.anonymizeIP,enrich_decisions:!0,visitors:t}}function i(e){var t=r({},e.tags);delete t.revenue,delete t.value;var n={entity_id:e.event.id,key:e.event.key,timestamp:e.timestamp,uuid:e.uuid};return e.tags&&(n.tags=e.tags),null!=e.value&&(n.value=e.value),null!=e.revenue&&(n.revenue=e.revenue),{events:[n]}}function a(e){var t=e.layer,r=e.experiment,n=e.variation,o=t?t.id:null;return{decisions:[{campaign_id:o,experiment_id:r?r.id:null,variation_id:n?n.id:null}],events:[{entity_id:o,timestamp:e.timestamp,key:"campaign_activated",uuid:e.uuid}]}}function s(e){var t={snapshots:[],visitor_id:e.user.id,attributes:[]};return e.user.attributes.forEach((function(e){t.attributes.push({entity_id:e.entityId,key:e.key,type:"custom",value:e.value})})),"boolean"===typeof e.context.botFiltering&&t.attributes.push({entity_id:n,key:n,type:"custom",value:e.context.botFiltering}),t}t.makeBatchedEventV1=o,t.buildImpressionEventV1=function(e){var t=s(e);return t.snapshots.push(a(e)),{client_name:e.context.clientName,client_version:e.context.clientVersion,account_id:e.context.accountId,project_id:e.context.projectId,revision:e.context.revision,anonymize_ip:e.context.anonymizeIP,enrich_decisions:!0,visitors:[t]}},t.buildConversionEventV1=function(e){var t=s(e);return t.snapshots.push(i(e)),{client_name:e.context.clientName,client_version:e.context.clientVersion,account_id:e.context.accountId,project_id:e.context.projectId,revision:e.context.revision,anonymize_ip:e.context.anonymizeIP,enrich_decisions:!0,visitors:[t]}},t.formatEvents=function(e){return{url:"https://logx.optimizely.com/v1/events",httpVerb:"POST",params:o(e)}}},18994:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(t){i(t)}}function s(e){try{u(n.throw(e))}catch(t){i(t)}}function u(e){e.done?o(e.value):new r((function(t){t(e.value)})).then(a,s)}u((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(98125),s=r(24909),u=i(r(90522)),c=r(51074),f=r(97168),l=a.getLogger("LogTierV1EventProcessor"),p=function(){function e(e){var t=e.dispatcher,r=e.flushInterval,n=void 0===r?s.DEFAULT_FLUSH_INTERVAL:r,o=e.batchSize,i=void 0===o?s.DEFAULT_BATCH_SIZE:o,a=e.notificationCenter;this.dispatcher=t,this.notificationCenter=a,this.requestTracker=new u.default,n=s.validateAndGetFlushInterval(n),i=s.validateAndGetBatchSize(i),this.queue=s.getQueue(i,n,this.drainQueue.bind(this),c.areEventContextsEqual)}return e.prototype.drainQueue=function(e){var t=this,r=new Promise((function(r){if(l.debug("draining queue with %s events",e.length),0!==e.length){var n=f.formatEvents(e);t.dispatcher.dispatchEvent(n,(function(){r()})),s.sendEventNotification(t.notificationCenter,n)}else r()}));return this.requestTracker.trackRequest(r),r},e.prototype.process=function(e){this.queue.enqueue(e)},e.prototype.stop=function(){try{return this.queue.stop(),this.requestTracker.onRequestsComplete()}catch(e){l.error('Error stopping EventProcessor: "%s"',e.message,e)}return Promise.resolve()},e.prototype.start=function(){return n(this,void 0,void 0,(function(){return o(this,(function(e){return this.queue.start(),[2]}))}))},e}();t.LogTierV1EventProcessor=p},27987:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.handleError=function(e){},e}();t.NoopErrorHandler=r;var n=new r;t.setErrorHandler=function(e){n=e},t.getErrorHandler=function(){return n},t.resetErrorHandler=function(){n=new r}},98125:function(e,t,r){"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(27987)),n(r(99623)),n(r(46773))},46773:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(27987),o=r(53820),i=r(99623),a={NOTSET:0,DEBUG:1,INFO:2,WARNING:3,ERROR:4};function s(e){return"string"!==typeof e?e:("WARN"===(e=e.toUpperCase())&&(e="WARNING"),a[e]?a[e]:e)}var u=function(){function e(){this.defaultLoggerFacade=new p,this.loggers={}}return e.prototype.getLogger=function(e){return e?(this.loggers[e]||(this.loggers[e]=new p({messagePrefix:e})),this.loggers[e]):this.defaultLoggerFacade},e}(),c=function(){function e(e){void 0===e&&(e={}),this.logLevel=i.LogLevel.NOTSET,void 0!==e.logLevel&&o.isValidEnum(i.LogLevel,e.logLevel)&&this.setLogLevel(e.logLevel),this.logToConsole=void 0===e.logToConsole||!!e.logToConsole,this.prefix=void 0!==e.prefix?e.prefix:"[OPTIMIZELY]"}return e.prototype.log=function(e,t){if(this.shouldLog(e)&&this.logToConsole){var r=this.prefix+" - "+this.getLogLevelName(e)+" "+this.getTime()+" "+t;this.consoleLog(e,[r])}},e.prototype.setLogLevel=function(e){e=s(e),o.isValidEnum(i.LogLevel,e)&&void 0!==e?this.logLevel=e:this.logLevel=i.LogLevel.ERROR},e.prototype.getTime=function(){return(new Date).toISOString()},e.prototype.shouldLog=function(e){return e>=this.logLevel},e.prototype.getLogLevelName=function(e){switch(e){case i.LogLevel.DEBUG:return"DEBUG";case i.LogLevel.INFO:return"INFO ";case i.LogLevel.WARNING:return"WARN ";case i.LogLevel.ERROR:return"ERROR";default:return"NOTSET"}},e.prototype.consoleLog=function(e,t){switch(e){case i.LogLevel.DEBUG:console.log.apply(console,t);break;case i.LogLevel.INFO:console.info.apply(console,t);break;case i.LogLevel.WARNING:console.warn.apply(console,t);break;case i.LogLevel.ERROR:console.error.apply(console,t);break;default:console.log.apply(console,t)}},e}();t.ConsoleLogHandler=c;var f=i.LogLevel.NOTSET,l=null,p=function(){function e(e){void 0===e&&(e={}),this.messagePrefix="",e.messagePrefix&&(this.messagePrefix=e.messagePrefix)}return e.prototype.log=function(e,t){this.internalLog(s(e),{message:t,splat:[]})},e.prototype.info=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.namedLog(i.LogLevel.INFO,e,t)},e.prototype.debug=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.namedLog(i.LogLevel.DEBUG,e,t)},e.prototype.warn=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.namedLog(i.LogLevel.WARNING,e,t)},e.prototype.error=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.namedLog(i.LogLevel.ERROR,e,t)},e.prototype.format=function(e){return(this.messagePrefix?this.messagePrefix+": ":"")+o.sprintf.apply(void 0,[e.message].concat(e.splat))},e.prototype.internalLog=function(e,t){l&&(e<f||(l.log(e,this.format(t)),t.error&&t.error instanceof Error&&n.getErrorHandler().handleError(t.error)))},e.prototype.namedLog=function(e,t,r){var n;if(t instanceof Error)return t=(n=t).message,void this.internalLog(e,{error:n,message:t,splat:r});if(0!==r.length){var o=r[r.length-1];o instanceof Error&&(n=o,r.splice(-1)),this.internalLog(e,{message:t,error:n,splat:r})}else this.internalLog(e,{message:t,splat:r})},e}(),d=new u;t.getLogger=function(e){return d.getLogger(e)},t.setLogHandler=function(e){l=e},t.setLogLevel=function(e){e=s(e),f=o.isValidEnum(i.LogLevel,e)&&void 0!==e?e:i.LogLevel.ERROR},t.getLogLevel=function(){return f},t.resetLogger=function(){d=new u,f=i.LogLevel.NOTSET}},99623:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.NOTSET=0]="NOTSET",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARNING=3]="WARNING",e[e.ERROR=4]="ERROR"}(t.LogLevel||(t.LogLevel={}))},53820:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(55877);function o(e){return Object.keys(e).map((function(t){return e[t]}))}t.getTimestamp=function(){return(new Date).getTime()},t.generateUUID=function(){return n.v4()},t.isValidEnum=function(e,t){for(var r=!1,n=Object.keys(e),o=0;o<n.length;o++)if(t===e[n[o]]){r=!0;break}return r},t.groupBy=function(e,t){var r={};return e.forEach((function(e){var n=t(e);r[n]=r[n]||[],r[n].push(e)})),o(r)},t.objectValues=o,t.find=function(e,t){for(var r,n=0,o=e;n<o.length;n++){var i=o[n];if(t(i)){r=i;break}}return r},t.keyBy=function(e,t){var r={};return e.forEach((function(e){var n=t(e);r[n]=e})),r},t.sprintf=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=0;return e.replace(/%s/g,(function(){var e=t[n++],r=typeof e;return"function"===r?e():"string"===r?e:String(e)}))}},27378:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(55877);function o(e){return Object.keys(e).map((function(t){return e[t]}))}t.generateUUID=function(){return n.v4()},t.getTimestamp=function(){return(new Date).getTime()},t.isValidEnum=function(e,t){for(var r=!1,n=Object.keys(e),o=0;o<n.length;o++)if(t===e[n[o]]){r=!0;break}return r},t.groupBy=function(e,t){var r={};return e.forEach((function(e){var n=t(e);r[n]=r[n]||[],r[n].push(e)})),o(r)},t.objectValues=o,t.objectEntries=function(e){return Object.keys(e).map((function(t){return[t,e[t]]}))},t.find=function(e,t){for(var r,n=0,o=e;n<o.length;n++){var i=o[n];if(t(i)){r=i;break}}return r},t.keyBy=function(e,t){var r={};return e.forEach((function(e){var n=t(e);r[n]=e})),r},t.sprintf=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=0;return e.replace(/%s/g,(function(){var e=t[n++],r=typeof e;return"function"===r?e():"string"===r?e:String(e)}))},function(e){e.ACTIVATE="ACTIVATE:experiment, user_id,attributes, variation, event",e.DECISION="DECISION:type, userId, attributes, decisionInfo",e.LOG_EVENT="LOG_EVENT:logEvent",e.OPTIMIZELY_CONFIG_UPDATE="OPTIMIZELY_CONFIG_UPDATE",e.TRACK="TRACK:event_key, user_id, attributes, event_tags, event"}(t.NOTIFICATION_TYPES||(t.NOTIFICATION_TYPES={}))},19889:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=r(98125),i=r(65001),a=r(27378),s=(n=r(58053))&&"object"==typeof n&&"default"in n?n.default:n,u=r(62002),c=Math.pow(2,53),f=function(e){return"number"==typeof e&&Math.abs(e)<=c},l={assign:function(e){if(!e)return{};if("function"==typeof Object.assign)return Object.assign.apply(Object,arguments);for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(null!=n)for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},currentTimestamp:function(){return Math.round((new Date).getTime())},isSafeInteger:f,keyBy:function(e,t){return e?a.keyBy(e,(function(e){return e[t]})):{}},uuid:a.generateUUID,isNumber:function(e){return"number"==typeof e}},p={NOTSET:0,DEBUG:1,INFO:2,WARNING:3,ERROR:4},d={CONDITION_EVALUATOR_ERROR:"%s: Error evaluating audience condition of type %s: %s",DATAFILE_AND_SDK_KEY_MISSING:"%s: You must provide at least one of sdkKey or datafile. Cannot start Optimizely",EXPERIMENT_KEY_NOT_IN_DATAFILE:"%s: Experiment key %s is not in datafile.",FEATURE_NOT_IN_DATAFILE:"%s: Feature key %s is not in datafile.",IMPROPERLY_FORMATTED_EXPERIMENT:"%s: Experiment key %s is improperly formatted.",INVALID_ATTRIBUTES:"%s: Provided attributes are in an invalid format.",INVALID_BUCKETING_ID:"%s: Unable to generate hash for bucketing ID %s: %s",INVALID_DATAFILE:"%s: Datafile is invalid - property %s: %s",INVALID_DATAFILE_MALFORMED:"%s: Datafile is invalid because it is malformed.",INVALID_JSON:"%s: JSON object is not valid.",INVALID_ERROR_HANDLER:'%s: Provided "errorHandler" is in an invalid format.',INVALID_EVENT_DISPATCHER:'%s: Provided "eventDispatcher" is in an invalid format.',INVALID_EVENT_TAGS:"%s: Provided event tags are in an invalid format.",INVALID_EXPERIMENT_KEY:"%s: Experiment key %s is not in datafile. It is either invalid, paused, or archived.",INVALID_EXPERIMENT_ID:"%s: Experiment ID %s is not in datafile.",INVALID_GROUP_ID:"%s: Group ID %s is not in datafile.",INVALID_LOGGER:'%s: Provided "logger" is in an invalid format.',INVALID_ROLLOUT_ID:"%s: Invalid rollout ID %s attached to feature %s",INVALID_USER_ID:"%s: Provided user ID is in an invalid format.",INVALID_USER_PROFILE_SERVICE:"%s: Provided user profile service instance is in an invalid format: %s.",NO_DATAFILE_SPECIFIED:"%s: No datafile specified. Cannot start optimizely.",NO_JSON_PROVIDED:"%s: No JSON object to validate against schema.",NO_VARIATION_FOR_EXPERIMENT_KEY:"%s: No variation key %s defined in datafile for experiment %s.",UNDEFINED_ATTRIBUTE:"%s: Provided attribute: %s has an undefined value.",UNRECOGNIZED_ATTRIBUTE:"%s: Unrecognized attribute %s provided. Pruning before sending event to Optimizely.",UNABLE_TO_CAST_VALUE:"%s: Unable to cast value %s to type %s, returning null.",USER_NOT_IN_FORCED_VARIATION:"%s: User %s is not in the forced variation map. Cannot remove their forced variation.",USER_PROFILE_LOOKUP_ERROR:'%s: Error while looking up user profile for user ID "%s": %s.',USER_PROFILE_SAVE_ERROR:'%s: Error while saving user profile for user ID "%s": %s.',VARIABLE_KEY_NOT_IN_DATAFILE:'%s: Variable with key "%s" associated with feature with key "%s" is not in datafile.',VARIATION_ID_NOT_IN_DATAFILE:"%s: No variation ID %s defined in datafile for experiment %s.",VARIATION_ID_NOT_IN_DATAFILE_NO_EXPERIMENT:"%s: Variation ID %s is not in the datafile.",INVALID_INPUT_FORMAT:"%s: Provided %s is in an invalid format.",INVALID_DATAFILE_VERSION:"%s: This version of the JavaScript SDK does not support the given datafile version: %s",INVALID_VARIATION_KEY:"%s: Provided variation key is in an invalid format."},v={ACTIVATE_USER:"%s: Activating user %s in experiment %s.",DISPATCH_CONVERSION_EVENT:"%s: Dispatching conversion event to URL %s with params %s.",DISPATCH_IMPRESSION_EVENT:"%s: Dispatching impression event to URL %s with params %s.",DEPRECATED_EVENT_VALUE:"%s: Event value is deprecated in %s call.",EVENT_KEY_NOT_FOUND:"%s: Event key %s is not in datafile.",EXPERIMENT_NOT_RUNNING:"%s: Experiment %s is not running.",FEATURE_ENABLED_FOR_USER:"%s: Feature %s is enabled for user %s.",FEATURE_NOT_ENABLED_FOR_USER:"%s: Feature %s is not enabled for user %s.",FEATURE_HAS_NO_EXPERIMENTS:"%s: Feature %s is not attached to any experiments.",FAILED_TO_PARSE_VALUE:'%s: Failed to parse event value "%s" from event tags.',FAILED_TO_PARSE_REVENUE:'%s: Failed to parse revenue value "%s" from event tags.',FORCED_BUCKETING_FAILED:"%s: Variation key %s is not in datafile. Not activating user %s.",INVALID_OBJECT:"%s: Optimizely object is not valid. Failing %s.",INVALID_CLIENT_ENGINE:"%s: Invalid client engine passed: %s. Defaulting to node-sdk.",INVALID_VARIATION_ID:"%s: Bucketed into an invalid variation ID. Returning null.",NOTIFICATION_LISTENER_EXCEPTION:"%s: Notification listener for (%s) threw exception: %s",NO_ROLLOUT_EXISTS:"%s: There is no rollout of feature %s.",NOT_ACTIVATING_USER:"%s: Not activating user %s for experiment %s.",NOT_TRACKING_USER:"%s: Not tracking user %s.",PARSED_REVENUE_VALUE:'%s: Parsed revenue value "%s" from event tags.',PARSED_NUMERIC_VALUE:'%s: Parsed event value "%s" from event tags.',RETURNING_STORED_VARIATION:'%s: Returning previously activated variation "%s" of experiment "%s" for user "%s" from user profile.',ROLLOUT_HAS_NO_EXPERIMENTS:"%s: Rollout of feature %s has no experiments",SAVED_VARIATION:'%s: Saved variation "%s" of experiment "%s" for user "%s".',SAVED_VARIATION_NOT_FOUND:"%s: User %s was previously bucketed into variation with ID %s for experiment %s, but no matching variation was found.",SHOULD_NOT_DISPATCH_ACTIVATE:'%s: Experiment %s is not in "Running" state. Not activating user.',SKIPPING_JSON_VALIDATION:"%s: Skipping JSON schema validation.",TRACK_EVENT:"%s: Tracking event %s for user %s.",USER_ASSIGNED_TO_EXPERIMENT_BUCKET:"%s: Assigned bucket %s to user with bucketing ID %s.",USER_BUCKETED_INTO_EXPERIMENT_IN_GROUP:"%s: User %s is in experiment %s of group %s.",USER_BUCKETED_INTO_TARGETING_RULE:"%s: User %s bucketed into targeting rule %s.",USER_IN_FEATURE_EXPERIMENT:"%s: User %s is in variation %s of experiment %s on the feature %s.",USER_IN_ROLLOUT:"%s: User %s is in rollout of feature %s.",USER_BUCKETED_INTO_EVERYONE_TARGETING_RULE:"%s: User %s bucketed into everyone targeting rule.",USER_NOT_BUCKETED_INTO_EVERYONE_TARGETING_RULE:"%s: User %s not bucketed into everyone targeting rule due to traffic allocation.",USER_NOT_BUCKETED_INTO_EXPERIMENT_IN_GROUP:"%s: User %s is not in experiment %s of group %s.",USER_NOT_BUCKETED_INTO_ANY_EXPERIMENT_IN_GROUP:"%s: User %s is not in any experiment of group %s.",USER_NOT_BUCKETED_INTO_TARGETING_RULE:"%s User %s not bucketed into targeting rule %s due to traffic allocation. Trying everyone rule.",USER_NOT_IN_FEATURE_EXPERIMENT:"%s: User %s is not in any experiment on the feature %s.",USER_NOT_IN_ROLLOUT:"%s: User %s is not in rollout of feature %s.",USER_FORCED_IN_VARIATION:"%s: User %s is forced in variation %s.",USER_MAPPED_TO_FORCED_VARIATION:"%s: Set variation %s for experiment %s and user %s in the forced variation map.",USER_DOESNT_MEET_CONDITIONS_FOR_TARGETING_RULE:"%s: User %s does not meet conditions for targeting rule %s.",USER_MEETS_CONDITIONS_FOR_TARGETING_RULE:"%s: User %s meets conditions for targeting rule %s.",USER_HAS_VARIATION:"%s: User %s is in variation %s of experiment %s.",USER_HAS_FORCED_VARIATION:"%s: Variation %s is mapped to experiment %s and user %s in the forced variation map.",USER_HAS_NO_VARIATION:"%s: User %s is in no variation of experiment %s.",USER_HAS_NO_FORCED_VARIATION:"%s: User %s is not in the forced variation map.",USER_HAS_NO_FORCED_VARIATION_FOR_EXPERIMENT:"%s: No experiment %s mapped to user %s in the forced variation map.",USER_NOT_IN_ANY_EXPERIMENT:"%s: User %s is not in any experiment of group %s.",USER_NOT_IN_EXPERIMENT:"%s: User %s does not meet conditions to be in experiment %s.",USER_RECEIVED_DEFAULT_VARIABLE_VALUE:'%s: User "%s" is not in any variation or rollout rule. Returning default value for variable "%s" of feature flag "%s".',FEATURE_NOT_ENABLED_RETURN_DEFAULT_VARIABLE_VALUE:'%s: Feature "%s" is not enabled for user %s. Returning the default variable value "%s".',VARIABLE_NOT_USED_RETURN_DEFAULT_VARIABLE_VALUE:'%s: Variable "%s" is not used in variation "%s". Returning default value.',USER_RECEIVED_VARIABLE_VALUE:'%s: Got variable value "%s" for variable "%s" of feature flag "%s"',VALID_DATAFILE:"%s: Datafile is valid.",VALID_USER_PROFILE_SERVICE:"%s: Valid user profile service provided.",VARIATION_REMOVED_FOR_USER:"%s: Variation mapped to experiment %s has been removed for user %s.",VARIABLE_REQUESTED_WITH_WRONG_TYPE:'%s: Requested variable type "%s", but variable is of type "%s". Use correct API to retrieve value. Returning None.',VALID_BUCKETING_ID:'%s: BucketingId is valid: "%s"',BUCKETING_ID_NOT_STRING:"%s: BucketingID attribute is not a string. Defaulted to userId",EVALUATING_AUDIENCE:'%s: Starting to evaluate audience "%s" with conditions: %s.',EVALUATING_AUDIENCES_COMBINED:'%s: Evaluating audiences for %s "%s": %s.',AUDIENCE_EVALUATION_RESULT:'%s: Audience "%s" evaluated to %s.',AUDIENCE_EVALUATION_RESULT_COMBINED:"%s: Audiences for %s %s collectively evaluated to %s.",MISSING_ATTRIBUTE_VALUE:'%s: Audience condition %s evaluated to UNKNOWN because no value was passed for user attribute "%s".',UNEXPECTED_CONDITION_VALUE:"%s: Audience condition %s evaluated to UNKNOWN because the condition value is not supported.",UNEXPECTED_TYPE:'%s: Audience condition %s evaluated to UNKNOWN because a value of type "%s" was passed for user attribute "%s".',UNEXPECTED_TYPE_NULL:'%s: Audience condition %s evaluated to UNKNOWN because a null value was passed for user attribute "%s".',UNKNOWN_CONDITION_TYPE:"%s: Audience condition %s has an unknown condition type. You may need to upgrade to a newer release of the Optimizely SDK.",UNKNOWN_MATCH_TYPE:"%s: Audience condition %s uses an unknown match type. You may need to upgrade to a newer release of the Optimizely SDK.",UPDATED_OPTIMIZELY_CONFIG:"%s: Updated Optimizely config to revision %s (project id %s)",OUT_OF_BOUNDS:'%s: Audience condition %s evaluated to UNKNOWN because the number value for user attribute "%s" is not in the range [-2^53, +2^53].',UNABLE_TO_ATTACH_UNLOAD:'%s: unable to bind optimizely.close() to page unload event: "%s"'},h={REVENUE:"revenue",VALUE:"value"},g=a.NOTIFICATION_TYPES,y={BOOLEAN:"boolean",DOUBLE:"double",INTEGER:"integer",STRING:"string",JSON:"json"},E={V2:"2",V3:"3",V4:"4"},_={LOG_LEVEL:p,ERROR_MESSAGES:d,LOG_MESSAGES:v,RESERVED_EVENT_KEYWORDS:h,CONTROL_ATTRIBUTES:{BOT_FILTERING:"$opt_bot_filtering",BUCKETING_ID:"$opt_bucketing_id",STICKY_BUCKETING_KEY:"$opt_experiment_bucket_map",USER_AGENT:"$opt_user_agent"},JAVASCRIPT_CLIENT_ENGINE:"javascript-sdk",NODE_CLIENT_ENGINE:"node-sdk",REACT_CLIENT_ENGINE:"react-sdk",NODE_CLIENT_VERSION:"4.2.0",VALID_CLIENT_ENGINES:["node-sdk","react-sdk","javascript-sdk"],NOTIFICATION_TYPES:g,DECISION_NOTIFICATION_TYPES:{AB_TEST:"ab-test",FEATURE:"feature",FEATURE_TEST:"feature-test",FEATURE_VARIABLE:"feature-variable",ALL_FEATURE_VARIABLES:"all-feature-variables"},DECISION_SOURCES:{FEATURE_TEST:"feature-test",ROLLOUT:"rollout"},FEATURE_VARIABLE_TYPES:y,DATAFILE_VERSIONS:E,AUDIENCE_EVALUATION_TYPES:{RULE:"rule",EXPERIMENT:"experiment"}},m="CONFIG_VALIDATOR",O=[E.V2,E.V3,E.V4],b=function(e){if(e.errorHandler&&"function"!=typeof e.errorHandler.handleError)throw new Error(a.sprintf(d.INVALID_ERROR_HANDLER,m));if(e.eventDispatcher&&"function"!=typeof e.eventDispatcher.dispatchEvent)throw new Error(a.sprintf(d.INVALID_EVENT_DISPATCHER,m));if(e.logger&&"function"!=typeof e.logger.log)throw new Error(a.sprintf(d.INVALID_LOGGER,m));return!0},I=function(e){if(!e)throw new Error(a.sprintf(d.NO_DATAFILE_SPECIFIED,m));if("string"==typeof e||e instanceof String)try{e=JSON.parse(e)}catch(e){throw new Error(a.sprintf(d.INVALID_DATAFILE_MALFORMED,m))}if(-1===O.indexOf(e.version))throw new Error(a.sprintf(d.INVALID_DATAFILE_VERSION,m,e.version));return!0},T={handleError:function(){}},R={dispatchEvent:function(e,t){var r,n=e.url,o=e.params;"POST"===e.httpVerb?((r=new XMLHttpRequest).open("POST",n,!0),r.setRequestHeader("Content-Type","application/json"),r.onreadystatechange=function(){if(4===r.readyState&&t&&"function"==typeof t)try{t({statusCode:r.status})}catch(e){}},r.send(JSON.stringify(o))):(n+="?wxhr=true",o&&(n+="&"+function(e){return Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")}(o)),(r=new XMLHttpRequest).open("GET",n,!0),r.onreadystatechange=function(){if(4===r.readyState&&t&&"function"==typeof t)try{t()}catch(e){}},r.send())}};function A(){}A.prototype.log=function(){};var S={createLogger:function(e){return new o.ConsoleLogHandler(e)},createNoOpLogger:function(){return new A}},N=function(e,t){return"string"==typeof e&&("string"==typeof t||"boolean"==typeof t||l.isNumber(t)&&l.isSafeInteger(t))},w=Math.pow(2,32),P={bucket:function(e){var t=e.experimentKeyMap[e.experimentKey].groupId;if(t){var r=e.groupIdMap[t];if(!r)throw new Error(a.sprintf(d.INVALID_GROUP_ID,"BUCKETER",t));if("random"===r.policy){var n=this.bucketUserIntoExperiment(r,e.bucketingId,e.userId,e.logger);if(null===n){var o=a.sprintf(v.USER_NOT_IN_ANY_EXPERIMENT,"BUCKETER",e.userId,t);return e.logger.log(p.INFO,o),null}if(n!==e.experimentId){var i=a.sprintf(v.USER_NOT_BUCKETED_INTO_EXPERIMENT_IN_GROUP,"BUCKETER",e.userId,e.experimentKey,t);return e.logger.log(p.INFO,i),null}var s=a.sprintf(v.USER_BUCKETED_INTO_EXPERIMENT_IN_GROUP,"BUCKETER",e.userId,e.experimentKey,t);e.logger.log(p.INFO,s)}}var u=a.sprintf("%s%s",e.bucketingId,e.experimentId),c=this._generateBucketValue(u),f=a.sprintf(v.USER_ASSIGNED_TO_EXPERIMENT_BUCKET,"BUCKETER",c,e.userId);e.logger.log(p.DEBUG,f);var l=this._findBucket(c,e.trafficAllocationConfig);if(!e.variationIdMap.hasOwnProperty(l)){var h=a.sprintf(v.INVALID_VARIATION_ID,"BUCKETER");return e.logger.log(p.WARNING,h),null}return l},bucketUserIntoExperiment:function(e,t,r,n){var o=a.sprintf("%s%s",t,e.id),i=this._generateBucketValue(o);n.log(p.DEBUG,a.sprintf(v.USER_ASSIGNED_TO_EXPERIMENT_BUCKET,"BUCKETER",i,r));var s=e.trafficAllocation;return this._findBucket(i,s)},_findBucket:function(e,t){for(var r=0;r<t.length;r++)if(e<t[r].endOfRange)return t[r].entityId;return null},_generateBucketValue:function(e){try{var t=s.v3(e,1);return parseInt(t/w*1e4,10)}catch(t){throw new Error(a.sprintf(d.INVALID_BUCKETING_ID,"BUCKETER",e,t.message))}}},C="PROJECT_CONFIG",L=function(e,t){return e.experimentFeatureMap.hasOwnProperty(t)},x={createProjectConfig:function(e){var t=function(e){var t=l.assign({},e);return t.audiences=(e.audiences||[]).map((function(e){return l.assign({},e)})),t.experiments=(e.experiments||[]).map((function(e){return l.assign({},e)})),t.featureFlags=(e.featureFlags||[]).map((function(e){return l.assign({},e)})),t.groups=(e.groups||[]).map((function(e){var t=l.assign({},e);return t.experiments=(e.experiments||[]).map((function(e){return l.assign({},e)})),t})),t.rollouts=(e.rollouts||[]).map((function(e){var t=l.assign({},e);return t.experiments=(e.experiments||[]).map((function(e){return l.assign({},e)})),t})),t}(e);return(t.audiences||[]).forEach((function(e){e.conditions=JSON.parse(e.conditions)})),t.audiencesById=l.keyBy(t.audiences,"id"),l.assign(t.audiencesById,l.keyBy(t.typedAudiences,"id")),t.attributeKeyMap=l.keyBy(t.attributes,"key"),t.eventKeyMap=l.keyBy(t.events,"key"),t.groupIdMap=l.keyBy(t.groups,"id"),Object.keys(t.groupIdMap||{}).forEach((function(e){(t.groupIdMap[e].experiments||[]).forEach((function(r){t.experiments.push(l.assign(r,{groupId:e}))}))})),t.rolloutIdMap=l.keyBy(t.rollouts||[],"id"),a.objectValues(t.rolloutIdMap||{}).forEach((function(e){(e.experiments||[]).forEach((function(e){t.experiments.push(e),e.variationKeyMap=l.keyBy(e.variations,"key")}))})),t.experimentKeyMap=l.keyBy(t.experiments,"key"),t.experimentIdMap=l.keyBy(t.experiments,"id"),t.variationIdMap={},t.variationVariableUsageMap={},(t.experiments||[]).forEach((function(e){e.variationKeyMap=l.keyBy(e.variations,"key"),l.assign(t.variationIdMap,l.keyBy(e.variations,"id")),a.objectValues(e.variationKeyMap||{}).forEach((function(e){e.variables&&(t.variationVariableUsageMap[e.id]=l.keyBy(e.variables,"id"))}))})),t.experimentFeatureMap={},t.featureKeyMap=l.keyBy(t.featureFlags||[],"key"),a.objectValues(t.featureKeyMap||{}).forEach((function(e){e.variables.forEach((function(e){e.type===y.STRING&&e.subType===y.JSON&&(e.type=y.JSON,delete e.subType)})),e.variableKeyMap=l.keyBy(e.variables,"key"),(e.experimentIds||[]).forEach((function(r){t.experimentFeatureMap[r]?t.experimentFeatureMap[r].push(e.id):t.experimentFeatureMap[r]=[e.id];var n=t.experimentIdMap[r];n.groupId&&!e.groupId&&(e.groupId=n.groupId)}))})),t},getExperimentId:function(e,t){var r=e.experimentKeyMap[t];if(!r)throw new Error(a.sprintf(d.INVALID_EXPERIMENT_KEY,C,t));return r.id},getLayerId:function(e,t){var r=e.experimentIdMap[t];if(!r)throw new Error(a.sprintf(d.INVALID_EXPERIMENT_ID,C,t));return r.layerId},getAttributeId:function(e,t,r){var n=e.attributeKeyMap[t],o=0===t.indexOf("$opt_");return n?(o&&r.log(p.WARN,a.sprintf("Attribute %s unexpectedly has reserved prefix %s; using attribute ID instead of reserved attribute name.",t,"$opt_")),n.id):o?t:(r.log(p.DEBUG,a.sprintf(d.UNRECOGNIZED_ATTRIBUTE,C,t)),null)},getEventId:function(e,t){var r=e.eventKeyMap[t];return r?r.id:null},getExperimentStatus:function(e,t){var r=e.experimentKeyMap[t];if(!r)throw new Error(a.sprintf(d.INVALID_EXPERIMENT_KEY,C,t));return r.status},isActive:function(e,t){return"Running"===this.getExperimentStatus(e,t)},isRunning:function(e,t){return"Running"===this.getExperimentStatus(e,t)},getExperimentAudienceConditions:function(e,t){var r=e.experimentKeyMap[t];if(!r)throw new Error(a.sprintf(d.INVALID_EXPERIMENT_KEY,C,t));return r.audienceConditions||r.audienceIds},getVariationKeyFromId:function(e,t){return e.variationIdMap.hasOwnProperty(t)?e.variationIdMap[t].key:null},getVariationIdFromExperimentAndVariationKey:function(e,t,r){var n=e.experimentKeyMap[t];return n.variationKeyMap.hasOwnProperty(r)?n.variationKeyMap[r].id:null},getExperimentFromKey:function(e,t){if(e.experimentKeyMap.hasOwnProperty(t)){var r=e.experimentKeyMap[t];if(r)return r}throw new Error(a.sprintf(d.EXPERIMENT_KEY_NOT_IN_DATAFILE,C,t))},getTrafficAllocation:function(e,t){var r=e.experimentKeyMap[t];if(!r)throw new Error(a.sprintf(d.INVALID_EXPERIMENT_KEY,C,t));return r.trafficAllocation},getExperimentFromId:function(e,t,r){if(e.experimentIdMap.hasOwnProperty(t)){var n=e.experimentIdMap[t];if(n)return n}return r.log(p.ERROR,a.sprintf(d.INVALID_EXPERIMENT_ID,C,t)),null},getFeatureFromKey:function(e,t,r){if(e.featureKeyMap.hasOwnProperty(t)){var n=e.featureKeyMap[t];if(n)return n}return r.log(p.ERROR,a.sprintf(d.FEATURE_NOT_IN_DATAFILE,C,t)),null},getVariableForFeature:function(e,t,r,n){var o=e.featureKeyMap[t];return o?o.variableKeyMap[r]||(n.log(p.ERROR,a.sprintf(d.VARIABLE_KEY_NOT_IN_DATAFILE,C,r,t)),null):(n.log(p.ERROR,a.sprintf(d.FEATURE_NOT_IN_DATAFILE,C,t)),null)},getVariableValueForVariation:function(e,t,r,n){if(!t||!r)return null;if(!e.variationVariableUsageMap.hasOwnProperty(r.id))return n.log(p.ERROR,a.sprintf(d.VARIATION_ID_NOT_IN_DATAFILE_NO_EXPERIMENT,C,r.id)),null;var o=e.variationVariableUsageMap[r.id][t.id];return o?o.value:null},getTypeCastValue:function(e,t,r){var n;switch(t){case y.BOOLEAN:"true"!==e&&"false"!==e?(r.log(p.ERROR,a.sprintf(d.UNABLE_TO_CAST_VALUE,C,e,t)),n=null):n="true"===e;break;case y.INTEGER:n=parseInt(e,10),isNaN(n)&&(r.log(p.ERROR,a.sprintf(d.UNABLE_TO_CAST_VALUE,C,e,t)),n=null);break;case y.DOUBLE:n=parseFloat(e),isNaN(n)&&(r.log(p.ERROR,a.sprintf(d.UNABLE_TO_CAST_VALUE,C,e,t)),n=null);break;case y.JSON:try{n=JSON.parse(e)}catch(u){r.log(p.ERROR,a.sprintf(d.UNABLE_TO_CAST_VALUE,C,e,t)),n=null}break;default:n=e}return n},getAudiencesById:function(e){return e.audiencesById},eventWithKeyExists:function(e,t){return e.eventKeyMap.hasOwnProperty(t)},isFeatureExperiment:L,tryCreatingProjectConfig:function(e){return I(e.datafile),e.jsonSchemaValidator?(e.jsonSchemaValidator.validate(e.datafile),e.logger.log(p.INFO,a.sprintf(v.VALID_DATAFILE,C))):e.logger.log(p.INFO,a.sprintf(v.SKIPPING_JSON_VALIDATION,C)),this.createProjectConfig(e.datafile)}},U=["and","or","not"],D=function(e,t){if(Array.isArray(e)){var r=e[0],n=e.slice(1);switch(-1===U.indexOf(r)&&(r="or",n=e),r){case"and":return function(e,t){for(var r=!1,n=0;n<e.length;n++){var o=D(e[n],t);if(!1===o)return!1;null===o&&(r=!0)}return!r||null}(n,t);case"not":return function(e,t){if(e.length>0){var r=D(e[0],t);return null===r?null:!r}return null}(n,t);default:return function(e,t){for(var r=!1,n=0;n<e.length;n++){var o=D(e[n],t);if(!0===o)return!0;null===o&&(r=!0)}return!!r&&null}(n,t)}}return t(e)},j=D,M="CUSTOM_ATTRIBUTE_CONDITION_EVALUATOR",V=["exact","exists","gt","lt","substring"],k={};function F(e){return"string"==typeof e||"boolean"==typeof e||l.isNumber(e)}function B(e,t,r){var n=e.value,o=typeof n,i=e.name,s=t[i],u=typeof s;return!F(n)||l.isNumber(n)&&!l.isSafeInteger(n)?(r.log(p.WARNING,a.sprintf(v.UNEXPECTED_CONDITION_VALUE,M,JSON.stringify(e))),null):null===s?(r.log(p.DEBUG,a.sprintf(v.UNEXPECTED_TYPE_NULL,M,JSON.stringify(e),i)),null):F(s)&&o===u?l.isNumber(s)&&!l.isSafeInteger(s)?(r.log(p.WARNING,a.sprintf(v.OUT_OF_BOUNDS,M,JSON.stringify(e),i)),null):n===s:(r.log(p.WARNING,a.sprintf(v.UNEXPECTED_TYPE,M,JSON.stringify(e),u,i)),null)}k.exact=B,k.exists=function(e,t){return null!=t[e.name]},k.gt=function(e,t,r){var n=e.name,o=t[n],i=typeof o,s=e.value;return l.isSafeInteger(s)?null===o?(r.log(p.DEBUG,a.sprintf(v.UNEXPECTED_TYPE_NULL,M,JSON.stringify(e),n)),null):l.isNumber(o)?l.isSafeInteger(o)?o>s:(r.log(p.WARNING,a.sprintf(v.OUT_OF_BOUNDS,M,JSON.stringify(e),n)),null):(r.log(p.WARNING,a.sprintf(v.UNEXPECTED_TYPE,M,JSON.stringify(e),i,n)),null):(r.log(p.WARNING,a.sprintf(v.UNEXPECTED_CONDITION_VALUE,M,JSON.stringify(e))),null)},k.lt=function(e,t,r){var n=e.name,o=t[e.name],i=typeof o,s=e.value;return l.isSafeInteger(s)?null===o?(r.log(p.DEBUG,a.sprintf(v.UNEXPECTED_TYPE_NULL,M,JSON.stringify(e),n)),null):l.isNumber(o)?l.isSafeInteger(o)?o<s:(r.log(p.WARNING,a.sprintf(v.OUT_OF_BOUNDS,M,JSON.stringify(e),n)),null):(r.log(p.WARNING,a.sprintf(v.UNEXPECTED_TYPE,M,JSON.stringify(e),i,n)),null):(r.log(p.WARNING,a.sprintf(v.UNEXPECTED_CONDITION_VALUE,M,JSON.stringify(e))),null)},k.substring=function(e,t,r){var n=e.name,o=t[e.name],i=typeof o,s=e.value;return"string"!=typeof s?(r.log(p.WARNING,a.sprintf(v.UNEXPECTED_CONDITION_VALUE,M,JSON.stringify(e))),null):null===o?(r.log(p.DEBUG,a.sprintf(v.UNEXPECTED_TYPE_NULL,M,JSON.stringify(e),n)),null):"string"!=typeof o?(r.log(p.WARNING,a.sprintf(v.UNEXPECTED_TYPE,M,JSON.stringify(e),i,n)),null):-1!==o.indexOf(s)};var G={evaluate:function(e,t,r){var n=e.match;if(void 0!==n&&-1===V.indexOf(n))return r.log(p.WARNING,a.sprintf(v.UNKNOWN_MATCH_TYPE,M,JSON.stringify(e))),null;var o=e.name;return t.hasOwnProperty(o)||"exists"==n?(k[n]||B)(e,t,r):(r.log(p.DEBUG,a.sprintf(v.MISSING_ATTRIBUTE_VALUE,M,JSON.stringify(e),o)),null)}},K=o.getLogger();function H(e){this.typeToEvaluatorMap=l.assign({},e,{custom_attribute:G})}H.prototype.evaluate=function(e,t,r){if(!e||0===e.length)return!0;r||(r={});var n=function(e){var n=t[e];if(n){K.log(p.DEBUG,a.sprintf(v.EVALUATING_AUDIENCE,"AUDIENCE_EVALUATOR",e,JSON.stringify(n.conditions)));var o=j(n.conditions,this.evaluateConditionWithUserAttributes.bind(this,r)),i=null===o?"UNKNOWN":o.toString().toUpperCase();return K.log(p.DEBUG,a.sprintf(v.AUDIENCE_EVALUATION_RESULT,"AUDIENCE_EVALUATOR",e,i)),o}return null}.bind(this);return j(e,n)||!1},H.prototype.evaluateConditionWithUserAttributes=function(e,t){var r=this.typeToEvaluatorMap[t.type];if(!r)return K.log(p.WARNING,a.sprintf(v.UNKNOWN_CONDITION_TYPE,"AUDIENCE_EVALUATOR",JSON.stringify(t))),null;try{return r.evaluate(t,e,K)}catch(e){K.log(p.ERROR,a.sprintf(d.CONDITION_EVALUATOR_ERROR,"AUDIENCE_EVALUATOR",t.type,e.message))}return null};var W=function(e){return"string"==typeof e&&""!==e},z="DECISION_SERVICE",Y=_.ERROR_MESSAGES,q=_.LOG_LEVEL,J=_.LOG_MESSAGES,X=_.DECISION_SOURCES,Z=_.AUDIENCE_EVALUATION_TYPES;function Q(e){this.audienceEvaluator=new H(e.UNSTABLE_conditionEvaluators),this.forcedVariationMap={},this.logger=e.logger,this.userProfileService=e.userProfileService||null}Q.prototype.getVariation=function(e,t,r,n){var o=this._getBucketingId(r,n);if(!this.__checkIfExperimentIsActive(e,t))return null;var i=e.experimentKeyMap[t],s=this.getForcedVariation(e,t,r);if(s)return s;var u=this.__getWhitelistedVariation(i,r);if(u)return u.key;var c=this.__resolveExperimentBucketMap(r,n);if(u=this.__getStoredVariation(e,i,r,c))return this.logger.log(q.INFO,a.sprintf(J.RETURNING_STORED_VARIATION,z,u.key,t,r)),u.key;if(!this.__checkIfUserIsInAudience(e,t,Z.EXPERIMENT,r,n,"")){var f=a.sprintf(J.USER_NOT_IN_EXPERIMENT,z,r,t);return this.logger.log(q.INFO,f),null}var l=this.__buildBucketerParams(e,t,o,r),p=P.bucket(l);if(!(u=e.variationIdMap[p])){var d=a.sprintf(J.USER_HAS_NO_VARIATION,z,r,t);return this.logger.log(q.DEBUG,d),null}var v=a.sprintf(J.USER_HAS_VARIATION,z,r,u.key,t);return this.logger.log(q.INFO,v),this.__saveUserProfile(i,u,r,c),u.key},Q.prototype.__resolveExperimentBucketMap=function(e,t){t=t||{};var r=this.__getUserProfile(e)||{},n=t[_.CONTROL_ATTRIBUTES.STICKY_BUCKETING_KEY];return l.assign({},r.experiment_bucket_map,n)},Q.prototype.__checkIfExperimentIsActive=function(e,t){if(!x.isActive(e,t)){var r=a.sprintf(J.EXPERIMENT_NOT_RUNNING,z,t);return this.logger.log(q.INFO,r),!1}return!0},Q.prototype.__getWhitelistedVariation=function(e,t){if(e.forcedVariations&&e.forcedVariations.hasOwnProperty(t)){var r=e.forcedVariations[t];if(e.variationKeyMap.hasOwnProperty(r)){var n=a.sprintf(J.USER_FORCED_IN_VARIATION,z,t,r);return this.logger.log(q.INFO,n),e.variationKeyMap[r]}var o=a.sprintf(J.FORCED_BUCKETING_FAILED,z,r,t);return this.logger.log(q.ERROR,o),null}return null},Q.prototype.__checkIfUserIsInAudience=function(e,t,r,n,o,i){var s=x.getExperimentAudienceConditions(e,t),u=x.getAudiencesById(e);this.logger.log(q.DEBUG,a.sprintf(J.EVALUATING_AUDIENCES_COMBINED,z,r,i||t,JSON.stringify(s)));var c=this.audienceEvaluator.evaluate(s,u,o);return this.logger.log(q.INFO,a.sprintf(J.AUDIENCE_EVALUATION_RESULT_COMBINED,z,r,i||t,c.toString().toUpperCase())),c},Q.prototype.__buildBucketerParams=function(e,t,r,n){var o={};return o.experimentKey=t,o.experimentId=x.getExperimentId(e,t),o.userId=n,o.trafficAllocationConfig=x.getTrafficAllocation(e,t),o.experimentKeyMap=e.experimentKeyMap,o.groupIdMap=e.groupIdMap,o.variationIdMap=e.variationIdMap,o.logger=this.logger,o.bucketingId=r,o},Q.prototype.__getStoredVariation=function(e,t,r,n){if(n.hasOwnProperty(t.id)){var o=n[t.id],i=o.variation_id;if(e.variationIdMap.hasOwnProperty(i))return e.variationIdMap[o.variation_id];this.logger.log(q.INFO,a.sprintf(J.SAVED_VARIATION_NOT_FOUND,z,r,i,t.key))}return null},Q.prototype.__getUserProfile=function(e){var t={user_id:e,experiment_bucket_map:{}};if(!this.userProfileService)return t;try{return this.userProfileService.lookup(e)}catch(t){this.logger.log(q.ERROR,a.sprintf(Y.USER_PROFILE_LOOKUP_ERROR,z,e,t.message))}},Q.prototype.__saveUserProfile=function(e,t,r,n){if(this.userProfileService)try{n[e.id]={variation_id:t.id},this.userProfileService.save({user_id:r,experiment_bucket_map:n}),this.logger.log(q.INFO,a.sprintf(J.SAVED_VARIATION,z,t.key,e.key,r))}catch(e){this.logger.log(q.ERROR,a.sprintf(Y.USER_PROFILE_SAVE_ERROR,z,r,e.message))}},Q.prototype.getVariationForFeature=function(e,t,r,n){var o=this._getVariationForFeatureExperiment(e,t,r,n);if(null!==o.variation)return o;var i=this._getVariationForRollout(e,t,r,n);return null!==i.variation?(this.logger.log(q.DEBUG,a.sprintf(J.USER_IN_ROLLOUT,z,r,t.key)),i):(this.logger.log(q.DEBUG,a.sprintf(J.USER_NOT_IN_ROLLOUT,z,r,t.key)),i)},Q.prototype._getVariationForFeatureExperiment=function(e,t,r,n){var o=null,i=null;if(t.hasOwnProperty("groupId")){var s=e.groupIdMap[t.groupId];s&&(o=this._getExperimentInGroup(e,s,r))&&-1!==t.experimentIds.indexOf(o.id)&&(i=this.getVariation(e,o.key,r,n))}else t.experimentIds.length>0?(o=x.getExperimentFromId(e,t.experimentIds[0],this.logger))&&(i=this.getVariation(e,o.key,r,n)):this.logger.log(q.DEBUG,a.sprintf(J.FEATURE_HAS_NO_EXPERIMENTS,z,t.key));var u=null;return null!==i&&null!==o&&(u=o.variationKeyMap[i]),{experiment:o,variation:u,decisionSource:X.FEATURE_TEST}},Q.prototype._getExperimentInGroup=function(e,t,r){var n=P.bucketUserIntoExperiment(t,r,r,this.logger);if(n){this.logger.log(q.INFO,a.sprintf(J.USER_BUCKETED_INTO_EXPERIMENT_IN_GROUP,z,r,n,t.id));var o=x.getExperimentFromId(e,n,this.logger);if(o)return o}return this.logger.log(q.INFO,a.sprintf(J.USER_NOT_BUCKETED_INTO_ANY_EXPERIMENT_IN_GROUP,z,r,t.id)),null},Q.prototype._getVariationForRollout=function(e,t,r,n){if(!t.rolloutId)return this.logger.log(q.DEBUG,a.sprintf(J.NO_ROLLOUT_EXISTS,z,t.key)),{experiment:null,variation:null,decisionSource:X.ROLLOUT};var o=e.rolloutIdMap[t.rolloutId];if(!o)return this.logger.log(q.ERROR,a.sprintf(Y.INVALID_ROLLOUT_ID,z,t.rolloutId,t.key)),{experiment:null,variation:null,decisionSource:X.ROLLOUT};if(0===o.experiments.length)return this.logger.log(q.ERROR,a.sprintf(J.ROLLOUT_HAS_NO_EXPERIMENTS,z,t.rolloutId)),{experiment:null,variation:null,decisionSource:X.ROLLOUT};var i,s,u,c,f,l,p=this._getBucketingId(r,n),d=o.experiments.length-1;for(i=0;i<d;i++){if(s=e.experimentKeyMap[o.experiments[i].key],l=i+1,this.__checkIfUserIsInAudience(e,s.key,Z.RULE,r,n,l)){if(this.logger.log(q.DEBUG,a.sprintf(J.USER_MEETS_CONDITIONS_FOR_TARGETING_RULE,z,r,l)),u=this.__buildBucketerParams(e,s.key,p,r),c=P.bucket(u),f=e.variationIdMap[c])return this.logger.log(q.DEBUG,a.sprintf(J.USER_BUCKETED_INTO_TARGETING_RULE,z,r,l)),{experiment:s,variation:f,decisionSource:X.ROLLOUT};this.logger.log(q.DEBUG,a.sprintf(J.USER_NOT_BUCKETED_INTO_TARGETING_RULE,z,r,l));break}this.logger.log(q.DEBUG,a.sprintf(J.USER_DOESNT_MEET_CONDITIONS_FOR_TARGETING_RULE,z,r,l))}var v=e.experimentKeyMap[o.experiments[d].key];if(this.__checkIfUserIsInAudience(e,v.key,Z.RULE,r,n,"Everyone Else")){if(this.logger.log(q.DEBUG,a.sprintf(J.USER_MEETS_CONDITIONS_FOR_TARGETING_RULE,z,r,"Everyone Else")),u=this.__buildBucketerParams(e,v.key,p,r),c=P.bucket(u),f=e.variationIdMap[c])return this.logger.log(q.DEBUG,a.sprintf(J.USER_BUCKETED_INTO_EVERYONE_TARGETING_RULE,z,r)),{experiment:v,variation:f,decisionSource:X.ROLLOUT};this.logger.log(q.DEBUG,a.sprintf(J.USER_NOT_BUCKETED_INTO_EVERYONE_TARGETING_RULE,z,r))}return{experiment:null,variation:null,decisionSource:X.ROLLOUT}},Q.prototype._getBucketingId=function(e,t){var r=e;return null!=t&&"object"==typeof t&&t.hasOwnProperty(_.CONTROL_ATTRIBUTES.BUCKETING_ID)&&("string"==typeof t[_.CONTROL_ATTRIBUTES.BUCKETING_ID]?(r=t[_.CONTROL_ATTRIBUTES.BUCKETING_ID],this.logger.log(q.DEBUG,a.sprintf(J.VALID_BUCKETING_ID,z,r))):this.logger.log(q.WARNING,a.sprintf(J.BUCKETING_ID_NOT_STRING,z))),r},Q.prototype.removeForcedVariation=function(e,t,r){if(!e)throw new Error(a.sprintf(Y.INVALID_USER_ID,z));if(!this.forcedVariationMap.hasOwnProperty(e))throw new Error(a.sprintf(Y.USER_NOT_IN_FORCED_VARIATION,z,e));delete this.forcedVariationMap[e][t],this.logger.log(q.DEBUG,a.sprintf(J.VARIATION_REMOVED_FOR_USER,z,r,e))},Q.prototype.__setInForcedVariationMap=function(e,t,r){this.forcedVariationMap.hasOwnProperty(e)||(this.forcedVariationMap[e]={}),this.forcedVariationMap[e][t]=r,this.logger.log(q.DEBUG,a.sprintf(J.USER_MAPPED_TO_FORCED_VARIATION,z,r,t,e))},Q.prototype.getForcedVariation=function(e,t,r){var n,o=this.forcedVariationMap[r];if(!o)return this.logger.log(q.DEBUG,a.sprintf(J.USER_HAS_NO_FORCED_VARIATION,z,r)),null;try{var i=x.getExperimentFromKey(e,t);if(!i.hasOwnProperty("id"))return this.logger.log(q.ERROR,a.sprintf(Y.IMPROPERLY_FORMATTED_EXPERIMENT,z,t)),null;n=i.id}catch(e){return this.logger.log(q.ERROR,e.message),null}var s=o[n];if(!s)return this.logger.log(q.DEBUG,a.sprintf(J.USER_HAS_NO_FORCED_VARIATION_FOR_EXPERIMENT,z,t,r)),null;var u=x.getVariationKeyFromId(e,s);return u?this.logger.log(q.DEBUG,a.sprintf(J.USER_HAS_FORCED_VARIATION,z,u,t,r)):this.logger.log(q.DEBUG,a.sprintf(J.USER_HAS_NO_FORCED_VARIATION_FOR_EXPERIMENT,z,t,r)),u},Q.prototype.setForcedVariation=function(e,t,r,n){if(null!=n&&!W(n))return this.logger.log(q.ERROR,a.sprintf(Y.INVALID_VARIATION_KEY,z)),!1;var o;try{var i=x.getExperimentFromKey(e,t);if(!i.hasOwnProperty("id"))return this.logger.log(q.ERROR,a.sprintf(Y.IMPROPERLY_FORMATTED_EXPERIMENT,z,t)),!1;o=i.id}catch(e){return this.logger.log(q.ERROR,e.message),!1}if(null==n)try{return this.removeForcedVariation(r,o,t,this.logger),!0}catch(e){return this.logger.log(q.ERROR,e.message),!1}var s=x.getVariationIdFromExperimentAndVariationKey(e,t,n);if(!s)return this.logger.log(q.ERROR,a.sprintf(Y.NO_VARIATION_FOR_EXPERIMENT_KEY,z,n,t)),!1;try{return this.__setInForcedVariationMap(r,o,s),!0}catch(e){return this.logger.log(q.ERROR,e.message),!1}};var $=h.REVENUE,ee=h.VALUE,te=function(e,t){if(e&&e.hasOwnProperty($)){var r=e[$],n=parseInt(r,10);return isNaN(n)?(t.log(p.INFO,a.sprintf(v.FAILED_TO_PARSE_REVENUE,"EVENT_TAG_UTILS",r)),null):(t.log(p.INFO,a.sprintf(v.PARSED_REVENUE_VALUE,"EVENT_TAG_UTILS",n)),n)}return null},re=function(e,t){if(e&&e.hasOwnProperty(ee)){var r=e[ee],n=parseFloat(r);return isNaN(n)?(t.log(p.INFO,a.sprintf(v.FAILED_TO_PARSE_VALUE,"EVENT_TAG_UTILS",r)),null):(t.log(p.INFO,a.sprintf(v.PARSED_NUMERIC_VALUE,"EVENT_TAG_UTILS",n)),n)}return null},ne="https://logx.optimizely.com/v1/events";function oe(e){var t=e.attributes,r=e.configObj,n=r.anonymizeIP,o=r.botFiltering;null==n&&(n=!1);var i={snapshots:[],visitor_id:e.userId,attributes:[]},a={account_id:r.accountId,project_id:r.projectId,visitors:[i],revision:r.revision,client_name:e.clientEngine,client_version:e.clientVersion,anonymize_ip:n,enrich_decisions:!0};return Object.keys(t||{}).forEach((function(r){var n=t[r];if(N(r,n)){var o=x.getAttributeId(e.configObj,r,e.logger);o&&a.visitors[0].attributes.push({entity_id:o,key:r,type:"custom",value:t[r]})}})),"boolean"==typeof o&&a.visitors[0].attributes.push({entity_id:_.CONTROL_ATTRIBUTES.BOT_FILTERING,key:_.CONTROL_ATTRIBUTES.BOT_FILTERING,type:"custom",value:o}),a}var ie=function(e){var t={httpVerb:"POST"},r=oe(e);t.url=ne;var n,o,i,a=(n=e.configObj,o=e.experimentId,i=e.variationId,{decisions:[{campaign_id:x.getLayerId(n,o),experiment_id:o,variation_id:i}],events:[{entity_id:x.getLayerId(n,o),timestamp:l.currentTimestamp(),key:"campaign_activated",uuid:l.uuid()}]});return r.visitors[0].snapshots.push(a),t.params=r,t},ae=o.getLogger("EVENT_BUILDER");function se(e,t){var r=[];return Object.keys(t||{}).forEach((function(n){var o=t[n];if(N(n,o)){var i=x.getAttributeId(e,n,ae);i&&r.push({entityId:i,key:n,value:t[n]})}})),r}function ue(e){this.logger=e.logger,this.errorHandler=e.errorHandler,this.__notificationListeners={},a.objectValues(g).forEach(function(e){this.__notificationListeners[e]=[]}.bind(this)),this.__listenerId=1}ue.prototype.addNotificationListener=function(e,t){try{if(!(a.objectValues(g).indexOf(e)>-1))return-1;this.__notificationListeners[e]||(this.__notificationListeners[e]=[]);var r=!1;if((this.__notificationListeners[e]||[]).forEach((function(e){if(e.callback===t)return r=!0,!1})),r)return-1;this.__notificationListeners[e].push({id:this.__listenerId,callback:t});var n=this.__listenerId;return this.__listenerId+=1,n}catch(e){return this.logger.log(p.ERROR,e.message),this.errorHandler.handleError(e),-1}},ue.prototype.removeNotificationListener=function(e){try{var t,r;if(Object.keys(this.__notificationListeners).some(function(n){if((this.__notificationListeners[n]||[]).every((function(o,i){return o.id!==e||(t=i,r=n,!1)})),void 0!==t&&void 0!==r)return!0}.bind(this)),void 0!==t&&void 0!==r)return this.__notificationListeners[r].splice(t,1),!0}catch(e){this.logger.log(p.ERROR,e.message),this.errorHandler.handleError(e)}return!1},ue.prototype.clearAllNotificationListeners=function(){try{a.objectValues(g).forEach(function(e){this.__notificationListeners[e]=[]}.bind(this))}catch(n){this.logger.log(p.ERROR,n.message),this.errorHandler.handleError(n)}},ue.prototype.clearNotificationListeners=function(e){try{this.__notificationListeners[e]=[]}catch(e){this.logger.log(p.ERROR,e.message),this.errorHandler.handleError(e)}},ue.prototype.sendNotifications=function(e,t){try{(this.__notificationListeners[e]||[]).forEach(function(r){var n=r.callback;try{n(t)}catch(t){this.logger.log(p.ERROR,a.sprintf(v.NOTIFICATION_LISTENER_EXCEPTION,"NOTIFICATION_CENTER",e,t.message))}}.bind(this))}catch(e){this.logger.log(p.ERROR,e.message),this.errorHandler.handleError(e)}};function ce(e,t,r,n){var o=e.experimentFeatureMap[r],i={};if(o){var a=n[o],s=(t.variables||[]).reduce((function(e,t){return e[t.id]={id:t.id,value:t.value},e}),{});i=(a||[]).reduce((function(e,r){var n=s[r.id],o=t.featureEnabled&&n?n.value:r.defaultValue;return e[r.key]={id:r.id,key:r.key,type:r.type,value:o},e}),{})}return i}function fe(e,t){return(e.featureFlags||[]).reduce((function(r,n){return r[n.key]={id:n.id,key:n.key,experimentsMap:(n.experimentIds||[]).reduce((function(r,n){var o=e.experimentIdMap[n].key;return r[o]=t[o],r}),{}),variablesMap:(n.variables||[]).reduce((function(e,t){return e[t.key]={id:t.id,key:t.key,type:t.type,value:t.defaultValue},e}),{})},r}),{})}var le=function(e){var t=function(e){var t=(e.rollouts||[]).reduce((function(e,t){return t.experiments.forEach((function(t){e[t.id]=!0})),e}),{}),r=(e.featureFlags||[]).reduce((function(e,t){return e[t.id]=t.variables,e}),{});return(e.experiments||[]).reduce((function(n,o){return t[o.id]||(n[o.key]={id:o.id,key:o.key,variationsMap:(o.variations||[]).reduce((function(t,n){return t[n.key]={id:n.id,key:n.key,variablesMap:ce(e,n,o.id,r)},L(e,o.id)&&(t[n.key].featureEnabled=n.featureEnabled),t}),{})}),n}),{})}(e);return{experimentsMap:t,featuresMap:fe(e,t),revision:e.revision}},pe=o.getLogger();function de(e,t){return e instanceof Error?e.message:t||"Unknown error"}function ve(e){try{this.__initialize(e)}catch(e){pe.error(e),this.__updateListeners=[],this.__configObj=null,this.__optimizelyConfigObj=null,this.__readyPromise=Promise.resolve({success:!1,reason:de(e,"Error in initialize")})}}ve.prototype.__initialize=function(e){if(this.__updateListeners=[],this.jsonSchemaValidator=e.jsonSchemaValidator,!e.datafile&&!e.sdkKey){this.__configObj=null;var t=new Error(a.sprintf(d.DATAFILE_AND_SDK_KEY_MISSING,"PROJECT_CONFIG_MANAGER"));return this.__readyPromise=Promise.resolve({success:!1,reason:de(t)}),void pe.error(t)}var r,n=this.__getDatafileFromConfig(e);if(n)try{this.__configObj=x.tryCreatingProjectConfig({datafile:n,jsonSchemaValidator:this.jsonSchemaValidator,logger:pe}),this.__optimizelyConfigObj=le(this.__configObj)}catch(e){pe.error(e),r=e,this.__configObj=null}else this.__configObj=null;if(e.sdkKey){var o={sdkKey:e.sdkKey};this.__validateDatafileOptions(e.datafileOptions)&&l.assign(o,e.datafileOptions),n&&this.__configObj&&(o.datafile=n),this.datafileManager=new u.HttpPollingDatafileManager(o),this.datafileManager.start(),this.__readyPromise=this.datafileManager.onReady().then(this.__onDatafileManagerReadyFulfill.bind(this),this.__onDatafileManagerReadyReject.bind(this)),this.datafileManager.on("update",this.__onDatafileManagerUpdate.bind(this))}else this.__configObj?this.__readyPromise=Promise.resolve({success:!0}):this.__readyPromise=Promise.resolve({success:!1,reason:de(r,"Invalid datafile")})},ve.prototype.__onDatafileManagerReadyFulfill=function(){var e,t=this.datafileManager.get();try{e=x.tryCreatingProjectConfig({datafile:t,jsonSchemaValidator:this.jsonSchemaValidator,logger:pe})}catch(e){return pe.error(e),{success:!1,reason:de(e)}}return this.__handleNewConfigObj(e),{success:!0}},ve.prototype.__onDatafileManagerReadyReject=function(e){return{success:!1,reason:de(e,"Failed to become ready")}},ve.prototype.__onDatafileManagerUpdate=function(){var e,t=this.datafileManager.get();try{e=x.tryCreatingProjectConfig({datafile:t,jsonSchemaValidator:this.jsonSchemaValidator,logger:pe})}catch(e){pe.error(e)}e&&this.__handleNewConfigObj(e)},ve.prototype.__getDatafileFromConfig=function(e){var t=null;try{e.datafile&&(I(e.datafile),t="string"==typeof e.datafile||e.datafile instanceof String?JSON.parse(e.datafile):e.datafile)}catch(e){pe.error(e)}return t},ve.prototype.__validateDatafileOptions=function(e){return void 0===e||"object"==typeof e&&null!==e},ve.prototype.__handleNewConfigObj=function(e){var t=this.__configObj;(t?t.revision:"null")!==e.revision&&(this.__configObj=e,this.__optimizelyConfigObj=le(e),this.__updateListeners.forEach((function(t){t(e)})))},ve.prototype.getConfig=function(){return this.__configObj},ve.prototype.getOptimizelyConfig=function(){return this.__optimizelyConfigObj},ve.prototype.onReady=function(){return this.__readyPromise},ve.prototype.onUpdate=function(e){return this.__updateListeners.push(e),function(){var t=this.__updateListeners.indexOf(e);t>-1&&this.__updateListeners.splice(t,1)}.bind(this)},ve.prototype.stop=function(){this.datafileManager&&this.datafileManager.stop(),this.__updateListeners=[]};var he={ProjectConfigManager:ve},ge=_.ERROR_MESSAGES,ye=_.LOG_LEVEL,Ee=_.LOG_MESSAGES,_e=_.DECISION_SOURCES,me=_.FEATURE_VARIABLE_TYPES,Oe=_.DECISION_NOTIFICATION_TYPES,be=_.NOTIFICATION_TYPES;function Ie(e){var t=e.clientEngine;-1===_.VALID_CLIENT_ENGINES.indexOf(t)&&(e.logger.log(ye.INFO,a.sprintf(Ee.INVALID_CLIENT_ENGINE,"OPTIMIZELY",t)),t=_.NODE_CLIENT_ENGINE),this.clientEngine=t,this.clientVersion=e.clientVersion||_.NODE_CLIENT_VERSION,this.errorHandler=e.errorHandler,this.eventDispatcher=e.eventDispatcher,this.__isOptimizelyConfigValid=e.isValidInstance,this.logger=e.logger,this.projectConfigManager=new he.ProjectConfigManager({datafile:e.datafile,datafileOptions:e.datafileOptions,jsonSchemaValidator:e.jsonSchemaValidator,sdkKey:e.sdkKey}),this.__disposeOnUpdate=this.projectConfigManager.onUpdate(function(e){this.logger.log(ye.INFO,a.sprintf(Ee.UPDATED_OPTIMIZELY_CONFIG,"OPTIMIZELY",e.revision,e.projectId)),this.notificationCenter.sendNotifications(be.OPTIMIZELY_CONFIG_UPDATE)}.bind(this));var r=this.projectConfigManager.onReady(),n=null;if(e.userProfileService)try{(function(e){if("function"!=typeof e.lookup)throw new Error(a.sprintf(d.INVALID_USER_PROFILE_SERVICE,"USER_PROFILE_SERVICE_VALIDATOR","Missing function 'lookup'"));if("function"!=typeof e.save)throw new Error(a.sprintf(d.INVALID_USER_PROFILE_SERVICE,"USER_PROFILE_SERVICE_VALIDATOR","Missing function 'save'"));return!0})(e.userProfileService)&&(n=e.userProfileService,this.logger.log(ye.INFO,a.sprintf(Ee.VALID_USER_PROFILE_SERVICE,"OPTIMIZELY")))}catch(e){this.logger.log(ye.WARNING,e.message)}this.decisionService=function(e){return new Q(e)}({userProfileService:n,logger:this.logger,UNSTABLE_conditionEvaluators:e.UNSTABLE_conditionEvaluators}),this.notificationCenter=function(e){return new ue(e)}({logger:this.logger,errorHandler:this.errorHandler}),this.eventProcessor=new i.LogTierV1EventProcessor({dispatcher:this.eventDispatcher,flushInterval:e.eventFlushInterval,batchSize:e.eventBatchSize,maxQueueSize:e.eventMaxQueueSize,notificationCenter:this.notificationCenter});var o=this.eventProcessor.start();this.__readyPromise=Promise.all([r,o]).then((function(e){return e[0]})),this.__readyTimeouts={},this.__nextReadyTimeoutId=0}Ie.prototype.__isValidInstance=function(){return this.__isOptimizelyConfigValid&&this.projectConfigManager.getConfig()},Ie.prototype.activate=function(e,t,r){try{if(!this.__isValidInstance())return this.logger.log(ye.ERROR,a.sprintf(Ee.INVALID_OBJECT,"OPTIMIZELY","activate")),null;if(!this.__validateInputs({experiment_key:e,user_id:t},r))return this.__notActivatingExperiment(e,t);var n=this.projectConfigManager.getConfig();if(!n)return null;try{var o=this.getVariation(e,t,r);if(null===o)return this.__notActivatingExperiment(e,t);if(!x.isRunning(n,e)){var i=a.sprintf(Ee.SHOULD_NOT_DISPATCH_ACTIVATE,"OPTIMIZELY",e);return this.logger.log(ye.DEBUG,i),o}return this._sendImpressionEvent(e,o,t,r),o}catch(r){this.logger.log(ye.ERROR,r.message);var s=a.sprintf(Ee.NOT_ACTIVATING_USER,"OPTIMIZELY",t,e);return this.logger.log(ye.INFO,s),this.errorHandler.handleError(r),null}}catch(e){return this.logger.log(ye.ERROR,e.message),this.errorHandler.handleError(e),null}},Ie.prototype._sendImpressionEvent=function(e,t,r,n){var o=this.projectConfigManager.getConfig();if(o){var i=function(e){var t=e.configObj,r=e.experimentKey,n=e.variationKey,o=e.userId,i=e.userAttributes,a=e.clientEngine,s=e.clientVersion,u=x.getVariationIdFromExperimentAndVariationKey(t,r,n),c=x.getExperimentId(t,r),f=x.getLayerId(t,c);return{type:"impression",timestamp:l.currentTimestamp(),uuid:l.uuid(),user:{id:o,attributes:se(t,i)},context:{accountId:t.accountId,projectId:t.projectId,revision:t.revision,clientName:a,clientVersion:s,anonymizeIP:t.anonymizeIP||!1,botFiltering:t.botFiltering},layer:{id:f},experiment:{id:c,key:r},variation:{id:u,key:n}}}({experimentKey:e,variationKey:t,userId:r,userAttributes:n,clientEngine:this.clientEngine,clientVersion:this.clientVersion,configObj:o});this.eventProcessor.process(i),this.__emitNotificationCenterActivate(e,t,r,n)}},Ie.prototype.__emitNotificationCenterActivate=function(e,t,r,n){var o=this.projectConfigManager.getConfig();if(o){var i,a=x.getVariationIdFromExperimentAndVariationKey(o,e,t),s=x.getExperimentId(o,e),u={attributes:n,clientEngine:this.clientEngine,clientVersion:this.clientVersion,configObj:o,experimentId:s,userId:r,variationId:a,logger:this.logger},c=ie(u),f=o.experimentKeyMap[e];f&&f.variationKeyMap&&(i=f.variationKeyMap[t]),this.notificationCenter.sendNotifications(be.ACTIVATE,{experiment:f,userId:r,attributes:n,variation:i,logEvent:c})}},Ie.prototype.track=function(e,t,r,n){try{if(!this.__isValidInstance())return void this.logger.log(ye.ERROR,a.sprintf(Ee.INVALID_OBJECT,"OPTIMIZELY","track"));if(!this.__validateInputs({user_id:t,event_key:e},r,n))return;var o=this.projectConfigManager.getConfig();if(!o)return;if(!x.eventWithKeyExists(o,e))return this.logger.log(ye.WARNING,a.sprintf(_.LOG_MESSAGES.EVENT_KEY_NOT_FOUND,"OPTIMIZELY",e)),void this.logger.log(ye.WARNING,a.sprintf(Ee.NOT_TRACKING_USER,"OPTIMIZELY",t));var i=function(e){var t=e.configObj,r=e.userId,n=e.userAttributes,o=e.clientEngine,i=e.clientVersion,a=e.eventKey,s=e.eventTags,u=x.getEventId(t,a);return{type:"conversion",timestamp:l.currentTimestamp(),uuid:l.uuid(),user:{id:r,attributes:se(t,n)},context:{accountId:t.accountId,projectId:t.projectId,revision:t.revision,clientName:o,clientVersion:i,anonymizeIP:t.anonymizeIP||!1,botFiltering:t.botFiltering},event:{id:u,key:a},revenue:te(s,ae),value:re(s,ae),tags:s}}({eventKey:e,eventTags:n=this.__filterEmptyValues(n),userId:t,userAttributes:r,clientEngine:this.clientEngine,clientVersion:this.clientVersion,configObj:o});this.logger.log(ye.INFO,a.sprintf(_.LOG_MESSAGES.TRACK_EVENT,"OPTIMIZELY",e,t)),this.eventProcessor.process(i),this.__emitNotificationCenterTrack(e,t,r,n)}catch(e){this.logger.log(ye.ERROR,e.message),this.errorHandler.handleError(e);var s=a.sprintf(Ee.NOT_TRACKING_USER,"OPTIMIZELY",t);this.logger.log(ye.ERROR,s)}},Ie.prototype.__emitNotificationCenterTrack=function(e,t,r,n){try{var o=this.projectConfigManager.getConfig();if(!o)return;var i=function(e){var t={httpVerb:"POST"},r=oe(e);t.url=ne;var n=function(e,t,r,n){var o={events:[]},i={entity_id:x.getEventId(e,t),timestamp:l.currentTimestamp(),uuid:l.uuid(),key:t};if(r){var a=te(r,n);null!==a&&(i[_.RESERVED_EVENT_KEYWORDS.REVENUE]=a);var s=re(r,n);null!==s&&(i[_.RESERVED_EVENT_KEYWORDS.VALUE]=s),i.tags=r}return o.events.push(i),o}(e.configObj,e.eventKey,e.eventTags,e.logger);return r.visitors[0].snapshots=[n],t.params=r,t}({attributes:r,clientEngine:this.clientEngine,clientVersion:this.clientVersion,configObj:o,eventKey:e,eventTags:n,logger:this.logger,userId:t});this.notificationCenter.sendNotifications(be.TRACK,{eventKey:e,userId:t,attributes:r,eventTags:n,logEvent:i})}catch(e){this.logger.log(ye.ERROR,e.message),this.errorHandler.handleError(e)}},Ie.prototype.getVariation=function(e,t,r){try{if(!this.__isValidInstance())return this.logger.log(ye.ERROR,a.sprintf(Ee.INVALID_OBJECT,"OPTIMIZELY","getVariation")),null;try{if(!this.__validateInputs({experiment_key:e,user_id:t},r))return null;var n=this.projectConfigManager.getConfig();if(!n)return null;var o=n.experimentKeyMap[e];if(!o)return this.logger.log(ye.DEBUG,a.sprintf(ge.INVALID_EXPERIMENT_KEY,"OPTIMIZELY",e)),null;var i=this.decisionService.getVariation(n,e,t,r),s=x.isFeatureExperiment(n,o.id)?Oe.FEATURE_TEST:Oe.AB_TEST;return this.notificationCenter.sendNotifications(be.DECISION,{type:s,userId:t,attributes:r||{},decisionInfo:{experimentKey:e,variationKey:i}}),i}catch(e){return this.logger.log(ye.ERROR,e.message),this.errorHandler.handleError(e),null}}catch(e){return this.logger.log(ye.ERROR,e.message),this.errorHandler.handleError(e),null}},Ie.prototype.setForcedVariation=function(e,t,r){if(!this.__validateInputs({experiment_key:e,user_id:t}))return!1;var n=this.projectConfigManager.getConfig();if(!n)return!1;try{return this.decisionService.setForcedVariation(n,e,t,r)}catch(e){return this.logger.log(ye.ERROR,e.message),this.errorHandler.handleError(e),!1}},Ie.prototype.getForcedVariation=function(e,t){if(!this.__validateInputs({experiment_key:e,user_id:t}))return null;var r=this.projectConfigManager.getConfig();if(!r)return null;try{return this.decisionService.getForcedVariation(r,e,t)}catch(e){return this.logger.log(ye.ERROR,e.message),this.errorHandler.handleError(e),null}},Ie.prototype.__validateInputs=function(e,t,r){try{if(e.hasOwnProperty("user_id")){var n=e.user_id;if("string"!=typeof n||null===n||"undefined"===n)throw new Error(a.sprintf(ge.INVALID_INPUT_FORMAT,"OPTIMIZELY","user_id"));delete e.user_id}for(var o=Object.keys(e),i=0;i<o.length;i++){var s=o[i];if(!W(e[s]))throw new Error(a.sprintf(ge.INVALID_INPUT_FORMAT,"OPTIMIZELY",s))}return t&&function(e){if("object"!=typeof e||Array.isArray(e)||null===e)throw new Error(a.sprintf(d.INVALID_ATTRIBUTES,"ATTRIBUTES_VALIDATOR"));Object.keys(e).forEach((function(t){if(void 0===e[t])throw new Error(a.sprintf(d.UNDEFINED_ATTRIBUTE,"ATTRIBUTES_VALIDATOR",t))}))}(t),r&&function(e){if("object"!=typeof e||Array.isArray(e)||null===e)throw new Error(a.sprintf(d.INVALID_EVENT_TAGS,"EVENT_TAGS_VALIDATOR"))}(r),!0}catch(e){return this.logger.log(ye.ERROR,e.message),this.errorHandler.handleError(e),!1}},Ie.prototype.__notActivatingExperiment=function(e,t){var r=a.sprintf(Ee.NOT_ACTIVATING_USER,"OPTIMIZELY",t,e);return this.logger.log(ye.INFO,r),null},Ie.prototype.__filterEmptyValues=function(e){for(var t in e)!e.hasOwnProperty(t)||null!==e[t]&&void 0!==e[t]||delete e[t];return e},Ie.prototype.isFeatureEnabled=function(e,t,r){try{if(!this.__isValidInstance())return this.logger.log(ye.ERROR,a.sprintf(Ee.INVALID_OBJECT,"OPTIMIZELY","isFeatureEnabled")),!1;if(!this.__validateInputs({feature_key:e,user_id:t},r))return!1;var n=this.projectConfigManager.getConfig();if(!n)return!1;var o=x.getFeatureFromKey(n,e,this.logger);if(!o)return!1;var i=!1,s=this.decisionService.getVariationForFeature(n,o,t,r),u=s.variation,c={};u&&(i=u.featureEnabled,s.decisionSource===_e.FEATURE_TEST&&(c={experimentKey:s.experiment.key,variationKey:s.variation.key},this._sendImpressionEvent(s.experiment.key,s.variation.key,t,r))),!0===i?this.logger.log(ye.INFO,a.sprintf(Ee.FEATURE_ENABLED_FOR_USER,"OPTIMIZELY",e,t)):(this.logger.log(ye.INFO,a.sprintf(Ee.FEATURE_NOT_ENABLED_FOR_USER,"OPTIMIZELY",e,t)),i=!1);var f={featureKey:e,featureEnabled:i,source:s.decisionSource,sourceInfo:c};return this.notificationCenter.sendNotifications(be.DECISION,{type:Oe.FEATURE,userId:t,attributes:r||{},decisionInfo:f}),i}catch(e){return this.logger.log(ye.ERROR,e.message),this.errorHandler.handleError(e),!1}},Ie.prototype.getEnabledFeatures=function(e,t){try{var r=[];if(!this.__isValidInstance())return this.logger.log(ye.ERROR,a.sprintf(Ee.INVALID_OBJECT,"OPTIMIZELY","getEnabledFeatures")),r;if(!this.__validateInputs({user_id:e}))return r;var n=this.projectConfigManager.getConfig();return n?(a.objectValues(n.featureKeyMap).forEach(function(n){this.isFeatureEnabled(n.key,e,t)&&r.push(n.key)}.bind(this)),r):r}catch(e){return this.logger.log(ye.ERROR,e.message),this.errorHandler.handleError(e),[]}},Ie.prototype.getFeatureVariable=function(e,t,r,n){try{return this.__isValidInstance()?this._getFeatureVariableForType(e,t,null,r,n):(this.logger.log(ye.ERROR,a.sprintf(Ee.INVALID_OBJECT,"OPTIMIZELY","getFeatureVariable")),null)}catch(e){return this.logger.log(ye.ERROR,e.message),this.errorHandler.handleError(e),null}},Ie.prototype._getFeatureVariableForType=function(e,t,r,n,o){if(!this.__validateInputs({feature_key:e,variable_key:t,user_id:n},o))return null;var i=this.projectConfigManager.getConfig();if(!i)return null;var s=x.getFeatureFromKey(i,e,this.logger);if(!s)return null;var u=x.getVariableForFeature(i,e,t,this.logger);if(!u)return null;if(r&&u.type!==r)return this.logger.log(ye.WARNING,a.sprintf(Ee.VARIABLE_REQUESTED_WITH_WRONG_TYPE,"OPTIMIZELY",r,u.type)),null;var c=this.decisionService.getVariationForFeature(i,s,n,o),f=null!==c.variation&&c.variation.featureEnabled,l=this._getFeatureVariableValueFromVariation(e,f,c.variation,u,n),p={};return c.decisionSource===_e.FEATURE_TEST&&(p={experimentKey:c.experiment.key,variationKey:c.variation.key}),this.notificationCenter.sendNotifications(be.DECISION,{type:Oe.FEATURE_VARIABLE,userId:n,attributes:o||{},decisionInfo:{featureKey:e,featureEnabled:f,source:c.decisionSource,variableKey:t,variableValue:l,variableType:u.type,sourceInfo:p}}),l},Ie.prototype._getFeatureVariableValueFromVariation=function(e,t,r,n,o){var i=this.projectConfigManager.getConfig();if(!i)return null;var s=n.defaultValue;if(null!==r){var u=x.getVariableValueForVariation(i,n,r,this.logger);null!==u?t?(s=u,this.logger.log(ye.INFO,a.sprintf(Ee.USER_RECEIVED_VARIABLE_VALUE,"OPTIMIZELY",s,n.key,e))):this.logger.log(ye.INFO,a.sprintf(Ee.FEATURE_NOT_ENABLED_RETURN_DEFAULT_VARIABLE_VALUE,"OPTIMIZELY",e,o,s)):this.logger.log(ye.INFO,a.sprintf(Ee.VARIABLE_NOT_USED_RETURN_DEFAULT_VARIABLE_VALUE,"OPTIMIZELY",n.key,r.key))}else this.logger.log(ye.INFO,a.sprintf(Ee.USER_RECEIVED_DEFAULT_VARIABLE_VALUE,"OPTIMIZELY",o,n.key,e));return x.getTypeCastValue(s,n.type,this.logger)},Ie.prototype.getFeatureVariableBoolean=function(e,t,r,n){try{return this.__isValidInstance()?this._getFeatureVariableForType(e,t,me.BOOLEAN,r,n):(this.logger.log(ye.ERROR,a.sprintf(Ee.INVALID_OBJECT,"OPTIMIZELY","getFeatureVariableBoolean")),null)}catch(e){return this.logger.log(ye.ERROR,e.message),this.errorHandler.handleError(e),null}},Ie.prototype.getFeatureVariableDouble=function(e,t,r,n){try{return this.__isValidInstance()?this._getFeatureVariableForType(e,t,me.DOUBLE,r,n):(this.logger.log(ye.ERROR,a.sprintf(Ee.INVALID_OBJECT,"OPTIMIZELY","getFeatureVariableDouble")),null)}catch(e){return this.logger.log(ye.ERROR,e.message),this.errorHandler.handleError(e),null}},Ie.prototype.getFeatureVariableInteger=function(e,t,r,n){try{return this.__isValidInstance()?this._getFeatureVariableForType(e,t,me.INTEGER,r,n):(this.logger.log(ye.ERROR,a.sprintf(Ee.INVALID_OBJECT,"OPTIMIZELY","getFeatureVariableInteger")),null)}catch(e){return this.logger.log(ye.ERROR,e.message),this.errorHandler.handleError(e),null}},Ie.prototype.getFeatureVariableString=function(e,t,r,n){try{return this.__isValidInstance()?this._getFeatureVariableForType(e,t,me.STRING,r,n):(this.logger.log(ye.ERROR,a.sprintf(Ee.INVALID_OBJECT,"OPTIMIZELY","getFeatureVariableString")),null)}catch(e){return this.logger.log(ye.ERROR,e.message),this.errorHandler.handleError(e),null}},Ie.prototype.getFeatureVariableJSON=function(e,t,r,n){try{return this.__isValidInstance()?this._getFeatureVariableForType(e,t,me.JSON,r,n):(this.logger.log(ye.ERROR,a.sprintf(Ee.INVALID_OBJECT,"OPTIMIZELY","getFeatureVariableJSON")),null)}catch(e){return this.logger.log(ye.ERROR,e.message),this.errorHandler.handleError(e),null}},Ie.prototype.getAllFeatureVariables=function(e,t,r){try{if(!this.__isValidInstance())return this.logger.log(ye.ERROR,a.sprintf(Ee.INVALID_OBJECT,"OPTIMIZELY","getAllFeatureVariables")),null;if(!this.__validateInputs({feature_key:e,user_id:t},r))return null;var n=this.projectConfigManager.getConfig();if(!n)return null;var o=x.getFeatureFromKey(n,e,this.logger);if(!o)return null;var i=this.decisionService.getVariationForFeature(n,o,t,r),s=null!==i.variation&&i.variation.featureEnabled,u={};o.variables.forEach(function(r){u[r.key]=this._getFeatureVariableValueFromVariation(e,s,i.variation,r,t)}.bind(this));var c={};return i.decisionSource===_e.FEATURE_TEST&&(c={experimentKey:i.experiment.key,variationKey:i.variation.key}),this.notificationCenter.sendNotifications(be.DECISION,{type:Oe.ALL_FEATURE_VARIABLES,userId:t,attributes:r||{},decisionInfo:{featureKey:e,featureEnabled:s,source:i.decisionSource,variableValues:u,sourceInfo:c}}),u}catch(e){return this.logger.log(ye.ERROR,e.message),this.errorHandler.handleError(e),null}},Ie.prototype.getOptimizelyConfig=function(){try{return this.projectConfigManager.getConfig()?this.projectConfigManager.getOptimizelyConfig():null}catch(n){return this.logger.log(ye.ERROR,n.message),this.errorHandler.handleError(n),null}},Ie.prototype.close=function(){try{var e=this.eventProcessor.stop();return this.__disposeOnUpdate&&(this.__disposeOnUpdate(),this.__disposeOnUpdate=null),this.projectConfigManager&&this.projectConfigManager.stop(),Object.keys(this.__readyTimeouts).forEach(function(e){var t=this.__readyTimeouts[e];clearTimeout(t.readyTimeout),t.onClose()}.bind(this)),this.__readyTimeouts={},e.then((function(){return{success:!0}}),(function(e){return{success:!1,reason:String(e)}}))}catch(e){return this.logger.log(ye.ERROR,e.message),this.errorHandler.handleError(e),Promise.resolve({success:!1,reason:String(e)})}},Ie.prototype.onReady=function(e){var t,r;"object"==typeof e&&null!==e&&(t=e.timeout),l.isSafeInteger(t)||(t=3e4);var n=new Promise((function(e){r=e})),o=this.__nextReadyTimeoutId;this.__nextReadyTimeoutId++;var i=function(){delete this.__readyTimeouts[o],r({success:!1,reason:a.sprintf("onReady timeout expired after %s ms",t)})}.bind(this),s=setTimeout(i,t);return this.__readyTimeouts[o]={readyTimeout:s,onClose:function(){r({success:!1,reason:"Instance closed"})}},this.__readyPromise.then(function(){clearTimeout(s),delete this.__readyTimeouts[o],r({success:!0})}.bind(this)),Promise.race([this.__readyPromise,n])};var Te=o.getLogger();o.setLogHandler(S.createLogger()),o.setLogLevel(o.LogLevel.INFO);var Re=!1,Ae=function(e){try{(e=e||{}).errorHandler&&o.setErrorHandler(e.errorHandler),e.logger&&(o.setLogHandler(e.logger),o.setLogLevel(o.LogLevel.NOTSET)),void 0!==e.logLevel&&o.setLogLevel(e.logLevel);try{b(e),e.isValidInstance=!0}catch(o){Te.error(o),e.isValidInstance=!1}var t;null==e.eventDispatcher?(t=new i.LocalStoragePendingEventsDispatcher({eventDispatcher:R}),Re||(t.sendPendingEvents(),Re=!0)):t=e.eventDispatcher,function(e){return f(e)&&e>=1}((e=l.assign({clientEngine:_.JAVASCRIPT_CLIENT_ENGINE,eventBatchSize:10,eventFlushInterval:1e3},e,{eventDispatcher:t,logger:Te,errorHandler:o.getErrorHandler()})).eventBatchSize)||(Te.warn("Invalid eventBatchSize %s, defaulting to %s",e.eventBatchSize,10),e.eventBatchSize=10),function(e){return f(e)&&e>0}(e.eventFlushInterval)||(Te.warn("Invalid eventFlushInterval %s, defaulting to %s",e.eventFlushInterval,1e3),e.eventFlushInterval=1e3);var r=new Ie(e);try{if("function"==typeof window.addEventListener){var n="onpagehide"in window?"pagehide":"unload";window.addEventListener(n,(function(){r.close()}),!1)}}catch(e){Te.error(_.LOG_MESSAGES.UNABLE_TO_ATTACH_UNLOAD,"INDEX_BROWSER",e.message)}return r}catch(e){return Te.error(e),null}},Se=function(){Re=!1},Ne={logging:S,errorHandler:T,eventDispatcher:R,enums:_,setLogger:o.setLogHandler,setLogLevel:o.setLogLevel,createInstance:Ae,__internalResetRetryState:Se};Object.defineProperty(t,"setLogLevel",{enumerable:!0,get:function(){return o.setLogLevel}}),Object.defineProperty(t,"setLogger",{enumerable:!0,get:function(){return o.setLogHandler}}),t.__internalResetRetryState=Se,t.createInstance=Ae,t.default=Ne,t.enums=_,t.errorHandler=T,t.eventDispatcher=R,t.logging=S},21924:function(e,t,r){"use strict";var n=r(40210),o=r(55559),i=o(n("String.prototype.indexOf"));e.exports=function(e,t){var r=n(e,!!t);return"function"===typeof r&&i(e,".prototype.")>-1?o(r):r}},55559:function(e,t,r){"use strict";var n=r(58612),o=r(40210),i=o("%Function.prototype.apply%"),a=o("%Function.prototype.call%"),s=o("%Reflect.apply%",!0)||n.call(a,i),u=o("%Object.getOwnPropertyDescriptor%",!0),c=o("%Object.defineProperty%",!0),f=o("%Math.max%");if(c)try{c({},"a",{value:1})}catch(p){c=null}e.exports=function(e){var t=s(n,a,arguments);if(u&&c){var r=u(t,"length");r.configurable&&c(t,"length",{value:1+f(0,e.length-(arguments.length-1))})}return t};var l=function(){return s(n,i,arguments)};c?c(e.exports,"apply",{value:l}):e.exports.apply=l},40487:function(e){var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}};e.exports=t},71012:function(e){!function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var r=[],n=0;n<e.length;n+=3)for(var o=e[n]<<16|e[n+1]<<8|e[n+2],i=0;i<4;i++)8*n+6*i<=8*e.length?r.push(t.charAt(o>>>6*(3-i)&63)):r.push("=");return r.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],n=0,o=0;n<e.length;o=++n%4)0!=o&&r.push((t.indexOf(e.charAt(n-1))&Math.pow(2,-2*o+8)-1)<<2*o|t.indexOf(e.charAt(n))>>>6-2*o);return r}};e.exports=r}()},17648:function(e){"use strict";var t="Function.prototype.bind called on incompatible ",r=Array.prototype.slice,n=Object.prototype.toString,o="[object Function]";e.exports=function(e){var i=this;if("function"!==typeof i||n.call(i)!==o)throw new TypeError(t+i);for(var a,s=r.call(arguments,1),u=function(){if(this instanceof a){var t=i.apply(this,s.concat(r.call(arguments)));return Object(t)===t?t:this}return i.apply(e,s.concat(r.call(arguments)))},c=Math.max(0,i.length-s.length),f=[],l=0;l<c;l++)f.push("$"+l);if(a=Function("binder","return function ("+f.join(",")+"){ return binder.apply(this,arguments); }")(u),i.prototype){var p=function(){};p.prototype=i.prototype,a.prototype=new p,p.prototype=null}return a}},58612:function(e,t,r){"use strict";var n=r(17648);e.exports=Function.prototype.bind||n},40210:function(e,t,r){"use strict";var n,o=SyntaxError,i=Function,a=TypeError,s=function(e){try{return i('"use strict"; return ('+e+").constructor;")()}catch(t){}},u=Object.getOwnPropertyDescriptor;if(u)try{u({},"")}catch(w){u=null}var c=function(){throw new a},f=u?function(){try{return c}catch(e){try{return u(arguments,"callee").get}catch(t){return c}}}():c,l=r(41405)(),p=Object.getPrototypeOf||function(e){return e.__proto__},d={},v="undefined"===typeof Uint8Array?n:p(Uint8Array),h={"%AggregateError%":"undefined"===typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":l?p([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":d,"%AsyncGenerator%":d,"%AsyncGeneratorFunction%":d,"%AsyncIteratorPrototype%":d,"%Atomics%":"undefined"===typeof Atomics?n:Atomics,"%BigInt%":"undefined"===typeof BigInt?n:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"===typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":d,"%Int8Array%":"undefined"===typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":l?p(p([][Symbol.iterator]())):n,"%JSON%":"object"===typeof JSON?JSON:n,"%Map%":"undefined"===typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&l?p((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?n:Promise,"%Proxy%":"undefined"===typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"===typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&l?p((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":l?p(""[Symbol.iterator]()):n,"%Symbol%":l?Symbol:n,"%SyntaxError%":o,"%ThrowTypeError%":f,"%TypedArray%":v,"%TypeError%":a,"%Uint8Array%":"undefined"===typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"===typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?n:WeakSet},g=function e(t){var r;if("%AsyncFunction%"===t)r=s("async function () {}");else if("%GeneratorFunction%"===t)r=s("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=s("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&(r=p(o.prototype))}return h[t]=r,r},y={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},E=r(58612),_=r(17642),m=E.call(Function.call,Array.prototype.concat),O=E.call(Function.apply,Array.prototype.splice),b=E.call(Function.call,String.prototype.replace),I=E.call(Function.call,String.prototype.slice),T=E.call(Function.call,RegExp.prototype.exec),R=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,A=/\\(\\)?/g,S=function(e){var t=I(e,0,1),r=I(e,-1);if("%"===t&&"%"!==r)throw new o("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new o("invalid intrinsic syntax, expected opening `%`");var n=[];return b(e,R,(function(e,t,r,o){n[n.length]=r?b(o,A,"$1"):t||e})),n},N=function(e,t){var r,n=e;if(_(y,n)&&(n="%"+(r=y[n])[0]+"%"),_(h,n)){var i=h[n];if(i===d&&(i=g(n)),"undefined"===typeof i&&!t)throw new a("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:i}}throw new o("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!==typeof e||0===e.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof t)throw new a('"allowMissing" argument must be a boolean');if(null===T(/^%?[^%]*%?$/g,e))throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=S(e),n=r.length>0?r[0]:"",i=N("%"+n+"%",t),s=i.name,c=i.value,f=!1,l=i.alias;l&&(n=l[0],O(r,m([0,1],l)));for(var p=1,d=!0;p<r.length;p+=1){var v=r[p],g=I(v,0,1),y=I(v,-1);if(('"'===g||"'"===g||"`"===g||'"'===y||"'"===y||"`"===y)&&g!==y)throw new o("property names with quotes must have matching quotes");if("constructor"!==v&&d||(f=!0),_(h,s="%"+(n+="."+v)+"%"))c=h[s];else if(null!=c){if(!(v in c)){if(!t)throw new a("base intrinsic for "+e+" exists, but the property is not available.");return}if(u&&p+1>=r.length){var E=u(c,v);c=(d=!!E)&&"get"in E&&!("originalValue"in E.get)?E.get:c[v]}else d=_(c,v),c=c[v];d&&!f&&(h[s]=c)}}return c}},41405:function(e,t,r){"use strict";var n="undefined"!==typeof Symbol&&Symbol,o=r(55419);e.exports=function(){return"function"===typeof n&&("function"===typeof Symbol&&("symbol"===typeof n("foo")&&("symbol"===typeof Symbol("bar")&&o())))}},55419:function(e){"use strict";e.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"===typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"===typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},17642:function(e,t,r){"use strict";var n=r(58612);e.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},48738:function(e){function t(e){return!!e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"===typeof e.readFloatLE&&"function"===typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},2568:function(e,t,r){!function(){var t=r(71012),n=r(40487).utf8,o=r(48738),i=r(40487).bin,a=function(e,r){e.constructor==String?e=r&&"binary"===r.encoding?i.stringToBytes(e):n.stringToBytes(e):o(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var s=t.bytesToWords(e),u=8*e.length,c=1732584193,f=-271733879,l=-1732584194,p=271733878,d=0;d<s.length;d++)s[d]=16711935&(s[d]<<8|s[d]>>>24)|4278255360&(s[d]<<24|s[d]>>>8);s[u>>>5]|=128<<u%32,s[14+(u+64>>>9<<4)]=u;var v=a._ff,h=a._gg,g=a._hh,y=a._ii;for(d=0;d<s.length;d+=16){var E=c,_=f,m=l,O=p;c=v(c,f,l,p,s[d+0],7,-680876936),p=v(p,c,f,l,s[d+1],12,-389564586),l=v(l,p,c,f,s[d+2],17,606105819),f=v(f,l,p,c,s[d+3],22,-1044525330),c=v(c,f,l,p,s[d+4],7,-176418897),p=v(p,c,f,l,s[d+5],12,1200080426),l=v(l,p,c,f,s[d+6],17,-1473231341),f=v(f,l,p,c,s[d+7],22,-45705983),c=v(c,f,l,p,s[d+8],7,1770035416),p=v(p,c,f,l,s[d+9],12,-1958414417),l=v(l,p,c,f,s[d+10],17,-42063),f=v(f,l,p,c,s[d+11],22,-1990404162),c=v(c,f,l,p,s[d+12],7,1804603682),p=v(p,c,f,l,s[d+13],12,-40341101),l=v(l,p,c,f,s[d+14],17,-1502002290),c=h(c,f=v(f,l,p,c,s[d+15],22,1236535329),l,p,s[d+1],5,-165796510),p=h(p,c,f,l,s[d+6],9,-1069501632),l=h(l,p,c,f,s[d+11],14,643717713),f=h(f,l,p,c,s[d+0],20,-373897302),c=h(c,f,l,p,s[d+5],5,-701558691),p=h(p,c,f,l,s[d+10],9,38016083),l=h(l,p,c,f,s[d+15],14,-660478335),f=h(f,l,p,c,s[d+4],20,-405537848),c=h(c,f,l,p,s[d+9],5,568446438),p=h(p,c,f,l,s[d+14],9,-1019803690),l=h(l,p,c,f,s[d+3],14,-187363961),f=h(f,l,p,c,s[d+8],20,1163531501),c=h(c,f,l,p,s[d+13],5,-1444681467),p=h(p,c,f,l,s[d+2],9,-51403784),l=h(l,p,c,f,s[d+7],14,1735328473),c=g(c,f=h(f,l,p,c,s[d+12],20,-1926607734),l,p,s[d+5],4,-378558),p=g(p,c,f,l,s[d+8],11,-2022574463),l=g(l,p,c,f,s[d+11],16,1839030562),f=g(f,l,p,c,s[d+14],23,-35309556),c=g(c,f,l,p,s[d+1],4,-1530992060),p=g(p,c,f,l,s[d+4],11,1272893353),l=g(l,p,c,f,s[d+7],16,-155497632),f=g(f,l,p,c,s[d+10],23,-1094730640),c=g(c,f,l,p,s[d+13],4,681279174),p=g(p,c,f,l,s[d+0],11,-358537222),l=g(l,p,c,f,s[d+3],16,-722521979),f=g(f,l,p,c,s[d+6],23,76029189),c=g(c,f,l,p,s[d+9],4,-640364487),p=g(p,c,f,l,s[d+12],11,-421815835),l=g(l,p,c,f,s[d+15],16,530742520),c=y(c,f=g(f,l,p,c,s[d+2],23,-995338651),l,p,s[d+0],6,-198630844),p=y(p,c,f,l,s[d+7],10,1126891415),l=y(l,p,c,f,s[d+14],15,-1416354905),f=y(f,l,p,c,s[d+5],21,-57434055),c=y(c,f,l,p,s[d+12],6,1700485571),p=y(p,c,f,l,s[d+3],10,-1894986606),l=y(l,p,c,f,s[d+10],15,-1051523),f=y(f,l,p,c,s[d+1],21,-2054922799),c=y(c,f,l,p,s[d+8],6,1873313359),p=y(p,c,f,l,s[d+15],10,-30611744),l=y(l,p,c,f,s[d+6],15,-1560198380),f=y(f,l,p,c,s[d+13],21,1309151649),c=y(c,f,l,p,s[d+4],6,-145523070),p=y(p,c,f,l,s[d+11],10,-1120210379),l=y(l,p,c,f,s[d+2],15,718787259),f=y(f,l,p,c,s[d+9],21,-343485551),c=c+E>>>0,f=f+_>>>0,l=l+m>>>0,p=p+O>>>0}return t.endian([c,f,l,p])};a._ff=function(e,t,r,n,o,i,a){var s=e+(t&r|~t&n)+(o>>>0)+a;return(s<<i|s>>>32-i)+t},a._gg=function(e,t,r,n,o,i,a){var s=e+(t&n|r&~n)+(o>>>0)+a;return(s<<i|s>>>32-i)+t},a._hh=function(e,t,r,n,o,i,a){var s=e+(t^r^n)+(o>>>0)+a;return(s<<i|s>>>32-i)+t},a._ii=function(e,t,r,n,o,i,a){var s=e+(r^(t|~n))+(o>>>0)+a;return(s<<i|s>>>32-i)+t},a._blocksize=16,a._digestsize=16,e.exports=function(e,r){if(void 0===e||null===e)throw new Error("Illegal argument "+e);var n=t.wordsToBytes(a(e,r));return r&&r.asBytes?n:r&&r.asString?i.bytesToString(n):t.bytesToHex(n)}}()},58053:function(e){!function(){function t(e,t){var r,n,o,i,a,s,u,c;for(r=3&e.length,n=e.length-r,o=t,a=3432918353,s=461845907,c=0;c<n;)u=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,o=27492+(65535&(i=5*(65535&(o=(o^=u=(65535&(u=(u=(65535&u)*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295)<<13|o>>>19))+((5*(o>>>16)&65535)<<16)&4294967295))+((58964+(i>>>16)&65535)<<16);switch(u=0,r){case 3:u^=(255&e.charCodeAt(c+2))<<16;case 2:u^=(255&e.charCodeAt(c+1))<<8;case 1:o^=u=(65535&(u=(u=(65535&(u^=255&e.charCodeAt(c)))*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295}return o^=e.length,o=2246822507*(65535&(o^=o>>>16))+((2246822507*(o>>>16)&65535)<<16)&4294967295,o=3266489909*(65535&(o^=o>>>13))+((3266489909*(o>>>16)&65535)<<16)&4294967295,(o^=o>>>16)>>>0}var r=t;r.v2=function(e,t){for(var r,n=e.length,o=t^n,i=0;n>=4;)r=1540483477*(65535&(r=255&e.charCodeAt(i)|(255&e.charCodeAt(++i))<<8|(255&e.charCodeAt(++i))<<16|(255&e.charCodeAt(++i))<<24))+((1540483477*(r>>>16)&65535)<<16),o=1540483477*(65535&o)+((1540483477*(o>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),n-=4,++i;switch(n){case 3:o^=(255&e.charCodeAt(i+2))<<16;case 2:o^=(255&e.charCodeAt(i+1))<<8;case 1:o=1540483477*(65535&(o^=255&e.charCodeAt(i)))+((1540483477*(o>>>16)&65535)<<16)}return o=1540483477*(65535&(o^=o>>>13))+((1540483477*(o>>>16)&65535)<<16),(o^=o>>>15)>>>0},r.v3=t,e.exports=r}()},70631:function(e,t,r){var n="function"===typeof Map&&Map.prototype,o=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,i=n&&o&&"function"===typeof o.get?o.get:null,a=n&&Map.prototype.forEach,s="function"===typeof Set&&Set.prototype,u=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,c=s&&u&&"function"===typeof u.get?u.get:null,f=s&&Set.prototype.forEach,l="function"===typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,p="function"===typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,d="function"===typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,v=Boolean.prototype.valueOf,h=Object.prototype.toString,g=Function.prototype.toString,y=String.prototype.match,E=String.prototype.slice,_=String.prototype.replace,m=String.prototype.toUpperCase,O=String.prototype.toLowerCase,b=RegExp.prototype.test,I=Array.prototype.concat,T=Array.prototype.join,R=Array.prototype.slice,A=Math.floor,S="function"===typeof BigInt?BigInt.prototype.valueOf:null,N=Object.getOwnPropertySymbols,w="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?Symbol.prototype.toString:null,P="function"===typeof Symbol&&"object"===typeof Symbol.iterator,C="function"===typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===P||"symbol")?Symbol.toStringTag:null,L=Object.prototype.propertyIsEnumerable,x=("function"===typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function U(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||b.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"===typeof e){var n=e<0?-A(-e):A(e);if(n!==e){var o=String(n),i=E.call(t,o.length+1);return _.call(o,r,"$&_")+"."+_.call(_.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return _.call(t,r,"$&_")}var D=r(24654),j=D.custom,M=G(j)?j:null;function V(e,t,r){var n="double"===(r.quoteStyle||t)?'"':"'";return n+e+n}function k(e){return _.call(String(e),/"/g,"&quot;")}function F(e){return"[object Array]"===W(e)&&(!C||!("object"===typeof e&&C in e))}function B(e){return"[object RegExp]"===W(e)&&(!C||!("object"===typeof e&&C in e))}function G(e){if(P)return e&&"object"===typeof e&&e instanceof Symbol;if("symbol"===typeof e)return!0;if(!e||"object"!==typeof e||!w)return!1;try{return w.call(e),!0}catch(t){}return!1}e.exports=function e(t,r,n,o){var s=r||{};if(H(s,"quoteStyle")&&"single"!==s.quoteStyle&&"double"!==s.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(H(s,"maxStringLength")&&("number"===typeof s.maxStringLength?s.maxStringLength<0&&s.maxStringLength!==1/0:null!==s.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var u=!H(s,"customInspect")||s.customInspect;if("boolean"!==typeof u&&"symbol"!==u)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(H(s,"indent")&&null!==s.indent&&"\t"!==s.indent&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(H(s,"numericSeparator")&&"boolean"!==typeof s.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var h=s.numericSeparator;if("undefined"===typeof t)return"undefined";if(null===t)return"null";if("boolean"===typeof t)return t?"true":"false";if("string"===typeof t)return Y(t,s);if("number"===typeof t){if(0===t)return 1/0/t>0?"0":"-0";var m=String(t);return h?U(t,m):m}if("bigint"===typeof t){var b=String(t)+"n";return h?U(t,b):b}var A="undefined"===typeof s.depth?5:s.depth;if("undefined"===typeof n&&(n=0),n>=A&&A>0&&"object"===typeof t)return F(t)?"[Array]":"[Object]";var N=function(e,t){var r;if("\t"===e.indent)r="\t";else{if(!("number"===typeof e.indent&&e.indent>0))return null;r=T.call(Array(e.indent+1)," ")}return{base:r,prev:T.call(Array(t+1),r)}}(s,n);if("undefined"===typeof o)o=[];else if(z(o,t)>=0)return"[Circular]";function j(t,r,i){if(r&&(o=R.call(o)).push(r),i){var a={depth:s.depth};return H(s,"quoteStyle")&&(a.quoteStyle=s.quoteStyle),e(t,a,n+1,o)}return e(t,s,n+1,o)}if("function"===typeof t&&!B(t)){var K=function(e){if(e.name)return e.name;var t=y.call(g.call(e),/^function\s*([\w$]+)/);if(t)return t[1];return null}(t),q=$(t,j);return"[Function"+(K?": "+K:" (anonymous)")+"]"+(q.length>0?" { "+T.call(q,", ")+" }":"")}if(G(t)){var ee=P?_.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):w.call(t);return"object"!==typeof t||P?ee:J(ee)}if(function(e){if(!e||"object"!==typeof e)return!1;if("undefined"!==typeof HTMLElement&&e instanceof HTMLElement)return!0;return"string"===typeof e.nodeName&&"function"===typeof e.getAttribute}(t)){for(var te="<"+O.call(String(t.nodeName)),re=t.attributes||[],ne=0;ne<re.length;ne++)te+=" "+re[ne].name+"="+V(k(re[ne].value),"double",s);return te+=">",t.childNodes&&t.childNodes.length&&(te+="..."),te+="</"+O.call(String(t.nodeName))+">"}if(F(t)){if(0===t.length)return"[]";var oe=$(t,j);return N&&!function(e){for(var t=0;t<e.length;t++)if(z(e[t],"\n")>=0)return!1;return!0}(oe)?"["+Q(oe,N)+"]":"[ "+T.call(oe,", ")+" ]"}if(function(e){return"[object Error]"===W(e)&&(!C||!("object"===typeof e&&C in e))}(t)){var ie=$(t,j);return"cause"in Error.prototype||!("cause"in t)||L.call(t,"cause")?0===ie.length?"["+String(t)+"]":"{ ["+String(t)+"] "+T.call(ie,", ")+" }":"{ ["+String(t)+"] "+T.call(I.call("[cause]: "+j(t.cause),ie),", ")+" }"}if("object"===typeof t&&u){if(M&&"function"===typeof t[M]&&D)return D(t,{depth:A-n});if("symbol"!==u&&"function"===typeof t.inspect)return t.inspect()}if(function(e){if(!i||!e||"object"!==typeof e)return!1;try{i.call(e);try{c.call(e)}catch(te){return!0}return e instanceof Map}catch(t){}return!1}(t)){var ae=[];return a.call(t,(function(e,r){ae.push(j(r,t,!0)+" => "+j(e,t))})),Z("Map",i.call(t),ae,N)}if(function(e){if(!c||!e||"object"!==typeof e)return!1;try{c.call(e);try{i.call(e)}catch(t){return!0}return e instanceof Set}catch(r){}return!1}(t)){var se=[];return f.call(t,(function(e){se.push(j(e,t))})),Z("Set",c.call(t),se,N)}if(function(e){if(!l||!e||"object"!==typeof e)return!1;try{l.call(e,l);try{p.call(e,p)}catch(te){return!0}return e instanceof WeakMap}catch(t){}return!1}(t))return X("WeakMap");if(function(e){if(!p||!e||"object"!==typeof e)return!1;try{p.call(e,p);try{l.call(e,l)}catch(te){return!0}return e instanceof WeakSet}catch(t){}return!1}(t))return X("WeakSet");if(function(e){if(!d||!e||"object"!==typeof e)return!1;try{return d.call(e),!0}catch(t){}return!1}(t))return X("WeakRef");if(function(e){return"[object Number]"===W(e)&&(!C||!("object"===typeof e&&C in e))}(t))return J(j(Number(t)));if(function(e){if(!e||"object"!==typeof e||!S)return!1;try{return S.call(e),!0}catch(t){}return!1}(t))return J(j(S.call(t)));if(function(e){return"[object Boolean]"===W(e)&&(!C||!("object"===typeof e&&C in e))}(t))return J(v.call(t));if(function(e){return"[object String]"===W(e)&&(!C||!("object"===typeof e&&C in e))}(t))return J(j(String(t)));if(!function(e){return"[object Date]"===W(e)&&(!C||!("object"===typeof e&&C in e))}(t)&&!B(t)){var ue=$(t,j),ce=x?x(t)===Object.prototype:t instanceof Object||t.constructor===Object,fe=t instanceof Object?"":"null prototype",le=!ce&&C&&Object(t)===t&&C in t?E.call(W(t),8,-1):fe?"Object":"",pe=(ce||"function"!==typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(le||fe?"["+T.call(I.call([],le||[],fe||[]),": ")+"] ":"");return 0===ue.length?pe+"{}":N?pe+"{"+Q(ue,N)+"}":pe+"{ "+T.call(ue,", ")+" }"}return String(t)};var K=Object.prototype.hasOwnProperty||function(e){return e in this};function H(e,t){return K.call(e,t)}function W(e){return h.call(e)}function z(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function Y(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return Y(E.call(e,0,t.maxStringLength),t)+n}return V(_.call(_.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,q),"single",t)}function q(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+m.call(t.toString(16))}function J(e){return"Object("+e+")"}function X(e){return e+" { ? }"}function Z(e,t,r,n){return e+" ("+t+") {"+(n?Q(r,n):T.call(r,", "))+"}"}function Q(e,t){if(0===e.length)return"";var r="\n"+t.prev+t.base;return r+T.call(e,","+r)+"\n"+t.prev}function $(e,t){var r=F(e),n=[];if(r){n.length=e.length;for(var o=0;o<e.length;o++)n[o]=H(e,o)?t(e[o],e):""}var i,a="function"===typeof N?N(e):[];if(P){i={};for(var s=0;s<a.length;s++)i["$"+a[s]]=a[s]}for(var u in e)H(e,u)&&(r&&String(Number(u))===u&&u<e.length||P&&i["$"+u]instanceof Symbol||(b.call(/[^\w$]/,u)?n.push(t(u,e)+": "+t(e[u],e)):n.push(u+": "+t(e[u],e))));if("function"===typeof N)for(var c=0;c<a.length;c++)L.call(e,a[c])&&n.push("["+t(a[c])+"]: "+t(e[a[c]],e));return n}},55798:function(e){"use strict";var t=String.prototype.replace,r=/%20/g,n="RFC1738",o="RFC3986";e.exports={default:o,formatters:{RFC1738:function(e){return t.call(e,r,"+")},RFC3986:function(e){return String(e)}},RFC1738:n,RFC3986:o}},27354:function(e,t,r){"use strict";var n=r(58261),o=r(55235),i=r(55798);e.exports={formats:i,parse:o,stringify:n}},55235:function(e,t,r){"use strict";var n=r(12769),o=Object.prototype.hasOwnProperty,i=Array.isArray,a={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},s=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},u=function(e,t){return e&&"string"===typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},c=function(e,t,r,n){if(e){var i=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,s=r.depth>0&&/(\[[^[\]]*])/.exec(i),c=s?i.slice(0,s.index):i,f=[];if(c){if(!r.plainObjects&&o.call(Object.prototype,c)&&!r.allowPrototypes)return;f.push(c)}for(var l=0;r.depth>0&&null!==(s=a.exec(i))&&l<r.depth;){if(l+=1,!r.plainObjects&&o.call(Object.prototype,s[1].slice(1,-1))&&!r.allowPrototypes)return;f.push(s[1])}return s&&f.push("["+i.slice(s.index)+"]"),function(e,t,r,n){for(var o=n?t:u(t,r),i=e.length-1;i>=0;--i){var a,s=e[i];if("[]"===s&&r.parseArrays)a=[].concat(o);else{a=r.plainObjects?Object.create(null):{};var c="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,f=parseInt(c,10);r.parseArrays||""!==c?!isNaN(f)&&s!==c&&String(f)===c&&f>=0&&r.parseArrays&&f<=r.arrayLimit?(a=[])[f]=o:a[c]=o:a={0:o}}o=a}return o}(f,t,r,n)}};e.exports=function(e,t){var r=function(e){if(!e)return a;if(null!==e.decoder&&void 0!==e.decoder&&"function"!==typeof e.decoder)throw new TypeError("Decoder has to be a function.");if("undefined"!==typeof e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t="undefined"===typeof e.charset?a.charset:e.charset;return{allowDots:"undefined"===typeof e.allowDots?a.allowDots:!!e.allowDots,allowPrototypes:"boolean"===typeof e.allowPrototypes?e.allowPrototypes:a.allowPrototypes,allowSparse:"boolean"===typeof e.allowSparse?e.allowSparse:a.allowSparse,arrayLimit:"number"===typeof e.arrayLimit?e.arrayLimit:a.arrayLimit,charset:t,charsetSentinel:"boolean"===typeof e.charsetSentinel?e.charsetSentinel:a.charsetSentinel,comma:"boolean"===typeof e.comma?e.comma:a.comma,decoder:"function"===typeof e.decoder?e.decoder:a.decoder,delimiter:"string"===typeof e.delimiter||n.isRegExp(e.delimiter)?e.delimiter:a.delimiter,depth:"number"===typeof e.depth||!1===e.depth?+e.depth:a.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"===typeof e.interpretNumericEntities?e.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:"number"===typeof e.parameterLimit?e.parameterLimit:a.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"===typeof e.plainObjects?e.plainObjects:a.plainObjects,strictNullHandling:"boolean"===typeof e.strictNullHandling?e.strictNullHandling:a.strictNullHandling}}(t);if(""===e||null===e||"undefined"===typeof e)return r.plainObjects?Object.create(null):{};for(var f="string"===typeof e?function(e,t){var r,c={},f=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,l=t.parameterLimit===1/0?void 0:t.parameterLimit,p=f.split(t.delimiter,l),d=-1,v=t.charset;if(t.charsetSentinel)for(r=0;r<p.length;++r)0===p[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===p[r]?v="utf-8":"utf8=%26%2310003%3B"===p[r]&&(v="iso-8859-1"),d=r,r=p.length);for(r=0;r<p.length;++r)if(r!==d){var h,g,y=p[r],E=y.indexOf("]="),_=-1===E?y.indexOf("="):E+1;-1===_?(h=t.decoder(y,a.decoder,v,"key"),g=t.strictNullHandling?null:""):(h=t.decoder(y.slice(0,_),a.decoder,v,"key"),g=n.maybeMap(u(y.slice(_+1),t),(function(e){return t.decoder(e,a.decoder,v,"value")}))),g&&t.interpretNumericEntities&&"iso-8859-1"===v&&(g=s(g)),y.indexOf("[]=")>-1&&(g=i(g)?[g]:g),o.call(c,h)?c[h]=n.combine(c[h],g):c[h]=g}return c}(e,r):e,l=r.plainObjects?Object.create(null):{},p=Object.keys(f),d=0;d<p.length;++d){var v=p[d],h=c(v,f[v],r,"string"===typeof e);l=n.merge(l,h,r)}return!0===r.allowSparse?l:n.compact(l)}},58261:function(e,t,r){"use strict";var n=r(37478),o=r(12769),i=r(55798),a=Object.prototype.hasOwnProperty,s={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},u=Array.isArray,c=Array.prototype.push,f=function(e,t){c.apply(e,u(t)?t:[t])},l=Date.prototype.toISOString,p=i.default,d={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:o.encode,encodeValuesOnly:!1,format:p,formatter:i.formatters[p],indices:!1,serializeDate:function(e){return l.call(e)},skipNulls:!1,strictNullHandling:!1},v=function e(t,r,i,a,s,c,l,p,v,h,g,y,E,_,m){var O,b=t;if(m.has(t))throw new RangeError("Cyclic object value");if("function"===typeof l?b=l(r,b):b instanceof Date?b=h(b):"comma"===i&&u(b)&&(b=o.maybeMap(b,(function(e){return e instanceof Date?h(e):e}))),null===b){if(a)return c&&!E?c(r,d.encoder,_,"key",g):r;b=""}if("string"===typeof(O=b)||"number"===typeof O||"boolean"===typeof O||"symbol"===typeof O||"bigint"===typeof O||o.isBuffer(b))return c?[y(E?r:c(r,d.encoder,_,"key",g))+"="+y(c(b,d.encoder,_,"value",g))]:[y(r)+"="+y(String(b))];var I,T=[];if("undefined"===typeof b)return T;if("comma"===i&&u(b))I=[{value:b.length>0?b.join(",")||null:void 0}];else if(u(l))I=l;else{var R=Object.keys(b);I=p?R.sort(p):R}for(var A=0;A<I.length;++A){var S=I[A],N="object"===typeof S&&void 0!==S.value?S.value:b[S];if(!s||null!==N){var w=u(b)?"function"===typeof i?i(r,S):r:r+(v?"."+S:"["+S+"]");m.set(t,!0);var P=n();f(T,e(N,w,i,a,s,c,l,p,v,h,g,y,E,_,P))}}return T};e.exports=function(e,t){var r,o=e,c=function(e){if(!e)return d;if(null!==e.encoder&&void 0!==e.encoder&&"function"!==typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||d.charset;if("undefined"!==typeof e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=i.default;if("undefined"!==typeof e.format){if(!a.call(i.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n=i.formatters[r],o=d.filter;return("function"===typeof e.filter||u(e.filter))&&(o=e.filter),{addQueryPrefix:"boolean"===typeof e.addQueryPrefix?e.addQueryPrefix:d.addQueryPrefix,allowDots:"undefined"===typeof e.allowDots?d.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"===typeof e.charsetSentinel?e.charsetSentinel:d.charsetSentinel,delimiter:"undefined"===typeof e.delimiter?d.delimiter:e.delimiter,encode:"boolean"===typeof e.encode?e.encode:d.encode,encoder:"function"===typeof e.encoder?e.encoder:d.encoder,encodeValuesOnly:"boolean"===typeof e.encodeValuesOnly?e.encodeValuesOnly:d.encodeValuesOnly,filter:o,format:r,formatter:n,serializeDate:"function"===typeof e.serializeDate?e.serializeDate:d.serializeDate,skipNulls:"boolean"===typeof e.skipNulls?e.skipNulls:d.skipNulls,sort:"function"===typeof e.sort?e.sort:null,strictNullHandling:"boolean"===typeof e.strictNullHandling?e.strictNullHandling:d.strictNullHandling}}(t);"function"===typeof c.filter?o=(0,c.filter)("",o):u(c.filter)&&(r=c.filter);var l,p=[];if("object"!==typeof o||null===o)return"";l=t&&t.arrayFormat in s?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var h=s[l];r||(r=Object.keys(o)),c.sort&&r.sort(c.sort);for(var g=n(),y=0;y<r.length;++y){var E=r[y];c.skipNulls&&null===o[E]||f(p,v(o[E],E,h,c.strictNullHandling,c.skipNulls,c.encode?c.encoder:null,c.filter,c.sort,c.allowDots,c.serializeDate,c.format,c.formatter,c.encodeValuesOnly,c.charset,g))}var _=p.join(c.delimiter),m=!0===c.addQueryPrefix?"?":"";return c.charsetSentinel&&("iso-8859-1"===c.charset?m+="utf8=%26%2310003%3B&":m+="utf8=%E2%9C%93&"),_.length>0?m+_:""}},12769:function(e,t,r){"use strict";var n=r(55798),o=Object.prototype.hasOwnProperty,i=Array.isArray,a=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),s=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)"undefined"!==typeof e[n]&&(r[n]=e[n]);return r};e.exports={arrayToObject:s,assign:function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var o=t[n],a=o.obj[o.prop],s=Object.keys(a),u=0;u<s.length;++u){var c=s[u],f=a[c];"object"===typeof f&&null!==f&&-1===r.indexOf(f)&&(t.push({obj:a,prop:c}),r.push(f))}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(i(r)){for(var n=[],o=0;o<r.length;++o)"undefined"!==typeof r[o]&&n.push(r[o]);t.obj[t.prop]=n}}}(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(o){return n}},encode:function(e,t,r,o,i){if(0===e.length)return e;var s=e;if("symbol"===typeof e?s=Symbol.prototype.toString.call(e):"string"!==typeof e&&(s=String(e)),"iso-8859-1"===r)return escape(s).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var u="",c=0;c<s.length;++c){var f=s.charCodeAt(c);45===f||46===f||95===f||126===f||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||i===n.RFC1738&&(40===f||41===f)?u+=s.charAt(c):f<128?u+=a[f]:f<2048?u+=a[192|f>>6]+a[128|63&f]:f<55296||f>=57344?u+=a[224|f>>12]+a[128|f>>6&63]+a[128|63&f]:(c+=1,f=65536+((1023&f)<<10|1023&s.charCodeAt(c)),u+=a[240|f>>18]+a[128|f>>12&63]+a[128|f>>6&63]+a[128|63&f])}return u},isBuffer:function(e){return!(!e||"object"!==typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(i(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)},merge:function e(t,r,n){if(!r)return t;if("object"!==typeof r){if(i(t))t.push(r);else{if(!t||"object"!==typeof t)return[t,r];(n&&(n.plainObjects||n.allowPrototypes)||!o.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!==typeof t)return[t].concat(r);var a=t;return i(t)&&!i(r)&&(a=s(t,n)),i(t)&&i(r)?(r.forEach((function(r,i){if(o.call(t,i)){var a=t[i];a&&"object"===typeof a&&r&&"object"===typeof r?t[i]=e(a,r,n):t.push(r)}else t[i]=r})),t):Object.keys(r).reduce((function(t,i){var a=r[i];return o.call(t,i)?t[i]=e(t[i],a,n):t[i]=a,t}),a)}}},37478:function(e,t,r){"use strict";var n=r(40210),o=r(21924),i=r(70631),a=n("%TypeError%"),s=n("%WeakMap%",!0),u=n("%Map%",!0),c=o("WeakMap.prototype.get",!0),f=o("WeakMap.prototype.set",!0),l=o("WeakMap.prototype.has",!0),p=o("Map.prototype.get",!0),d=o("Map.prototype.set",!0),v=o("Map.prototype.has",!0),h=function(e,t){for(var r,n=e;null!==(r=n.next);n=r)if(r.key===t)return n.next=r.next,r.next=e.next,e.next=r,r};e.exports=function(){var e,t,r,n={assert:function(e){if(!n.has(e))throw new a("Side channel does not contain "+i(e))},get:function(n){if(s&&n&&("object"===typeof n||"function"===typeof n)){if(e)return c(e,n)}else if(u){if(t)return p(t,n)}else if(r)return function(e,t){var r=h(e,t);return r&&r.value}(r,n)},has:function(n){if(s&&n&&("object"===typeof n||"function"===typeof n)){if(e)return l(e,n)}else if(u){if(t)return v(t,n)}else if(r)return function(e,t){return!!h(e,t)}(r,n);return!1},set:function(n,o){s&&n&&("object"===typeof n||"function"===typeof n)?(e||(e=new s),f(e,n,o)):u?(t||(t=new u),d(t,n,o)):(r||(r={key:{},next:null}),function(e,t,r){var n=h(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r}}(r,n,o))}};return n}},55877:function(e,t,r){var n=r(23570),o=r(71171),i=o;i.v1=n,i.v4=o,e.exports=i},45327:function(e){for(var t=[],r=0;r<256;++r)t[r]=(r+256).toString(16).substr(1);e.exports=function(e,r){var n=r||0,o=t;return[o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]]].join("")}},85217:function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var r=new Uint8Array(16);e.exports=function(){return t(r),r}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}},23570:function(e,t,r){var n,o,i=r(85217),a=r(45327),s=0,u=0;e.exports=function(e,t,r){var c=t&&r||0,f=t||[],l=(e=e||{}).node||n,p=void 0!==e.clockseq?e.clockseq:o;if(null==l||null==p){var d=i();null==l&&(l=n=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==p&&(p=o=16383&(d[6]<<8|d[7]))}var v=void 0!==e.msecs?e.msecs:(new Date).getTime(),h=void 0!==e.nsecs?e.nsecs:u+1,g=v-s+(h-u)/1e4;if(g<0&&void 0===e.clockseq&&(p=p+1&16383),(g<0||v>s)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=v,u=h,o=p;var y=(1e4*(268435455&(v+=122192928e5))+h)%4294967296;f[c++]=y>>>24&255,f[c++]=y>>>16&255,f[c++]=y>>>8&255,f[c++]=255&y;var E=v/4294967296*1e4&268435455;f[c++]=E>>>8&255,f[c++]=255&E,f[c++]=E>>>24&15|16,f[c++]=E>>>16&255,f[c++]=p>>>8|128,f[c++]=255&p;for(var _=0;_<6;++_)f[c+_]=l[_];return t||a(f)}},71171:function(e,t,r){var n=r(85217),o=r(45327);e.exports=function(e,t,r){var i=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||n)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[i+s]=a[s];return t||o(a)}}}]);